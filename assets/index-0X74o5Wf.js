var ry=Object.defineProperty;var iy=(a,t,n)=>t in a?ry(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var Rn=(a,t,n)=>(iy(a,typeof t!="symbol"?t+"":t,n),n);import{R as sy,P as oy,M as Qe,k as ay,V as ue,l as wr,T as vr,Q as Ot,S as ol,m as Ye,n as Ie,O as Rr,q as ei,a as Ta,s as cy,u as ra,v as Gl,C as ze,L as Jn,x as Mr,G as Fn,B as Sr,y as Ct,z as si,A as oi,D as ri,H as ai,I as ia,J as ms,K as li,N as Zn,U as jl,W as Or,X as uy,Y as xs,Z as zt,$ as Ft,a0 as zl,a1 as sa,a2 as Wl,a3 as ii,a4 as pn,a5 as ly,a6 as fy,a7 as hy,a8 as zo,a9 as py,aa as Mn,ab as Kl,ac as Vl,ad as Xl,ae as fi,af as ql,ag as Yl,ah as dy,ai as Ea,aj as $l,ak as Zl,al as xa,am as oa,an as Jl,ao as al,ap as gy,aq as my,ar as _y,as as yy,at as aa,au as wy,av as vy,aw as Ay,ax as ci,ay as ca,az as ua,aA as As,aB as Ty,aC as Ey,aD as xy,aE as bs,aF as by,aG as Ry,aH as Sy,aI as Ly,aJ as Iy,aK as Oy,aL as Cy,aM as $t,aN as My,aO as xr,aP as _s,aQ as hs,aR as Py,aS as Fy,aT as Dy,aU as Ar,d as ba,aV as Ny,aW as By,aX as ky,aY as Uy,aZ as Hy,a_ as Gy,a$ as jy,b0 as zy,b1 as Wy,_ as Ky,o as cl,e as ul,b2 as Vy,b3 as Xy,p as qy,j as Yy,f as $y}from"./index-ATyGUcIh.js";const ll={type:"change"},Wo={type:"start"},fl={type:"end"},ps=new sy,hl=new oy,Zy=Math.cos(70*Qe.DEG2RAD);class Jy extends ay{constructor(t,n){super(),this.object=t,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ue,this.cursor=new ue,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:wr.ROTATE,MIDDLE:wr.DOLLY,RIGHT:wr.PAN},this.touches={ONE:vr.ROTATE,TWO:vr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(x){x.addEventListener("keydown",Wt),this._domElementKeyEvents=x},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Wt),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(ll),i.update(),o=s.NONE},this.update=function(){const x=new ue,z=new Ot().setFromUnitVectors(t.up,new ue(0,1,0)),ge=z.clone().invert(),be=new ue,Xe=new Ot,Vt=new ue,at=2*Math.PI;return function(Cs=null){const kr=i.object.position;x.copy(kr).sub(i.target),x.applyQuaternion(z),l.setFromVector3(x),i.autoRotate&&o===s.NONE&&le(V(Cs)),i.enableDamping?(l.theta+=h.theta*i.dampingFactor,l.phi+=h.phi*i.dampingFactor):(l.theta+=h.theta,l.phi+=h.phi);let Nt=i.minAzimuthAngle,Bt=i.maxAzimuthAngle;isFinite(Nt)&&isFinite(Bt)&&(Nt<-Math.PI?Nt+=at:Nt>Math.PI&&(Nt-=at),Bt<-Math.PI?Bt+=at:Bt>Math.PI&&(Bt-=at),Nt<=Bt?l.theta=Math.max(Nt,Math.min(Bt,l.theta)):l.theta=l.theta>(Nt+Bt)/2?Math.max(Nt,l.theta):Math.min(Bt,l.theta)),l.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,l.phi)),l.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.target.sub(i.cursor),i.target.clampLength(i.minTargetRadius,i.maxTargetRadius),i.target.add(i.cursor);let kn=!1;if(i.zoomToCursor&&j||i.object.isOrthographicCamera)l.radius=Y(l.radius);else{const pt=l.radius;l.radius=Y(l.radius*d),kn=pt!=l.radius}if(x.setFromSpherical(l),x.applyQuaternion(ge),kr.copy(i.target).add(x),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),m.set(0,0,0)),i.zoomToCursor&&j){let pt=null;if(i.object.isPerspectiveCamera){const Un=x.length();pt=Y(Un*d);const mn=Un-pt;i.object.position.addScaledVector(k,mn),i.object.updateMatrixWorld(),kn=!!mn}else if(i.object.isOrthographicCamera){const Un=new ue($.x,$.y,0);Un.unproject(i.object);const mn=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/d)),i.object.updateProjectionMatrix(),kn=mn!==i.object.zoom;const Ei=new ue($.x,$.y,0);Ei.unproject(i.object),i.object.position.sub(Ei).add(Un),i.object.updateMatrixWorld(),pt=x.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;pt!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(pt).add(i.object.position):(ps.origin.copy(i.object.position),ps.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(ps.direction))<Zy?t.lookAt(i.target):(hl.setFromNormalAndCoplanarPoint(i.object.up,i.target),ps.intersectPlane(hl,i.target))))}else if(i.object.isOrthographicCamera){const pt=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/d)),pt!==i.object.zoom&&(i.object.updateProjectionMatrix(),kn=!0)}return d=1,j=!1,kn||be.distanceToSquared(i.object.position)>u||8*(1-Xe.dot(i.object.quaternion))>u||Vt.distanceToSquared(i.target)>u?(i.dispatchEvent(ll),be.copy(i.object.position),Xe.copy(i.object.quaternion),Vt.copy(i.target),!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",rr),i.domElement.removeEventListener("pointerdown",wi),i.domElement.removeEventListener("pointercancel",$e),i.domElement.removeEventListener("wheel",vi),i.domElement.removeEventListener("pointermove",tn),i.domElement.removeEventListener("pointerup",$e),i.domElement.getRootNode().removeEventListener("keydown",Ai,{capture:!0}),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",Wt),i._domElementKeyEvents=null)};const i=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=s.NONE;const u=1e-6,l=new ol,h=new ol;let d=1;const m=new ue,p=new Ye,w=new Ye,v=new Ye,T=new Ye,b=new Ye,S=new Ye,O=new Ye,D=new Ye,B=new Ye,k=new ue,$=new Ye;let j=!1;const H=[],U={};let X=!1;function V(x){return x!==null?2*Math.PI/60*i.autoRotateSpeed*x:2*Math.PI/60/60*i.autoRotateSpeed}function de(x){const z=Math.abs(x*.01);return Math.pow(.95,i.zoomSpeed*z)}function le(x){h.theta-=x}function se(x){h.phi-=x}const te=function(){const x=new ue;return function(ge,be){x.setFromMatrixColumn(be,0),x.multiplyScalar(-ge),m.add(x)}}(),xe=function(){const x=new ue;return function(ge,be){i.screenSpacePanning===!0?x.setFromMatrixColumn(be,1):(x.setFromMatrixColumn(be,0),x.crossVectors(i.object.up,x)),x.multiplyScalar(ge),m.add(x)}}(),ne=function(){const x=new ue;return function(ge,be){const Xe=i.domElement;if(i.object.isPerspectiveCamera){const Vt=i.object.position;x.copy(Vt).sub(i.target);let at=x.length();at*=Math.tan(i.object.fov/2*Math.PI/180),te(2*ge*at/Xe.clientHeight,i.object.matrix),xe(2*be*at/Xe.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(te(ge*(i.object.right-i.object.left)/i.object.zoom/Xe.clientWidth,i.object.matrix),xe(be*(i.object.top-i.object.bottom)/i.object.zoom/Xe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function De(x){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?d/=x:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function J(x){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?d*=x:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function K(x,z){if(!i.zoomToCursor)return;j=!0;const ge=i.domElement.getBoundingClientRect(),be=x-ge.left,Xe=z-ge.top,Vt=ge.width,at=ge.height;$.x=be/Vt*2-1,$.y=-(Xe/at)*2+1,k.set($.x,$.y,1).unproject(i.object).sub(i.object.position).normalize()}function Y(x){return Math.max(i.minDistance,Math.min(i.maxDistance,x))}function fe(x){p.set(x.clientX,x.clientY)}function ve(x){K(x.clientX,x.clientX),O.set(x.clientX,x.clientY)}function oe(x){T.set(x.clientX,x.clientY)}function Se(x){w.set(x.clientX,x.clientY),v.subVectors(w,p).multiplyScalar(i.rotateSpeed);const z=i.domElement;le(2*Math.PI*v.x/z.clientHeight),se(2*Math.PI*v.y/z.clientHeight),p.copy(w),i.update()}function Ge(x){D.set(x.clientX,x.clientY),B.subVectors(D,O),B.y>0?De(de(B.y)):B.y<0&&J(de(B.y)),O.copy(D),i.update()}function je(x){b.set(x.clientX,x.clientY),S.subVectors(b,T).multiplyScalar(i.panSpeed),ne(S.x,S.y),T.copy(b),i.update()}function en(x){K(x.clientX,x.clientY),x.deltaY<0?J(de(x.deltaY)):x.deltaY>0&&De(de(x.deltaY)),i.update()}function ht(x){let z=!1;switch(x.code){case i.keys.UP:x.ctrlKey||x.metaKey||x.shiftKey?se(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ne(0,i.keyPanSpeed),z=!0;break;case i.keys.BOTTOM:x.ctrlKey||x.metaKey||x.shiftKey?se(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ne(0,-i.keyPanSpeed),z=!0;break;case i.keys.LEFT:x.ctrlKey||x.metaKey||x.shiftKey?le(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ne(i.keyPanSpeed,0),z=!0;break;case i.keys.RIGHT:x.ctrlKey||x.metaKey||x.shiftKey?le(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ne(-i.keyPanSpeed,0),z=!0;break}z&&(x.preventDefault(),i.update())}function Ce(x){if(H.length===1)p.set(x.pageX,x.pageY);else{const z=Kt(x),ge=.5*(x.pageX+z.x),be=.5*(x.pageY+z.y);p.set(ge,be)}}function Qn(x){if(H.length===1)T.set(x.pageX,x.pageY);else{const z=Kt(x),ge=.5*(x.pageX+z.x),be=.5*(x.pageY+z.y);T.set(ge,be)}}function Dn(x){const z=Kt(x),ge=x.pageX-z.x,be=x.pageY-z.y,Xe=Math.sqrt(ge*ge+be*be);O.set(0,Xe)}function er(x){i.enableZoom&&Dn(x),i.enablePan&&Qn(x)}function mi(x){i.enableZoom&&Dn(x),i.enableRotate&&Ce(x)}function ot(x){if(H.length==1)w.set(x.pageX,x.pageY);else{const ge=Kt(x),be=.5*(x.pageX+ge.x),Xe=.5*(x.pageY+ge.y);w.set(be,Xe)}v.subVectors(w,p).multiplyScalar(i.rotateSpeed);const z=i.domElement;le(2*Math.PI*v.x/z.clientHeight),se(2*Math.PI*v.y/z.clientHeight),p.copy(w)}function dn(x){if(H.length===1)b.set(x.pageX,x.pageY);else{const z=Kt(x),ge=.5*(x.pageX+z.x),be=.5*(x.pageY+z.y);b.set(ge,be)}S.subVectors(b,T).multiplyScalar(i.panSpeed),ne(S.x,S.y),T.copy(b)}function _i(x){const z=Kt(x),ge=x.pageX-z.x,be=x.pageY-z.y,Xe=Math.sqrt(ge*ge+be*be);D.set(0,Xe),B.set(0,Math.pow(D.y/O.y,i.zoomSpeed)),De(B.y),O.copy(D);const Vt=(x.pageX+z.x)*.5,at=(x.pageY+z.y)*.5;K(Vt,at)}function Dt(x){i.enableZoom&&_i(x),i.enablePan&&dn(x)}function yi(x){i.enableZoom&&_i(x),i.enableRotate&&ot(x)}function wi(x){i.enabled!==!1&&(H.length===0&&(i.domElement.setPointerCapture(x.pointerId),i.domElement.addEventListener("pointermove",tn),i.domElement.addEventListener("pointerup",$e)),!Br(x)&&(Dr(x),x.pointerType==="touch"?nr(x):Nn(x)))}function tn(x){i.enabled!==!1&&(x.pointerType==="touch"?Fr(x):tr(x))}function $e(x){switch(Nr(x),H.length){case 0:i.domElement.releasePointerCapture(x.pointerId),i.domElement.removeEventListener("pointermove",tn),i.domElement.removeEventListener("pointerup",$e),i.dispatchEvent(fl),o=s.NONE;break;case 1:const z=H[0],ge=U[z];nr({pointerId:z,pageX:ge.x,pageY:ge.y});break}}function Nn(x){let z;switch(x.button){case 0:z=i.mouseButtons.LEFT;break;case 1:z=i.mouseButtons.MIDDLE;break;case 2:z=i.mouseButtons.RIGHT;break;default:z=-1}switch(z){case wr.DOLLY:if(i.enableZoom===!1)return;ve(x),o=s.DOLLY;break;case wr.ROTATE:if(x.ctrlKey||x.metaKey||x.shiftKey){if(i.enablePan===!1)return;oe(x),o=s.PAN}else{if(i.enableRotate===!1)return;fe(x),o=s.ROTATE}break;case wr.PAN:if(x.ctrlKey||x.metaKey||x.shiftKey){if(i.enableRotate===!1)return;fe(x),o=s.ROTATE}else{if(i.enablePan===!1)return;oe(x),o=s.PAN}break;default:o=s.NONE}o!==s.NONE&&i.dispatchEvent(Wo)}function tr(x){switch(o){case s.ROTATE:if(i.enableRotate===!1)return;Se(x);break;case s.DOLLY:if(i.enableZoom===!1)return;Ge(x);break;case s.PAN:if(i.enablePan===!1)return;je(x);break}}function vi(x){i.enabled===!1||i.enableZoom===!1||o!==s.NONE||(x.preventDefault(),i.dispatchEvent(Wo),en(Bn(x)),i.dispatchEvent(fl))}function Bn(x){const z=x.deltaMode,ge={clientX:x.clientX,clientY:x.clientY,deltaY:x.deltaY};switch(z){case 1:ge.deltaY*=16;break;case 2:ge.deltaY*=100;break}return x.ctrlKey&&!X&&(ge.deltaY*=10),ge}function Ai(x){x.key==="Control"&&(X=!0,i.domElement.getRootNode().addEventListener("keyup",gn,{passive:!0,capture:!0}))}function gn(x){x.key==="Control"&&(X=!1,i.domElement.getRootNode().removeEventListener("keyup",gn,{passive:!0,capture:!0}))}function Wt(x){i.enabled===!1||i.enablePan===!1||ht(x)}function nr(x){switch(ir(x),H.length){case 1:switch(i.touches.ONE){case vr.ROTATE:if(i.enableRotate===!1)return;Ce(x),o=s.TOUCH_ROTATE;break;case vr.PAN:if(i.enablePan===!1)return;Qn(x),o=s.TOUCH_PAN;break;default:o=s.NONE}break;case 2:switch(i.touches.TWO){case vr.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;er(x),o=s.TOUCH_DOLLY_PAN;break;case vr.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;mi(x),o=s.TOUCH_DOLLY_ROTATE;break;default:o=s.NONE}break;default:o=s.NONE}o!==s.NONE&&i.dispatchEvent(Wo)}function Fr(x){switch(ir(x),o){case s.TOUCH_ROTATE:if(i.enableRotate===!1)return;ot(x),i.update();break;case s.TOUCH_PAN:if(i.enablePan===!1)return;dn(x),i.update();break;case s.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Dt(x),i.update();break;case s.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;yi(x),i.update();break;default:o=s.NONE}}function rr(x){i.enabled!==!1&&x.preventDefault()}function Dr(x){H.push(x.pointerId)}function Nr(x){delete U[x.pointerId];for(let z=0;z<H.length;z++)if(H[z]==x.pointerId){H.splice(z,1);return}}function Br(x){for(let z=0;z<H.length;z++)if(H[z]==x.pointerId)return!0;return!1}function ir(x){let z=U[x.pointerId];z===void 0&&(z=new Ye,U[x.pointerId]=z),z.set(x.pageX,x.pageY)}function Kt(x){const z=x.pointerId===H[0]?H[1]:H[0];return U[z]}i.domElement.addEventListener("contextmenu",rr),i.domElement.addEventListener("pointerdown",wi),i.domElement.addEventListener("pointercancel",$e),i.domElement.addEventListener("wheel",vi,{passive:!1}),i.domElement.getRootNode().addEventListener("keydown",Ai,{passive:!0,capture:!0}),this.update()}}class Qy extends Rr{constructor(t=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ye(.5,.5),this.addEventListener("removed",function(){this.traverse(function(n){n.element instanceof Element&&n.element.parentNode!==null&&n.element.parentNode.removeChild(n.element)})})}copy(t,n){return super.copy(t,n),this.element=t.element.cloneNode(!0),this.center=t.center,this}}const Tr=new ue,pl=new Ie,dl=new Ie,gl=new ue,ml=new ue;class ew{constructor(t={}){const n=this;let i,s,o,u;const l={objects:new WeakMap},h=t.element!==void 0?t.element:document.createElement("div");h.style.overflow="hidden",this.domElement=h,this.getSize=function(){return{width:i,height:s}},this.render=function(v,T){v.matrixWorldAutoUpdate===!0&&v.updateMatrixWorld(),T.parent===null&&T.matrixWorldAutoUpdate===!0&&T.updateMatrixWorld(),pl.copy(T.matrixWorldInverse),dl.multiplyMatrices(T.projectionMatrix,pl),d(v,v,T),w(v)},this.setSize=function(v,T){i=v,s=T,o=i/2,u=s/2,h.style.width=v+"px",h.style.height=T+"px"};function d(v,T,b){if(v.isCSS2DObject){Tr.setFromMatrixPosition(v.matrixWorld),Tr.applyMatrix4(dl);const S=v.visible===!0&&Tr.z>=-1&&Tr.z<=1&&v.layers.test(b.layers)===!0;if(v.element.style.display=S===!0?"":"none",S===!0){v.onBeforeRender(n,T,b);const D=v.element;D.style.transform="translate("+-100*v.center.x+"%,"+-100*v.center.y+"%)translate("+(Tr.x*o+o)+"px,"+(-Tr.y*u+u)+"px)",D.parentNode!==h&&h.appendChild(D),v.onAfterRender(n,T,b)}const O={distanceToCameraSquared:m(b,v)};l.objects.set(v,O)}for(let S=0,O=v.children.length;S<O;S++)d(v.children[S],T,b)}function m(v,T){return gl.setFromMatrixPosition(v.matrixWorld),ml.setFromMatrixPosition(T.matrixWorld),gl.distanceToSquared(ml)}function p(v){const T=[];return v.traverse(function(b){b.isCSS2DObject&&T.push(b)}),T}function w(v){const T=p(v).sort(function(S,O){if(S.renderOrder!==O.renderOrder)return O.renderOrder-S.renderOrder;const D=l.objects.get(S).distanceToCameraSquared,B=l.objects.get(O).distanceToCameraSquared;return D-B}),b=T.length;for(let S=0,O=T.length;S<O;S++)T[S].element.style.zIndex=b-S}}}var Ts={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ts.exports;(function(a,t){(function(){var n,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,m="__lodash_placeholder__",p=1,w=2,v=4,T=1,b=2,S=1,O=2,D=4,B=8,k=16,$=32,j=64,H=128,U=256,X=512,V=30,de="...",le=800,se=16,te=1,xe=2,ne=3,De=1/0,J=9007199254740991,K=17976931348623157e292,Y=NaN,fe=4294967295,ve=fe-1,oe=fe>>>1,Se=[["ary",H],["bind",S],["bindKey",O],["curry",B],["curryRight",k],["flip",X],["partial",$],["partialRight",j],["rearg",U]],Ge="[object Arguments]",je="[object Array]",en="[object AsyncFunction]",ht="[object Boolean]",Ce="[object Date]",Qn="[object DOMException]",Dn="[object Error]",er="[object Function]",mi="[object GeneratorFunction]",ot="[object Map]",dn="[object Number]",_i="[object Null]",Dt="[object Object]",yi="[object Promise]",wi="[object Proxy]",tn="[object RegExp]",$e="[object Set]",Nn="[object String]",tr="[object Symbol]",vi="[object Undefined]",Bn="[object WeakMap]",Ai="[object WeakSet]",gn="[object ArrayBuffer]",Wt="[object DataView]",nr="[object Float32Array]",Fr="[object Float64Array]",rr="[object Int8Array]",Dr="[object Int16Array]",Nr="[object Int32Array]",Br="[object Uint8Array]",ir="[object Uint8ClampedArray]",Kt="[object Uint16Array]",Ti="[object Uint32Array]",x=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39);/g,Xe=/[&<>"']/g,Vt=RegExp(be.source),at=RegExp(Xe.source),Pa=/<%-([\s\S]+?)%>/g,Cs=/<%([\s\S]+?)%>/g,kr=/<%=([\s\S]+?)%>/g,Nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bt=/^\w*$/,kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pt=/[\\^$.*+?()[\]{}|]/g,Un=RegExp(pt.source),mn=/^\s+/,Ei=/\s/,Nf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bf=/\{\n\/\* \[wrapped with (.+)\] \*/,kf=/,? & /,Uf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hf=/[()=,{}\[\]\/\s]/,Gf=/\\(\\)?/g,jf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fa=/\w*$/,zf=/^[-+]0x[0-9a-f]+$/i,Wf=/^0b[01]+$/i,Kf=/^\[object .+?Constructor\]$/,Vf=/^0o[0-7]+$/i,Xf=/^(?:0|[1-9]\d*)$/,qf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xi=/($^)/,Yf=/['\n\r\u2028\u2029\\]/g,bi="\\ud800-\\udfff",$f="\\u0300-\\u036f",Zf="\\ufe20-\\ufe2f",Jf="\\u20d0-\\u20ff",Da=$f+Zf+Jf,Na="\\u2700-\\u27bf",Ba="a-z\\xdf-\\xf6\\xf8-\\xff",Qf="\\xac\\xb1\\xd7\\xf7",eh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",th="\\u2000-\\u206f",nh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ka="A-Z\\xc0-\\xd6\\xd8-\\xde",Ua="\\ufe0e\\ufe0f",Ha=Qf+eh+th+nh,Ms="['’]",rh="["+bi+"]",Ga="["+Ha+"]",Ri="["+Da+"]",ja="\\d+",ih="["+Na+"]",za="["+Ba+"]",Wa="[^"+bi+Ha+ja+Na+Ba+ka+"]",Ps="\\ud83c[\\udffb-\\udfff]",sh="(?:"+Ri+"|"+Ps+")",Ka="[^"+bi+"]",Fs="(?:\\ud83c[\\udde6-\\uddff]){2}",Ds="[\\ud800-\\udbff][\\udc00-\\udfff]",sr="["+ka+"]",Va="\\u200d",Xa="(?:"+za+"|"+Wa+")",oh="(?:"+sr+"|"+Wa+")",qa="(?:"+Ms+"(?:d|ll|m|re|s|t|ve))?",Ya="(?:"+Ms+"(?:D|LL|M|RE|S|T|VE))?",$a=sh+"?",Za="["+Ua+"]?",ah="(?:"+Va+"(?:"+[Ka,Fs,Ds].join("|")+")"+Za+$a+")*",ch="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ja=Za+$a+ah,lh="(?:"+[ih,Fs,Ds].join("|")+")"+Ja,fh="(?:"+[Ka+Ri+"?",Ri,Fs,Ds,rh].join("|")+")",hh=RegExp(Ms,"g"),ph=RegExp(Ri,"g"),Ns=RegExp(Ps+"(?="+Ps+")|"+fh+Ja,"g"),dh=RegExp([sr+"?"+za+"+"+qa+"(?="+[Ga,sr,"$"].join("|")+")",oh+"+"+Ya+"(?="+[Ga,sr+Xa,"$"].join("|")+")",sr+"?"+Xa+"+"+qa,sr+"+"+Ya,uh,ch,ja,lh].join("|"),"g"),gh=RegExp("["+Va+bi+Da+Ua+"]"),mh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_h=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yh=-1,Me={};Me[nr]=Me[Fr]=Me[rr]=Me[Dr]=Me[Nr]=Me[Br]=Me[ir]=Me[Kt]=Me[Ti]=!0,Me[Ge]=Me[je]=Me[gn]=Me[ht]=Me[Wt]=Me[Ce]=Me[Dn]=Me[er]=Me[ot]=Me[dn]=Me[Dt]=Me[tn]=Me[$e]=Me[Nn]=Me[Bn]=!1;var Oe={};Oe[Ge]=Oe[je]=Oe[gn]=Oe[Wt]=Oe[ht]=Oe[Ce]=Oe[nr]=Oe[Fr]=Oe[rr]=Oe[Dr]=Oe[Nr]=Oe[ot]=Oe[dn]=Oe[Dt]=Oe[tn]=Oe[$e]=Oe[Nn]=Oe[tr]=Oe[Br]=Oe[ir]=Oe[Kt]=Oe[Ti]=!0,Oe[Dn]=Oe[er]=Oe[Bn]=!1;var wh={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},vh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ah={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Th={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Eh=parseFloat,xh=parseInt,Qa=typeof ei=="object"&&ei&&ei.Object===Object&&ei,bh=typeof self=="object"&&self&&self.Object===Object&&self,Ze=Qa||bh||Function("return this")(),Bs=t&&!t.nodeType&&t,Hn=Bs&&!0&&a&&!a.nodeType&&a,ec=Hn&&Hn.exports===Bs,ks=ec&&Qa.process,vt=function(){try{var R=Hn&&Hn.require&&Hn.require("util").types;return R||ks&&ks.binding&&ks.binding("util")}catch{}}(),tc=vt&&vt.isArrayBuffer,nc=vt&&vt.isDate,rc=vt&&vt.isMap,ic=vt&&vt.isRegExp,sc=vt&&vt.isSet,oc=vt&&vt.isTypedArray;function dt(R,C,I){switch(I.length){case 0:return R.call(C);case 1:return R.call(C,I[0]);case 2:return R.call(C,I[0],I[1]);case 3:return R.call(C,I[0],I[1],I[2])}return R.apply(C,I)}function Rh(R,C,I,W){for(var re=-1,Te=R==null?0:R.length;++re<Te;){var Ke=R[re];C(W,Ke,I(Ke),R)}return W}function At(R,C){for(var I=-1,W=R==null?0:R.length;++I<W&&C(R[I],I,R)!==!1;);return R}function Sh(R,C){for(var I=R==null?0:R.length;I--&&C(R[I],I,R)!==!1;);return R}function ac(R,C){for(var I=-1,W=R==null?0:R.length;++I<W;)if(!C(R[I],I,R))return!1;return!0}function _n(R,C){for(var I=-1,W=R==null?0:R.length,re=0,Te=[];++I<W;){var Ke=R[I];C(Ke,I,R)&&(Te[re++]=Ke)}return Te}function Si(R,C){var I=R==null?0:R.length;return!!I&&or(R,C,0)>-1}function Us(R,C,I){for(var W=-1,re=R==null?0:R.length;++W<re;)if(I(C,R[W]))return!0;return!1}function Fe(R,C){for(var I=-1,W=R==null?0:R.length,re=Array(W);++I<W;)re[I]=C(R[I],I,R);return re}function yn(R,C){for(var I=-1,W=C.length,re=R.length;++I<W;)R[re+I]=C[I];return R}function Hs(R,C,I,W){var re=-1,Te=R==null?0:R.length;for(W&&Te&&(I=R[++re]);++re<Te;)I=C(I,R[re],re,R);return I}function Lh(R,C,I,W){var re=R==null?0:R.length;for(W&&re&&(I=R[--re]);re--;)I=C(I,R[re],re,R);return I}function Gs(R,C){for(var I=-1,W=R==null?0:R.length;++I<W;)if(C(R[I],I,R))return!0;return!1}var Ih=js("length");function Oh(R){return R.split("")}function Ch(R){return R.match(Uf)||[]}function cc(R,C,I){var W;return I(R,function(re,Te,Ke){if(C(re,Te,Ke))return W=Te,!1}),W}function Li(R,C,I,W){for(var re=R.length,Te=I+(W?1:-1);W?Te--:++Te<re;)if(C(R[Te],Te,R))return Te;return-1}function or(R,C,I){return C===C?zh(R,C,I):Li(R,uc,I)}function Mh(R,C,I,W){for(var re=I-1,Te=R.length;++re<Te;)if(W(R[re],C))return re;return-1}function uc(R){return R!==R}function lc(R,C){var I=R==null?0:R.length;return I?Ws(R,C)/I:Y}function js(R){return function(C){return C==null?n:C[R]}}function zs(R){return function(C){return R==null?n:R[C]}}function fc(R,C,I,W,re){return re(R,function(Te,Ke,Le){I=W?(W=!1,Te):C(I,Te,Ke,Le)}),I}function Ph(R,C){var I=R.length;for(R.sort(C);I--;)R[I]=R[I].value;return R}function Ws(R,C){for(var I,W=-1,re=R.length;++W<re;){var Te=C(R[W]);Te!==n&&(I=I===n?Te:I+Te)}return I}function Ks(R,C){for(var I=-1,W=Array(R);++I<R;)W[I]=C(I);return W}function Fh(R,C){return Fe(C,function(I){return[I,R[I]]})}function hc(R){return R&&R.slice(0,mc(R)+1).replace(mn,"")}function gt(R){return function(C){return R(C)}}function Vs(R,C){return Fe(C,function(I){return R[I]})}function Ur(R,C){return R.has(C)}function pc(R,C){for(var I=-1,W=R.length;++I<W&&or(C,R[I],0)>-1;);return I}function dc(R,C){for(var I=R.length;I--&&or(C,R[I],0)>-1;);return I}function Dh(R,C){for(var I=R.length,W=0;I--;)R[I]===C&&++W;return W}var Nh=zs(wh),Bh=zs(vh);function kh(R){return"\\"+Th[R]}function Uh(R,C){return R==null?n:R[C]}function ar(R){return gh.test(R)}function Hh(R){return mh.test(R)}function Gh(R){for(var C,I=[];!(C=R.next()).done;)I.push(C.value);return I}function Xs(R){var C=-1,I=Array(R.size);return R.forEach(function(W,re){I[++C]=[re,W]}),I}function gc(R,C){return function(I){return R(C(I))}}function wn(R,C){for(var I=-1,W=R.length,re=0,Te=[];++I<W;){var Ke=R[I];(Ke===C||Ke===m)&&(R[I]=m,Te[re++]=I)}return Te}function Ii(R){var C=-1,I=Array(R.size);return R.forEach(function(W){I[++C]=W}),I}function jh(R){var C=-1,I=Array(R.size);return R.forEach(function(W){I[++C]=[W,W]}),I}function zh(R,C,I){for(var W=I-1,re=R.length;++W<re;)if(R[W]===C)return W;return-1}function Wh(R,C,I){for(var W=I+1;W--;)if(R[W]===C)return W;return W}function cr(R){return ar(R)?Vh(R):Ih(R)}function kt(R){return ar(R)?Xh(R):Oh(R)}function mc(R){for(var C=R.length;C--&&Ei.test(R.charAt(C)););return C}var Kh=zs(Ah);function Vh(R){for(var C=Ns.lastIndex=0;Ns.test(R);)++C;return C}function Xh(R){return R.match(Ns)||[]}function qh(R){return R.match(dh)||[]}var Yh=function R(C){C=C==null?Ze:ur.defaults(Ze.Object(),C,ur.pick(Ze,_h));var I=C.Array,W=C.Date,re=C.Error,Te=C.Function,Ke=C.Math,Le=C.Object,qs=C.RegExp,$h=C.String,Tt=C.TypeError,Oi=I.prototype,Zh=Te.prototype,lr=Le.prototype,Ci=C["__core-js_shared__"],Mi=Zh.toString,Re=lr.hasOwnProperty,Jh=0,_c=function(){var e=/[^.]+$/.exec(Ci&&Ci.keys&&Ci.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Pi=lr.toString,Qh=Mi.call(Le),ep=Ze._,tp=qs("^"+Mi.call(Re).replace(pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fi=ec?C.Buffer:n,vn=C.Symbol,Di=C.Uint8Array,yc=Fi?Fi.allocUnsafe:n,Ni=gc(Le.getPrototypeOf,Le),wc=Le.create,vc=lr.propertyIsEnumerable,Bi=Oi.splice,Ac=vn?vn.isConcatSpreadable:n,Hr=vn?vn.iterator:n,Gn=vn?vn.toStringTag:n,ki=function(){try{var e=Vn(Le,"defineProperty");return e({},"",{}),e}catch{}}(),np=C.clearTimeout!==Ze.clearTimeout&&C.clearTimeout,rp=W&&W.now!==Ze.Date.now&&W.now,ip=C.setTimeout!==Ze.setTimeout&&C.setTimeout,Ui=Ke.ceil,Hi=Ke.floor,Ys=Le.getOwnPropertySymbols,sp=Fi?Fi.isBuffer:n,Tc=C.isFinite,op=Oi.join,ap=gc(Le.keys,Le),Ve=Ke.max,et=Ke.min,cp=W.now,up=C.parseInt,Ec=Ke.random,lp=Oi.reverse,$s=Vn(C,"DataView"),Gr=Vn(C,"Map"),Zs=Vn(C,"Promise"),fr=Vn(C,"Set"),jr=Vn(C,"WeakMap"),zr=Vn(Le,"create"),Gi=jr&&new jr,hr={},fp=Xn($s),hp=Xn(Gr),pp=Xn(Zs),dp=Xn(fr),gp=Xn(jr),ji=vn?vn.prototype:n,Wr=ji?ji.valueOf:n,xc=ji?ji.toString:n;function _(e){if(Be(e)&&!ie(e)&&!(e instanceof _e)){if(e instanceof Et)return e;if(Re.call(e,"__wrapped__"))return bu(e)}return new Et(e)}var pr=function(){function e(){}return function(r){if(!Ne(r))return{};if(wc)return wc(r);e.prototype=r;var c=new e;return e.prototype=n,c}}();function zi(){}function Et(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=n}_.templateSettings={escape:Pa,evaluate:Cs,interpolate:kr,variable:"",imports:{_}},_.prototype=zi.prototype,_.prototype.constructor=_,Et.prototype=pr(zi.prototype),Et.prototype.constructor=Et;function _e(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function mp(){var e=new _e(this.__wrapped__);return e.__actions__=ct(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ct(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ct(this.__views__),e}function _p(){if(this.__filtered__){var e=new _e(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function yp(){var e=this.__wrapped__.value(),r=this.__dir__,c=ie(e),f=r<0,g=c?e.length:0,y=Od(0,g,this.__views__),A=y.start,E=y.end,L=E-A,M=f?E:A-1,P=this.__iteratees__,N=P.length,G=0,q=et(L,this.__takeCount__);if(!c||!f&&g==L&&q==L)return qc(e,this.__actions__);var Q=[];e:for(;L--&&G<q;){M+=r;for(var ce=-1,ee=e[M];++ce<N;){var me=P[ce],we=me.iteratee,yt=me.type,it=we(ee);if(yt==xe)ee=it;else if(!it){if(yt==te)continue e;break e}}Q[G++]=ee}return Q}_e.prototype=pr(zi.prototype),_e.prototype.constructor=_e;function jn(e){var r=-1,c=e==null?0:e.length;for(this.clear();++r<c;){var f=e[r];this.set(f[0],f[1])}}function wp(){this.__data__=zr?zr(null):{},this.size=0}function vp(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}function Ap(e){var r=this.__data__;if(zr){var c=r[e];return c===h?n:c}return Re.call(r,e)?r[e]:n}function Tp(e){var r=this.__data__;return zr?r[e]!==n:Re.call(r,e)}function Ep(e,r){var c=this.__data__;return this.size+=this.has(e)?0:1,c[e]=zr&&r===n?h:r,this}jn.prototype.clear=wp,jn.prototype.delete=vp,jn.prototype.get=Ap,jn.prototype.has=Tp,jn.prototype.set=Ep;function nn(e){var r=-1,c=e==null?0:e.length;for(this.clear();++r<c;){var f=e[r];this.set(f[0],f[1])}}function xp(){this.__data__=[],this.size=0}function bp(e){var r=this.__data__,c=Wi(r,e);if(c<0)return!1;var f=r.length-1;return c==f?r.pop():Bi.call(r,c,1),--this.size,!0}function Rp(e){var r=this.__data__,c=Wi(r,e);return c<0?n:r[c][1]}function Sp(e){return Wi(this.__data__,e)>-1}function Lp(e,r){var c=this.__data__,f=Wi(c,e);return f<0?(++this.size,c.push([e,r])):c[f][1]=r,this}nn.prototype.clear=xp,nn.prototype.delete=bp,nn.prototype.get=Rp,nn.prototype.has=Sp,nn.prototype.set=Lp;function rn(e){var r=-1,c=e==null?0:e.length;for(this.clear();++r<c;){var f=e[r];this.set(f[0],f[1])}}function Ip(){this.size=0,this.__data__={hash:new jn,map:new(Gr||nn),string:new jn}}function Op(e){var r=ns(this,e).delete(e);return this.size-=r?1:0,r}function Cp(e){return ns(this,e).get(e)}function Mp(e){return ns(this,e).has(e)}function Pp(e,r){var c=ns(this,e),f=c.size;return c.set(e,r),this.size+=c.size==f?0:1,this}rn.prototype.clear=Ip,rn.prototype.delete=Op,rn.prototype.get=Cp,rn.prototype.has=Mp,rn.prototype.set=Pp;function zn(e){var r=-1,c=e==null?0:e.length;for(this.__data__=new rn;++r<c;)this.add(e[r])}function Fp(e){return this.__data__.set(e,h),this}function Dp(e){return this.__data__.has(e)}zn.prototype.add=zn.prototype.push=Fp,zn.prototype.has=Dp;function Ut(e){var r=this.__data__=new nn(e);this.size=r.size}function Np(){this.__data__=new nn,this.size=0}function Bp(e){var r=this.__data__,c=r.delete(e);return this.size=r.size,c}function kp(e){return this.__data__.get(e)}function Up(e){return this.__data__.has(e)}function Hp(e,r){var c=this.__data__;if(c instanceof nn){var f=c.__data__;if(!Gr||f.length<s-1)return f.push([e,r]),this.size=++c.size,this;c=this.__data__=new rn(f)}return c.set(e,r),this.size=c.size,this}Ut.prototype.clear=Np,Ut.prototype.delete=Bp,Ut.prototype.get=kp,Ut.prototype.has=Up,Ut.prototype.set=Hp;function bc(e,r){var c=ie(e),f=!c&&qn(e),g=!c&&!f&&bn(e),y=!c&&!f&&!g&&_r(e),A=c||f||g||y,E=A?Ks(e.length,$h):[],L=E.length;for(var M in e)(r||Re.call(e,M))&&!(A&&(M=="length"||g&&(M=="offset"||M=="parent")||y&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||cn(M,L)))&&E.push(M);return E}function Rc(e){var r=e.length;return r?e[co(0,r-1)]:n}function Gp(e,r){return rs(ct(e),Wn(r,0,e.length))}function jp(e){return rs(ct(e))}function Js(e,r,c){(c!==n&&!Ht(e[r],c)||c===n&&!(r in e))&&sn(e,r,c)}function Kr(e,r,c){var f=e[r];(!(Re.call(e,r)&&Ht(f,c))||c===n&&!(r in e))&&sn(e,r,c)}function Wi(e,r){for(var c=e.length;c--;)if(Ht(e[c][0],r))return c;return-1}function zp(e,r,c,f){return An(e,function(g,y,A){r(f,g,c(g),A)}),f}function Sc(e,r){return e&&qt(r,qe(r),e)}function Wp(e,r){return e&&qt(r,lt(r),e)}function sn(e,r,c){r=="__proto__"&&ki?ki(e,r,{configurable:!0,enumerable:!0,value:c,writable:!0}):e[r]=c}function Qs(e,r){for(var c=-1,f=r.length,g=I(f),y=e==null;++c<f;)g[c]=y?n:Fo(e,r[c]);return g}function Wn(e,r,c){return e===e&&(c!==n&&(e=e<=c?e:c),r!==n&&(e=e>=r?e:r)),e}function xt(e,r,c,f,g,y){var A,E=r&p,L=r&w,M=r&v;if(c&&(A=g?c(e,f,g,y):c(e)),A!==n)return A;if(!Ne(e))return e;var P=ie(e);if(P){if(A=Md(e),!E)return ct(e,A)}else{var N=tt(e),G=N==er||N==mi;if(bn(e))return Zc(e,E);if(N==Dt||N==Ge||G&&!g){if(A=L||G?{}:mu(e),!E)return L?Ad(e,Wp(A,e)):vd(e,Sc(A,e))}else{if(!Oe[N])return g?e:{};A=Pd(e,N,E)}}y||(y=new Ut);var q=y.get(e);if(q)return q;y.set(e,A),Ku(e)?e.forEach(function(ee){A.add(xt(ee,r,c,ee,e,y))}):zu(e)&&e.forEach(function(ee,me){A.set(me,xt(ee,r,c,me,e,y))});var Q=M?L?vo:wo:L?lt:qe,ce=P?n:Q(e);return At(ce||e,function(ee,me){ce&&(me=ee,ee=e[me]),Kr(A,me,xt(ee,r,c,me,e,y))}),A}function Kp(e){var r=qe(e);return function(c){return Lc(c,e,r)}}function Lc(e,r,c){var f=c.length;if(e==null)return!f;for(e=Le(e);f--;){var g=c[f],y=r[g],A=e[g];if(A===n&&!(g in e)||!y(A))return!1}return!0}function Ic(e,r,c){if(typeof e!="function")throw new Tt(u);return Jr(function(){e.apply(n,c)},r)}function Vr(e,r,c,f){var g=-1,y=Si,A=!0,E=e.length,L=[],M=r.length;if(!E)return L;c&&(r=Fe(r,gt(c))),f?(y=Us,A=!1):r.length>=s&&(y=Ur,A=!1,r=new zn(r));e:for(;++g<E;){var P=e[g],N=c==null?P:c(P);if(P=f||P!==0?P:0,A&&N===N){for(var G=M;G--;)if(r[G]===N)continue e;L.push(P)}else y(r,N,f)||L.push(P)}return L}var An=nu(Xt),Oc=nu(to,!0);function Vp(e,r){var c=!0;return An(e,function(f,g,y){return c=!!r(f,g,y),c}),c}function Ki(e,r,c){for(var f=-1,g=e.length;++f<g;){var y=e[f],A=r(y);if(A!=null&&(E===n?A===A&&!_t(A):c(A,E)))var E=A,L=y}return L}function Xp(e,r,c,f){var g=e.length;for(c=ae(c),c<0&&(c=-c>g?0:g+c),f=f===n||f>g?g:ae(f),f<0&&(f+=g),f=c>f?0:Xu(f);c<f;)e[c++]=r;return e}function Cc(e,r){var c=[];return An(e,function(f,g,y){r(f,g,y)&&c.push(f)}),c}function Je(e,r,c,f,g){var y=-1,A=e.length;for(c||(c=Dd),g||(g=[]);++y<A;){var E=e[y];r>0&&c(E)?r>1?Je(E,r-1,c,f,g):yn(g,E):f||(g[g.length]=E)}return g}var eo=ru(),Mc=ru(!0);function Xt(e,r){return e&&eo(e,r,qe)}function to(e,r){return e&&Mc(e,r,qe)}function Vi(e,r){return _n(r,function(c){return un(e[c])})}function Kn(e,r){r=En(r,e);for(var c=0,f=r.length;e!=null&&c<f;)e=e[Yt(r[c++])];return c&&c==f?e:n}function Pc(e,r,c){var f=r(e);return ie(e)?f:yn(f,c(e))}function nt(e){return e==null?e===n?vi:_i:Gn&&Gn in Le(e)?Id(e):jd(e)}function no(e,r){return e>r}function qp(e,r){return e!=null&&Re.call(e,r)}function Yp(e,r){return e!=null&&r in Le(e)}function $p(e,r,c){return e>=et(r,c)&&e<Ve(r,c)}function ro(e,r,c){for(var f=c?Us:Si,g=e[0].length,y=e.length,A=y,E=I(y),L=1/0,M=[];A--;){var P=e[A];A&&r&&(P=Fe(P,gt(r))),L=et(P.length,L),E[A]=!c&&(r||g>=120&&P.length>=120)?new zn(A&&P):n}P=e[0];var N=-1,G=E[0];e:for(;++N<g&&M.length<L;){var q=P[N],Q=r?r(q):q;if(q=c||q!==0?q:0,!(G?Ur(G,Q):f(M,Q,c))){for(A=y;--A;){var ce=E[A];if(!(ce?Ur(ce,Q):f(e[A],Q,c)))continue e}G&&G.push(Q),M.push(q)}}return M}function Zp(e,r,c,f){return Xt(e,function(g,y,A){r(f,c(g),y,A)}),f}function Xr(e,r,c){r=En(r,e),e=vu(e,r);var f=e==null?e:e[Yt(Rt(r))];return f==null?n:dt(f,e,c)}function Fc(e){return Be(e)&&nt(e)==Ge}function Jp(e){return Be(e)&&nt(e)==gn}function Qp(e){return Be(e)&&nt(e)==Ce}function qr(e,r,c,f,g){return e===r?!0:e==null||r==null||!Be(e)&&!Be(r)?e!==e&&r!==r:ed(e,r,c,f,qr,g)}function ed(e,r,c,f,g,y){var A=ie(e),E=ie(r),L=A?je:tt(e),M=E?je:tt(r);L=L==Ge?Dt:L,M=M==Ge?Dt:M;var P=L==Dt,N=M==Dt,G=L==M;if(G&&bn(e)){if(!bn(r))return!1;A=!0,P=!1}if(G&&!P)return y||(y=new Ut),A||_r(e)?pu(e,r,c,f,g,y):Sd(e,r,L,c,f,g,y);if(!(c&T)){var q=P&&Re.call(e,"__wrapped__"),Q=N&&Re.call(r,"__wrapped__");if(q||Q){var ce=q?e.value():e,ee=Q?r.value():r;return y||(y=new Ut),g(ce,ee,c,f,y)}}return G?(y||(y=new Ut),Ld(e,r,c,f,g,y)):!1}function td(e){return Be(e)&&tt(e)==ot}function io(e,r,c,f){var g=c.length,y=g,A=!f;if(e==null)return!y;for(e=Le(e);g--;){var E=c[g];if(A&&E[2]?E[1]!==e[E[0]]:!(E[0]in e))return!1}for(;++g<y;){E=c[g];var L=E[0],M=e[L],P=E[1];if(A&&E[2]){if(M===n&&!(L in e))return!1}else{var N=new Ut;if(f)var G=f(M,P,L,e,r,N);if(!(G===n?qr(P,M,T|b,f,N):G))return!1}}return!0}function Dc(e){if(!Ne(e)||Bd(e))return!1;var r=un(e)?tp:Kf;return r.test(Xn(e))}function nd(e){return Be(e)&&nt(e)==tn}function rd(e){return Be(e)&&tt(e)==$e}function id(e){return Be(e)&&us(e.length)&&!!Me[nt(e)]}function Nc(e){return typeof e=="function"?e:e==null?ft:typeof e=="object"?ie(e)?Uc(e[0],e[1]):kc(e):il(e)}function so(e){if(!Zr(e))return ap(e);var r=[];for(var c in Le(e))Re.call(e,c)&&c!="constructor"&&r.push(c);return r}function sd(e){if(!Ne(e))return Gd(e);var r=Zr(e),c=[];for(var f in e)f=="constructor"&&(r||!Re.call(e,f))||c.push(f);return c}function oo(e,r){return e<r}function Bc(e,r){var c=-1,f=ut(e)?I(e.length):[];return An(e,function(g,y,A){f[++c]=r(g,y,A)}),f}function kc(e){var r=To(e);return r.length==1&&r[0][2]?yu(r[0][0],r[0][1]):function(c){return c===e||io(c,e,r)}}function Uc(e,r){return xo(e)&&_u(r)?yu(Yt(e),r):function(c){var f=Fo(c,e);return f===n&&f===r?Do(c,e):qr(r,f,T|b)}}function Xi(e,r,c,f,g){e!==r&&eo(r,function(y,A){if(g||(g=new Ut),Ne(y))od(e,r,A,c,Xi,f,g);else{var E=f?f(Ro(e,A),y,A+"",e,r,g):n;E===n&&(E=y),Js(e,A,E)}},lt)}function od(e,r,c,f,g,y,A){var E=Ro(e,c),L=Ro(r,c),M=A.get(L);if(M){Js(e,c,M);return}var P=y?y(E,L,c+"",e,r,A):n,N=P===n;if(N){var G=ie(L),q=!G&&bn(L),Q=!G&&!q&&_r(L);P=L,G||q||Q?ie(E)?P=E:ke(E)?P=ct(E):q?(N=!1,P=Zc(L,!0)):Q?(N=!1,P=Jc(L,!0)):P=[]:Qr(L)||qn(L)?(P=E,qn(E)?P=qu(E):(!Ne(E)||un(E))&&(P=mu(L))):N=!1}N&&(A.set(L,P),g(P,L,f,y,A),A.delete(L)),Js(e,c,P)}function Hc(e,r){var c=e.length;if(c)return r+=r<0?c:0,cn(r,c)?e[r]:n}function Gc(e,r,c){r.length?r=Fe(r,function(y){return ie(y)?function(A){return Kn(A,y.length===1?y[0]:y)}:y}):r=[ft];var f=-1;r=Fe(r,gt(Z()));var g=Bc(e,function(y,A,E){var L=Fe(r,function(M){return M(y)});return{criteria:L,index:++f,value:y}});return Ph(g,function(y,A){return wd(y,A,c)})}function ad(e,r){return jc(e,r,function(c,f){return Do(e,f)})}function jc(e,r,c){for(var f=-1,g=r.length,y={};++f<g;){var A=r[f],E=Kn(e,A);c(E,A)&&Yr(y,En(A,e),E)}return y}function cd(e){return function(r){return Kn(r,e)}}function ao(e,r,c,f){var g=f?Mh:or,y=-1,A=r.length,E=e;for(e===r&&(r=ct(r)),c&&(E=Fe(e,gt(c)));++y<A;)for(var L=0,M=r[y],P=c?c(M):M;(L=g(E,P,L,f))>-1;)E!==e&&Bi.call(E,L,1),Bi.call(e,L,1);return e}function zc(e,r){for(var c=e?r.length:0,f=c-1;c--;){var g=r[c];if(c==f||g!==y){var y=g;cn(g)?Bi.call(e,g,1):fo(e,g)}}return e}function co(e,r){return e+Hi(Ec()*(r-e+1))}function ud(e,r,c,f){for(var g=-1,y=Ve(Ui((r-e)/(c||1)),0),A=I(y);y--;)A[f?y:++g]=e,e+=c;return A}function uo(e,r){var c="";if(!e||r<1||r>J)return c;do r%2&&(c+=e),r=Hi(r/2),r&&(e+=e);while(r);return c}function he(e,r){return So(wu(e,r,ft),e+"")}function ld(e){return Rc(yr(e))}function fd(e,r){var c=yr(e);return rs(c,Wn(r,0,c.length))}function Yr(e,r,c,f){if(!Ne(e))return e;r=En(r,e);for(var g=-1,y=r.length,A=y-1,E=e;E!=null&&++g<y;){var L=Yt(r[g]),M=c;if(L==="__proto__"||L==="constructor"||L==="prototype")return e;if(g!=A){var P=E[L];M=f?f(P,L,E):n,M===n&&(M=Ne(P)?P:cn(r[g+1])?[]:{})}Kr(E,L,M),E=E[L]}return e}var Wc=Gi?function(e,r){return Gi.set(e,r),e}:ft,hd=ki?function(e,r){return ki(e,"toString",{configurable:!0,enumerable:!1,value:Bo(r),writable:!0})}:ft;function pd(e){return rs(yr(e))}function bt(e,r,c){var f=-1,g=e.length;r<0&&(r=-r>g?0:g+r),c=c>g?g:c,c<0&&(c+=g),g=r>c?0:c-r>>>0,r>>>=0;for(var y=I(g);++f<g;)y[f]=e[f+r];return y}function dd(e,r){var c;return An(e,function(f,g,y){return c=r(f,g,y),!c}),!!c}function qi(e,r,c){var f=0,g=e==null?f:e.length;if(typeof r=="number"&&r===r&&g<=oe){for(;f<g;){var y=f+g>>>1,A=e[y];A!==null&&!_t(A)&&(c?A<=r:A<r)?f=y+1:g=y}return g}return lo(e,r,ft,c)}function lo(e,r,c,f){var g=0,y=e==null?0:e.length;if(y===0)return 0;r=c(r);for(var A=r!==r,E=r===null,L=_t(r),M=r===n;g<y;){var P=Hi((g+y)/2),N=c(e[P]),G=N!==n,q=N===null,Q=N===N,ce=_t(N);if(A)var ee=f||Q;else M?ee=Q&&(f||G):E?ee=Q&&G&&(f||!q):L?ee=Q&&G&&!q&&(f||!ce):q||ce?ee=!1:ee=f?N<=r:N<r;ee?g=P+1:y=P}return et(y,ve)}function Kc(e,r){for(var c=-1,f=e.length,g=0,y=[];++c<f;){var A=e[c],E=r?r(A):A;if(!c||!Ht(E,L)){var L=E;y[g++]=A===0?0:A}}return y}function Vc(e){return typeof e=="number"?e:_t(e)?Y:+e}function mt(e){if(typeof e=="string")return e;if(ie(e))return Fe(e,mt)+"";if(_t(e))return xc?xc.call(e):"";var r=e+"";return r=="0"&&1/e==-De?"-0":r}function Tn(e,r,c){var f=-1,g=Si,y=e.length,A=!0,E=[],L=E;if(c)A=!1,g=Us;else if(y>=s){var M=r?null:bd(e);if(M)return Ii(M);A=!1,g=Ur,L=new zn}else L=r?[]:E;e:for(;++f<y;){var P=e[f],N=r?r(P):P;if(P=c||P!==0?P:0,A&&N===N){for(var G=L.length;G--;)if(L[G]===N)continue e;r&&L.push(N),E.push(P)}else g(L,N,c)||(L!==E&&L.push(N),E.push(P))}return E}function fo(e,r){return r=En(r,e),e=vu(e,r),e==null||delete e[Yt(Rt(r))]}function Xc(e,r,c,f){return Yr(e,r,c(Kn(e,r)),f)}function Yi(e,r,c,f){for(var g=e.length,y=f?g:-1;(f?y--:++y<g)&&r(e[y],y,e););return c?bt(e,f?0:y,f?y+1:g):bt(e,f?y+1:0,f?g:y)}function qc(e,r){var c=e;return c instanceof _e&&(c=c.value()),Hs(r,function(f,g){return g.func.apply(g.thisArg,yn([f],g.args))},c)}function ho(e,r,c){var f=e.length;if(f<2)return f?Tn(e[0]):[];for(var g=-1,y=I(f);++g<f;)for(var A=e[g],E=-1;++E<f;)E!=g&&(y[g]=Vr(y[g]||A,e[E],r,c));return Tn(Je(y,1),r,c)}function Yc(e,r,c){for(var f=-1,g=e.length,y=r.length,A={};++f<g;){var E=f<y?r[f]:n;c(A,e[f],E)}return A}function po(e){return ke(e)?e:[]}function go(e){return typeof e=="function"?e:ft}function En(e,r){return ie(e)?e:xo(e,r)?[e]:xu(Ee(e))}var gd=he;function xn(e,r,c){var f=e.length;return c=c===n?f:c,!r&&c>=f?e:bt(e,r,c)}var $c=np||function(e){return Ze.clearTimeout(e)};function Zc(e,r){if(r)return e.slice();var c=e.length,f=yc?yc(c):new e.constructor(c);return e.copy(f),f}function mo(e){var r=new e.constructor(e.byteLength);return new Di(r).set(new Di(e)),r}function md(e,r){var c=r?mo(e.buffer):e.buffer;return new e.constructor(c,e.byteOffset,e.byteLength)}function _d(e){var r=new e.constructor(e.source,Fa.exec(e));return r.lastIndex=e.lastIndex,r}function yd(e){return Wr?Le(Wr.call(e)):{}}function Jc(e,r){var c=r?mo(e.buffer):e.buffer;return new e.constructor(c,e.byteOffset,e.length)}function Qc(e,r){if(e!==r){var c=e!==n,f=e===null,g=e===e,y=_t(e),A=r!==n,E=r===null,L=r===r,M=_t(r);if(!E&&!M&&!y&&e>r||y&&A&&L&&!E&&!M||f&&A&&L||!c&&L||!g)return 1;if(!f&&!y&&!M&&e<r||M&&c&&g&&!f&&!y||E&&c&&g||!A&&g||!L)return-1}return 0}function wd(e,r,c){for(var f=-1,g=e.criteria,y=r.criteria,A=g.length,E=c.length;++f<A;){var L=Qc(g[f],y[f]);if(L){if(f>=E)return L;var M=c[f];return L*(M=="desc"?-1:1)}}return e.index-r.index}function eu(e,r,c,f){for(var g=-1,y=e.length,A=c.length,E=-1,L=r.length,M=Ve(y-A,0),P=I(L+M),N=!f;++E<L;)P[E]=r[E];for(;++g<A;)(N||g<y)&&(P[c[g]]=e[g]);for(;M--;)P[E++]=e[g++];return P}function tu(e,r,c,f){for(var g=-1,y=e.length,A=-1,E=c.length,L=-1,M=r.length,P=Ve(y-E,0),N=I(P+M),G=!f;++g<P;)N[g]=e[g];for(var q=g;++L<M;)N[q+L]=r[L];for(;++A<E;)(G||g<y)&&(N[q+c[A]]=e[g++]);return N}function ct(e,r){var c=-1,f=e.length;for(r||(r=I(f));++c<f;)r[c]=e[c];return r}function qt(e,r,c,f){var g=!c;c||(c={});for(var y=-1,A=r.length;++y<A;){var E=r[y],L=f?f(c[E],e[E],E,c,e):n;L===n&&(L=e[E]),g?sn(c,E,L):Kr(c,E,L)}return c}function vd(e,r){return qt(e,Eo(e),r)}function Ad(e,r){return qt(e,du(e),r)}function $i(e,r){return function(c,f){var g=ie(c)?Rh:zp,y=r?r():{};return g(c,e,Z(f,2),y)}}function dr(e){return he(function(r,c){var f=-1,g=c.length,y=g>1?c[g-1]:n,A=g>2?c[2]:n;for(y=e.length>3&&typeof y=="function"?(g--,y):n,A&&rt(c[0],c[1],A)&&(y=g<3?n:y,g=1),r=Le(r);++f<g;){var E=c[f];E&&e(r,E,f,y)}return r})}function nu(e,r){return function(c,f){if(c==null)return c;if(!ut(c))return e(c,f);for(var g=c.length,y=r?g:-1,A=Le(c);(r?y--:++y<g)&&f(A[y],y,A)!==!1;);return c}}function ru(e){return function(r,c,f){for(var g=-1,y=Le(r),A=f(r),E=A.length;E--;){var L=A[e?E:++g];if(c(y[L],L,y)===!1)break}return r}}function Td(e,r,c){var f=r&S,g=$r(e);function y(){var A=this&&this!==Ze&&this instanceof y?g:e;return A.apply(f?c:this,arguments)}return y}function iu(e){return function(r){r=Ee(r);var c=ar(r)?kt(r):n,f=c?c[0]:r.charAt(0),g=c?xn(c,1).join(""):r.slice(1);return f[e]()+g}}function gr(e){return function(r){return Hs(nl(tl(r).replace(hh,"")),e,"")}}function $r(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var c=pr(e.prototype),f=e.apply(c,r);return Ne(f)?f:c}}function Ed(e,r,c){var f=$r(e);function g(){for(var y=arguments.length,A=I(y),E=y,L=mr(g);E--;)A[E]=arguments[E];var M=y<3&&A[0]!==L&&A[y-1]!==L?[]:wn(A,L);if(y-=M.length,y<c)return uu(e,r,Zi,g.placeholder,n,A,M,n,n,c-y);var P=this&&this!==Ze&&this instanceof g?f:e;return dt(P,this,A)}return g}function su(e){return function(r,c,f){var g=Le(r);if(!ut(r)){var y=Z(c,3);r=qe(r),c=function(E){return y(g[E],E,g)}}var A=e(r,c,f);return A>-1?g[y?r[A]:A]:n}}function ou(e){return an(function(r){var c=r.length,f=c,g=Et.prototype.thru;for(e&&r.reverse();f--;){var y=r[f];if(typeof y!="function")throw new Tt(u);if(g&&!A&&ts(y)=="wrapper")var A=new Et([],!0)}for(f=A?f:c;++f<c;){y=r[f];var E=ts(y),L=E=="wrapper"?Ao(y):n;L&&bo(L[0])&&L[1]==(H|B|$|U)&&!L[4].length&&L[9]==1?A=A[ts(L[0])].apply(A,L[3]):A=y.length==1&&bo(y)?A[E]():A.thru(y)}return function(){var M=arguments,P=M[0];if(A&&M.length==1&&ie(P))return A.plant(P).value();for(var N=0,G=c?r[N].apply(this,M):P;++N<c;)G=r[N].call(this,G);return G}})}function Zi(e,r,c,f,g,y,A,E,L,M){var P=r&H,N=r&S,G=r&O,q=r&(B|k),Q=r&X,ce=G?n:$r(e);function ee(){for(var me=arguments.length,we=I(me),yt=me;yt--;)we[yt]=arguments[yt];if(q)var it=mr(ee),wt=Dh(we,it);if(f&&(we=eu(we,f,g,q)),y&&(we=tu(we,y,A,q)),me-=wt,q&&me<M){var Ue=wn(we,it);return uu(e,r,Zi,ee.placeholder,c,we,Ue,E,L,M-me)}var Gt=N?c:this,fn=G?Gt[e]:e;return me=we.length,E?we=zd(we,E):Q&&me>1&&we.reverse(),P&&L<me&&(we.length=L),this&&this!==Ze&&this instanceof ee&&(fn=ce||$r(fn)),fn.apply(Gt,we)}return ee}function au(e,r){return function(c,f){return Zp(c,e,r(f),{})}}function Ji(e,r){return function(c,f){var g;if(c===n&&f===n)return r;if(c!==n&&(g=c),f!==n){if(g===n)return f;typeof c=="string"||typeof f=="string"?(c=mt(c),f=mt(f)):(c=Vc(c),f=Vc(f)),g=e(c,f)}return g}}function _o(e){return an(function(r){return r=Fe(r,gt(Z())),he(function(c){var f=this;return e(r,function(g){return dt(g,f,c)})})})}function Qi(e,r){r=r===n?" ":mt(r);var c=r.length;if(c<2)return c?uo(r,e):r;var f=uo(r,Ui(e/cr(r)));return ar(r)?xn(kt(f),0,e).join(""):f.slice(0,e)}function xd(e,r,c,f){var g=r&S,y=$r(e);function A(){for(var E=-1,L=arguments.length,M=-1,P=f.length,N=I(P+L),G=this&&this!==Ze&&this instanceof A?y:e;++M<P;)N[M]=f[M];for(;L--;)N[M++]=arguments[++E];return dt(G,g?c:this,N)}return A}function cu(e){return function(r,c,f){return f&&typeof f!="number"&&rt(r,c,f)&&(c=f=n),r=ln(r),c===n?(c=r,r=0):c=ln(c),f=f===n?r<c?1:-1:ln(f),ud(r,c,f,e)}}function es(e){return function(r,c){return typeof r=="string"&&typeof c=="string"||(r=St(r),c=St(c)),e(r,c)}}function uu(e,r,c,f,g,y,A,E,L,M){var P=r&B,N=P?A:n,G=P?n:A,q=P?y:n,Q=P?n:y;r|=P?$:j,r&=~(P?j:$),r&D||(r&=~(S|O));var ce=[e,r,g,q,N,Q,G,E,L,M],ee=c.apply(n,ce);return bo(e)&&Au(ee,ce),ee.placeholder=f,Tu(ee,e,r)}function yo(e){var r=Ke[e];return function(c,f){if(c=St(c),f=f==null?0:et(ae(f),292),f&&Tc(c)){var g=(Ee(c)+"e").split("e"),y=r(g[0]+"e"+(+g[1]+f));return g=(Ee(y)+"e").split("e"),+(g[0]+"e"+(+g[1]-f))}return r(c)}}var bd=fr&&1/Ii(new fr([,-0]))[1]==De?function(e){return new fr(e)}:Ho;function lu(e){return function(r){var c=tt(r);return c==ot?Xs(r):c==$e?jh(r):Fh(r,e(r))}}function on(e,r,c,f,g,y,A,E){var L=r&O;if(!L&&typeof e!="function")throw new Tt(u);var M=f?f.length:0;if(M||(r&=~($|j),f=g=n),A=A===n?A:Ve(ae(A),0),E=E===n?E:ae(E),M-=g?g.length:0,r&j){var P=f,N=g;f=g=n}var G=L?n:Ao(e),q=[e,r,c,f,g,P,N,y,A,E];if(G&&Hd(q,G),e=q[0],r=q[1],c=q[2],f=q[3],g=q[4],E=q[9]=q[9]===n?L?0:e.length:Ve(q[9]-M,0),!E&&r&(B|k)&&(r&=~(B|k)),!r||r==S)var Q=Td(e,r,c);else r==B||r==k?Q=Ed(e,r,E):(r==$||r==(S|$))&&!g.length?Q=xd(e,r,c,f):Q=Zi.apply(n,q);var ce=G?Wc:Au;return Tu(ce(Q,q),e,r)}function fu(e,r,c,f){return e===n||Ht(e,lr[c])&&!Re.call(f,c)?r:e}function hu(e,r,c,f,g,y){return Ne(e)&&Ne(r)&&(y.set(r,e),Xi(e,r,n,hu,y),y.delete(r)),e}function Rd(e){return Qr(e)?n:e}function pu(e,r,c,f,g,y){var A=c&T,E=e.length,L=r.length;if(E!=L&&!(A&&L>E))return!1;var M=y.get(e),P=y.get(r);if(M&&P)return M==r&&P==e;var N=-1,G=!0,q=c&b?new zn:n;for(y.set(e,r),y.set(r,e);++N<E;){var Q=e[N],ce=r[N];if(f)var ee=A?f(ce,Q,N,r,e,y):f(Q,ce,N,e,r,y);if(ee!==n){if(ee)continue;G=!1;break}if(q){if(!Gs(r,function(me,we){if(!Ur(q,we)&&(Q===me||g(Q,me,c,f,y)))return q.push(we)})){G=!1;break}}else if(!(Q===ce||g(Q,ce,c,f,y))){G=!1;break}}return y.delete(e),y.delete(r),G}function Sd(e,r,c,f,g,y,A){switch(c){case Wt:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case gn:return!(e.byteLength!=r.byteLength||!y(new Di(e),new Di(r)));case ht:case Ce:case dn:return Ht(+e,+r);case Dn:return e.name==r.name&&e.message==r.message;case tn:case Nn:return e==r+"";case ot:var E=Xs;case $e:var L=f&T;if(E||(E=Ii),e.size!=r.size&&!L)return!1;var M=A.get(e);if(M)return M==r;f|=b,A.set(e,r);var P=pu(E(e),E(r),f,g,y,A);return A.delete(e),P;case tr:if(Wr)return Wr.call(e)==Wr.call(r)}return!1}function Ld(e,r,c,f,g,y){var A=c&T,E=wo(e),L=E.length,M=wo(r),P=M.length;if(L!=P&&!A)return!1;for(var N=L;N--;){var G=E[N];if(!(A?G in r:Re.call(r,G)))return!1}var q=y.get(e),Q=y.get(r);if(q&&Q)return q==r&&Q==e;var ce=!0;y.set(e,r),y.set(r,e);for(var ee=A;++N<L;){G=E[N];var me=e[G],we=r[G];if(f)var yt=A?f(we,me,G,r,e,y):f(me,we,G,e,r,y);if(!(yt===n?me===we||g(me,we,c,f,y):yt)){ce=!1;break}ee||(ee=G=="constructor")}if(ce&&!ee){var it=e.constructor,wt=r.constructor;it!=wt&&"constructor"in e&&"constructor"in r&&!(typeof it=="function"&&it instanceof it&&typeof wt=="function"&&wt instanceof wt)&&(ce=!1)}return y.delete(e),y.delete(r),ce}function an(e){return So(wu(e,n,Lu),e+"")}function wo(e){return Pc(e,qe,Eo)}function vo(e){return Pc(e,lt,du)}var Ao=Gi?function(e){return Gi.get(e)}:Ho;function ts(e){for(var r=e.name+"",c=hr[r],f=Re.call(hr,r)?c.length:0;f--;){var g=c[f],y=g.func;if(y==null||y==e)return g.name}return r}function mr(e){var r=Re.call(_,"placeholder")?_:e;return r.placeholder}function Z(){var e=_.iteratee||ko;return e=e===ko?Nc:e,arguments.length?e(arguments[0],arguments[1]):e}function ns(e,r){var c=e.__data__;return Nd(r)?c[typeof r=="string"?"string":"hash"]:c.map}function To(e){for(var r=qe(e),c=r.length;c--;){var f=r[c],g=e[f];r[c]=[f,g,_u(g)]}return r}function Vn(e,r){var c=Uh(e,r);return Dc(c)?c:n}function Id(e){var r=Re.call(e,Gn),c=e[Gn];try{e[Gn]=n;var f=!0}catch{}var g=Pi.call(e);return f&&(r?e[Gn]=c:delete e[Gn]),g}var Eo=Ys?function(e){return e==null?[]:(e=Le(e),_n(Ys(e),function(r){return vc.call(e,r)}))}:Go,du=Ys?function(e){for(var r=[];e;)yn(r,Eo(e)),e=Ni(e);return r}:Go,tt=nt;($s&&tt(new $s(new ArrayBuffer(1)))!=Wt||Gr&&tt(new Gr)!=ot||Zs&&tt(Zs.resolve())!=yi||fr&&tt(new fr)!=$e||jr&&tt(new jr)!=Bn)&&(tt=function(e){var r=nt(e),c=r==Dt?e.constructor:n,f=c?Xn(c):"";if(f)switch(f){case fp:return Wt;case hp:return ot;case pp:return yi;case dp:return $e;case gp:return Bn}return r});function Od(e,r,c){for(var f=-1,g=c.length;++f<g;){var y=c[f],A=y.size;switch(y.type){case"drop":e+=A;break;case"dropRight":r-=A;break;case"take":r=et(r,e+A);break;case"takeRight":e=Ve(e,r-A);break}}return{start:e,end:r}}function Cd(e){var r=e.match(Bf);return r?r[1].split(kf):[]}function gu(e,r,c){r=En(r,e);for(var f=-1,g=r.length,y=!1;++f<g;){var A=Yt(r[f]);if(!(y=e!=null&&c(e,A)))break;e=e[A]}return y||++f!=g?y:(g=e==null?0:e.length,!!g&&us(g)&&cn(A,g)&&(ie(e)||qn(e)))}function Md(e){var r=e.length,c=new e.constructor(r);return r&&typeof e[0]=="string"&&Re.call(e,"index")&&(c.index=e.index,c.input=e.input),c}function mu(e){return typeof e.constructor=="function"&&!Zr(e)?pr(Ni(e)):{}}function Pd(e,r,c){var f=e.constructor;switch(r){case gn:return mo(e);case ht:case Ce:return new f(+e);case Wt:return md(e,c);case nr:case Fr:case rr:case Dr:case Nr:case Br:case ir:case Kt:case Ti:return Jc(e,c);case ot:return new f;case dn:case Nn:return new f(e);case tn:return _d(e);case $e:return new f;case tr:return yd(e)}}function Fd(e,r){var c=r.length;if(!c)return e;var f=c-1;return r[f]=(c>1?"& ":"")+r[f],r=r.join(c>2?", ":" "),e.replace(Nf,`{
/* [wrapped with `+r+`] */
`)}function Dd(e){return ie(e)||qn(e)||!!(Ac&&e&&e[Ac])}function cn(e,r){var c=typeof e;return r=r??J,!!r&&(c=="number"||c!="symbol"&&Xf.test(e))&&e>-1&&e%1==0&&e<r}function rt(e,r,c){if(!Ne(c))return!1;var f=typeof r;return(f=="number"?ut(c)&&cn(r,c.length):f=="string"&&r in c)?Ht(c[r],e):!1}function xo(e,r){if(ie(e))return!1;var c=typeof e;return c=="number"||c=="symbol"||c=="boolean"||e==null||_t(e)?!0:Bt.test(e)||!Nt.test(e)||r!=null&&e in Le(r)}function Nd(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function bo(e){var r=ts(e),c=_[r];if(typeof c!="function"||!(r in _e.prototype))return!1;if(e===c)return!0;var f=Ao(c);return!!f&&e===f[0]}function Bd(e){return!!_c&&_c in e}var kd=Ci?un:jo;function Zr(e){var r=e&&e.constructor,c=typeof r=="function"&&r.prototype||lr;return e===c}function _u(e){return e===e&&!Ne(e)}function yu(e,r){return function(c){return c==null?!1:c[e]===r&&(r!==n||e in Le(c))}}function Ud(e){var r=as(e,function(f){return c.size===d&&c.clear(),f}),c=r.cache;return r}function Hd(e,r){var c=e[1],f=r[1],g=c|f,y=g<(S|O|H),A=f==H&&c==B||f==H&&c==U&&e[7].length<=r[8]||f==(H|U)&&r[7].length<=r[8]&&c==B;if(!(y||A))return e;f&S&&(e[2]=r[2],g|=c&S?0:D);var E=r[3];if(E){var L=e[3];e[3]=L?eu(L,E,r[4]):E,e[4]=L?wn(e[3],m):r[4]}return E=r[5],E&&(L=e[5],e[5]=L?tu(L,E,r[6]):E,e[6]=L?wn(e[5],m):r[6]),E=r[7],E&&(e[7]=E),f&H&&(e[8]=e[8]==null?r[8]:et(e[8],r[8])),e[9]==null&&(e[9]=r[9]),e[0]=r[0],e[1]=g,e}function Gd(e){var r=[];if(e!=null)for(var c in Le(e))r.push(c);return r}function jd(e){return Pi.call(e)}function wu(e,r,c){return r=Ve(r===n?e.length-1:r,0),function(){for(var f=arguments,g=-1,y=Ve(f.length-r,0),A=I(y);++g<y;)A[g]=f[r+g];g=-1;for(var E=I(r+1);++g<r;)E[g]=f[g];return E[r]=c(A),dt(e,this,E)}}function vu(e,r){return r.length<2?e:Kn(e,bt(r,0,-1))}function zd(e,r){for(var c=e.length,f=et(r.length,c),g=ct(e);f--;){var y=r[f];e[f]=cn(y,c)?g[y]:n}return e}function Ro(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}var Au=Eu(Wc),Jr=ip||function(e,r){return Ze.setTimeout(e,r)},So=Eu(hd);function Tu(e,r,c){var f=r+"";return So(e,Fd(f,Wd(Cd(f),c)))}function Eu(e){var r=0,c=0;return function(){var f=cp(),g=se-(f-c);if(c=f,g>0){if(++r>=le)return arguments[0]}else r=0;return e.apply(n,arguments)}}function rs(e,r){var c=-1,f=e.length,g=f-1;for(r=r===n?f:r;++c<r;){var y=co(c,g),A=e[y];e[y]=e[c],e[c]=A}return e.length=r,e}var xu=Ud(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(kn,function(c,f,g,y){r.push(g?y.replace(Gf,"$1"):f||c)}),r});function Yt(e){if(typeof e=="string"||_t(e))return e;var r=e+"";return r=="0"&&1/e==-De?"-0":r}function Xn(e){if(e!=null){try{return Mi.call(e)}catch{}try{return e+""}catch{}}return""}function Wd(e,r){return At(Se,function(c){var f="_."+c[0];r&c[1]&&!Si(e,f)&&e.push(f)}),e.sort()}function bu(e){if(e instanceof _e)return e.clone();var r=new Et(e.__wrapped__,e.__chain__);return r.__actions__=ct(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}function Kd(e,r,c){(c?rt(e,r,c):r===n)?r=1:r=Ve(ae(r),0);var f=e==null?0:e.length;if(!f||r<1)return[];for(var g=0,y=0,A=I(Ui(f/r));g<f;)A[y++]=bt(e,g,g+=r);return A}function Vd(e){for(var r=-1,c=e==null?0:e.length,f=0,g=[];++r<c;){var y=e[r];y&&(g[f++]=y)}return g}function Xd(){var e=arguments.length;if(!e)return[];for(var r=I(e-1),c=arguments[0],f=e;f--;)r[f-1]=arguments[f];return yn(ie(c)?ct(c):[c],Je(r,1))}var qd=he(function(e,r){return ke(e)?Vr(e,Je(r,1,ke,!0)):[]}),Yd=he(function(e,r){var c=Rt(r);return ke(c)&&(c=n),ke(e)?Vr(e,Je(r,1,ke,!0),Z(c,2)):[]}),$d=he(function(e,r){var c=Rt(r);return ke(c)&&(c=n),ke(e)?Vr(e,Je(r,1,ke,!0),n,c):[]});function Zd(e,r,c){var f=e==null?0:e.length;return f?(r=c||r===n?1:ae(r),bt(e,r<0?0:r,f)):[]}function Jd(e,r,c){var f=e==null?0:e.length;return f?(r=c||r===n?1:ae(r),r=f-r,bt(e,0,r<0?0:r)):[]}function Qd(e,r){return e&&e.length?Yi(e,Z(r,3),!0,!0):[]}function eg(e,r){return e&&e.length?Yi(e,Z(r,3),!0):[]}function tg(e,r,c,f){var g=e==null?0:e.length;return g?(c&&typeof c!="number"&&rt(e,r,c)&&(c=0,f=g),Xp(e,r,c,f)):[]}function Ru(e,r,c){var f=e==null?0:e.length;if(!f)return-1;var g=c==null?0:ae(c);return g<0&&(g=Ve(f+g,0)),Li(e,Z(r,3),g)}function Su(e,r,c){var f=e==null?0:e.length;if(!f)return-1;var g=f-1;return c!==n&&(g=ae(c),g=c<0?Ve(f+g,0):et(g,f-1)),Li(e,Z(r,3),g,!0)}function Lu(e){var r=e==null?0:e.length;return r?Je(e,1):[]}function ng(e){var r=e==null?0:e.length;return r?Je(e,De):[]}function rg(e,r){var c=e==null?0:e.length;return c?(r=r===n?1:ae(r),Je(e,r)):[]}function ig(e){for(var r=-1,c=e==null?0:e.length,f={};++r<c;){var g=e[r];f[g[0]]=g[1]}return f}function Iu(e){return e&&e.length?e[0]:n}function sg(e,r,c){var f=e==null?0:e.length;if(!f)return-1;var g=c==null?0:ae(c);return g<0&&(g=Ve(f+g,0)),or(e,r,g)}function og(e){var r=e==null?0:e.length;return r?bt(e,0,-1):[]}var ag=he(function(e){var r=Fe(e,po);return r.length&&r[0]===e[0]?ro(r):[]}),cg=he(function(e){var r=Rt(e),c=Fe(e,po);return r===Rt(c)?r=n:c.pop(),c.length&&c[0]===e[0]?ro(c,Z(r,2)):[]}),ug=he(function(e){var r=Rt(e),c=Fe(e,po);return r=typeof r=="function"?r:n,r&&c.pop(),c.length&&c[0]===e[0]?ro(c,n,r):[]});function lg(e,r){return e==null?"":op.call(e,r)}function Rt(e){var r=e==null?0:e.length;return r?e[r-1]:n}function fg(e,r,c){var f=e==null?0:e.length;if(!f)return-1;var g=f;return c!==n&&(g=ae(c),g=g<0?Ve(f+g,0):et(g,f-1)),r===r?Wh(e,r,g):Li(e,uc,g,!0)}function hg(e,r){return e&&e.length?Hc(e,ae(r)):n}var pg=he(Ou);function Ou(e,r){return e&&e.length&&r&&r.length?ao(e,r):e}function dg(e,r,c){return e&&e.length&&r&&r.length?ao(e,r,Z(c,2)):e}function gg(e,r,c){return e&&e.length&&r&&r.length?ao(e,r,n,c):e}var mg=an(function(e,r){var c=e==null?0:e.length,f=Qs(e,r);return zc(e,Fe(r,function(g){return cn(g,c)?+g:g}).sort(Qc)),f});function _g(e,r){var c=[];if(!(e&&e.length))return c;var f=-1,g=[],y=e.length;for(r=Z(r,3);++f<y;){var A=e[f];r(A,f,e)&&(c.push(A),g.push(f))}return zc(e,g),c}function Lo(e){return e==null?e:lp.call(e)}function yg(e,r,c){var f=e==null?0:e.length;return f?(c&&typeof c!="number"&&rt(e,r,c)?(r=0,c=f):(r=r==null?0:ae(r),c=c===n?f:ae(c)),bt(e,r,c)):[]}function wg(e,r){return qi(e,r)}function vg(e,r,c){return lo(e,r,Z(c,2))}function Ag(e,r){var c=e==null?0:e.length;if(c){var f=qi(e,r);if(f<c&&Ht(e[f],r))return f}return-1}function Tg(e,r){return qi(e,r,!0)}function Eg(e,r,c){return lo(e,r,Z(c,2),!0)}function xg(e,r){var c=e==null?0:e.length;if(c){var f=qi(e,r,!0)-1;if(Ht(e[f],r))return f}return-1}function bg(e){return e&&e.length?Kc(e):[]}function Rg(e,r){return e&&e.length?Kc(e,Z(r,2)):[]}function Sg(e){var r=e==null?0:e.length;return r?bt(e,1,r):[]}function Lg(e,r,c){return e&&e.length?(r=c||r===n?1:ae(r),bt(e,0,r<0?0:r)):[]}function Ig(e,r,c){var f=e==null?0:e.length;return f?(r=c||r===n?1:ae(r),r=f-r,bt(e,r<0?0:r,f)):[]}function Og(e,r){return e&&e.length?Yi(e,Z(r,3),!1,!0):[]}function Cg(e,r){return e&&e.length?Yi(e,Z(r,3)):[]}var Mg=he(function(e){return Tn(Je(e,1,ke,!0))}),Pg=he(function(e){var r=Rt(e);return ke(r)&&(r=n),Tn(Je(e,1,ke,!0),Z(r,2))}),Fg=he(function(e){var r=Rt(e);return r=typeof r=="function"?r:n,Tn(Je(e,1,ke,!0),n,r)});function Dg(e){return e&&e.length?Tn(e):[]}function Ng(e,r){return e&&e.length?Tn(e,Z(r,2)):[]}function Bg(e,r){return r=typeof r=="function"?r:n,e&&e.length?Tn(e,n,r):[]}function Io(e){if(!(e&&e.length))return[];var r=0;return e=_n(e,function(c){if(ke(c))return r=Ve(c.length,r),!0}),Ks(r,function(c){return Fe(e,js(c))})}function Cu(e,r){if(!(e&&e.length))return[];var c=Io(e);return r==null?c:Fe(c,function(f){return dt(r,n,f)})}var kg=he(function(e,r){return ke(e)?Vr(e,r):[]}),Ug=he(function(e){return ho(_n(e,ke))}),Hg=he(function(e){var r=Rt(e);return ke(r)&&(r=n),ho(_n(e,ke),Z(r,2))}),Gg=he(function(e){var r=Rt(e);return r=typeof r=="function"?r:n,ho(_n(e,ke),n,r)}),jg=he(Io);function zg(e,r){return Yc(e||[],r||[],Kr)}function Wg(e,r){return Yc(e||[],r||[],Yr)}var Kg=he(function(e){var r=e.length,c=r>1?e[r-1]:n;return c=typeof c=="function"?(e.pop(),c):n,Cu(e,c)});function Mu(e){var r=_(e);return r.__chain__=!0,r}function Vg(e,r){return r(e),e}function is(e,r){return r(e)}var Xg=an(function(e){var r=e.length,c=r?e[0]:0,f=this.__wrapped__,g=function(y){return Qs(y,e)};return r>1||this.__actions__.length||!(f instanceof _e)||!cn(c)?this.thru(g):(f=f.slice(c,+c+(r?1:0)),f.__actions__.push({func:is,args:[g],thisArg:n}),new Et(f,this.__chain__).thru(function(y){return r&&!y.length&&y.push(n),y}))});function qg(){return Mu(this)}function Yg(){return new Et(this.value(),this.__chain__)}function $g(){this.__values__===n&&(this.__values__=Vu(this.value()));var e=this.__index__>=this.__values__.length,r=e?n:this.__values__[this.__index__++];return{done:e,value:r}}function Zg(){return this}function Jg(e){for(var r,c=this;c instanceof zi;){var f=bu(c);f.__index__=0,f.__values__=n,r?g.__wrapped__=f:r=f;var g=f;c=c.__wrapped__}return g.__wrapped__=e,r}function Qg(){var e=this.__wrapped__;if(e instanceof _e){var r=e;return this.__actions__.length&&(r=new _e(this)),r=r.reverse(),r.__actions__.push({func:is,args:[Lo],thisArg:n}),new Et(r,this.__chain__)}return this.thru(Lo)}function em(){return qc(this.__wrapped__,this.__actions__)}var tm=$i(function(e,r,c){Re.call(e,c)?++e[c]:sn(e,c,1)});function nm(e,r,c){var f=ie(e)?ac:Vp;return c&&rt(e,r,c)&&(r=n),f(e,Z(r,3))}function rm(e,r){var c=ie(e)?_n:Cc;return c(e,Z(r,3))}var im=su(Ru),sm=su(Su);function om(e,r){return Je(ss(e,r),1)}function am(e,r){return Je(ss(e,r),De)}function cm(e,r,c){return c=c===n?1:ae(c),Je(ss(e,r),c)}function Pu(e,r){var c=ie(e)?At:An;return c(e,Z(r,3))}function Fu(e,r){var c=ie(e)?Sh:Oc;return c(e,Z(r,3))}var um=$i(function(e,r,c){Re.call(e,c)?e[c].push(r):sn(e,c,[r])});function lm(e,r,c,f){e=ut(e)?e:yr(e),c=c&&!f?ae(c):0;var g=e.length;return c<0&&(c=Ve(g+c,0)),ls(e)?c<=g&&e.indexOf(r,c)>-1:!!g&&or(e,r,c)>-1}var fm=he(function(e,r,c){var f=-1,g=typeof r=="function",y=ut(e)?I(e.length):[];return An(e,function(A){y[++f]=g?dt(r,A,c):Xr(A,r,c)}),y}),hm=$i(function(e,r,c){sn(e,c,r)});function ss(e,r){var c=ie(e)?Fe:Bc;return c(e,Z(r,3))}function pm(e,r,c,f){return e==null?[]:(ie(r)||(r=r==null?[]:[r]),c=f?n:c,ie(c)||(c=c==null?[]:[c]),Gc(e,r,c))}var dm=$i(function(e,r,c){e[c?0:1].push(r)},function(){return[[],[]]});function gm(e,r,c){var f=ie(e)?Hs:fc,g=arguments.length<3;return f(e,Z(r,4),c,g,An)}function mm(e,r,c){var f=ie(e)?Lh:fc,g=arguments.length<3;return f(e,Z(r,4),c,g,Oc)}function _m(e,r){var c=ie(e)?_n:Cc;return c(e,cs(Z(r,3)))}function ym(e){var r=ie(e)?Rc:ld;return r(e)}function wm(e,r,c){(c?rt(e,r,c):r===n)?r=1:r=ae(r);var f=ie(e)?Gp:fd;return f(e,r)}function vm(e){var r=ie(e)?jp:pd;return r(e)}function Am(e){if(e==null)return 0;if(ut(e))return ls(e)?cr(e):e.length;var r=tt(e);return r==ot||r==$e?e.size:so(e).length}function Tm(e,r,c){var f=ie(e)?Gs:dd;return c&&rt(e,r,c)&&(r=n),f(e,Z(r,3))}var Em=he(function(e,r){if(e==null)return[];var c=r.length;return c>1&&rt(e,r[0],r[1])?r=[]:c>2&&rt(r[0],r[1],r[2])&&(r=[r[0]]),Gc(e,Je(r,1),[])}),os=rp||function(){return Ze.Date.now()};function xm(e,r){if(typeof r!="function")throw new Tt(u);return e=ae(e),function(){if(--e<1)return r.apply(this,arguments)}}function Du(e,r,c){return r=c?n:r,r=e&&r==null?e.length:r,on(e,H,n,n,n,n,r)}function Nu(e,r){var c;if(typeof r!="function")throw new Tt(u);return e=ae(e),function(){return--e>0&&(c=r.apply(this,arguments)),e<=1&&(r=n),c}}var Oo=he(function(e,r,c){var f=S;if(c.length){var g=wn(c,mr(Oo));f|=$}return on(e,f,r,c,g)}),Bu=he(function(e,r,c){var f=S|O;if(c.length){var g=wn(c,mr(Bu));f|=$}return on(r,f,e,c,g)});function ku(e,r,c){r=c?n:r;var f=on(e,B,n,n,n,n,n,r);return f.placeholder=ku.placeholder,f}function Uu(e,r,c){r=c?n:r;var f=on(e,k,n,n,n,n,n,r);return f.placeholder=Uu.placeholder,f}function Hu(e,r,c){var f,g,y,A,E,L,M=0,P=!1,N=!1,G=!0;if(typeof e!="function")throw new Tt(u);r=St(r)||0,Ne(c)&&(P=!!c.leading,N="maxWait"in c,y=N?Ve(St(c.maxWait)||0,r):y,G="trailing"in c?!!c.trailing:G);function q(Ue){var Gt=f,fn=g;return f=g=n,M=Ue,A=e.apply(fn,Gt),A}function Q(Ue){return M=Ue,E=Jr(me,r),P?q(Ue):A}function ce(Ue){var Gt=Ue-L,fn=Ue-M,sl=r-Gt;return N?et(sl,y-fn):sl}function ee(Ue){var Gt=Ue-L,fn=Ue-M;return L===n||Gt>=r||Gt<0||N&&fn>=y}function me(){var Ue=os();if(ee(Ue))return we(Ue);E=Jr(me,ce(Ue))}function we(Ue){return E=n,G&&f?q(Ue):(f=g=n,A)}function yt(){E!==n&&$c(E),M=0,f=L=g=E=n}function it(){return E===n?A:we(os())}function wt(){var Ue=os(),Gt=ee(Ue);if(f=arguments,g=this,L=Ue,Gt){if(E===n)return Q(L);if(N)return $c(E),E=Jr(me,r),q(L)}return E===n&&(E=Jr(me,r)),A}return wt.cancel=yt,wt.flush=it,wt}var bm=he(function(e,r){return Ic(e,1,r)}),Rm=he(function(e,r,c){return Ic(e,St(r)||0,c)});function Sm(e){return on(e,X)}function as(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new Tt(u);var c=function(){var f=arguments,g=r?r.apply(this,f):f[0],y=c.cache;if(y.has(g))return y.get(g);var A=e.apply(this,f);return c.cache=y.set(g,A)||y,A};return c.cache=new(as.Cache||rn),c}as.Cache=rn;function cs(e){if(typeof e!="function")throw new Tt(u);return function(){var r=arguments;switch(r.length){case 0:return!e.call(this);case 1:return!e.call(this,r[0]);case 2:return!e.call(this,r[0],r[1]);case 3:return!e.call(this,r[0],r[1],r[2])}return!e.apply(this,r)}}function Lm(e){return Nu(2,e)}var Im=gd(function(e,r){r=r.length==1&&ie(r[0])?Fe(r[0],gt(Z())):Fe(Je(r,1),gt(Z()));var c=r.length;return he(function(f){for(var g=-1,y=et(f.length,c);++g<y;)f[g]=r[g].call(this,f[g]);return dt(e,this,f)})}),Co=he(function(e,r){var c=wn(r,mr(Co));return on(e,$,n,r,c)}),Gu=he(function(e,r){var c=wn(r,mr(Gu));return on(e,j,n,r,c)}),Om=an(function(e,r){return on(e,U,n,n,n,r)});function Cm(e,r){if(typeof e!="function")throw new Tt(u);return r=r===n?r:ae(r),he(e,r)}function Mm(e,r){if(typeof e!="function")throw new Tt(u);return r=r==null?0:Ve(ae(r),0),he(function(c){var f=c[r],g=xn(c,0,r);return f&&yn(g,f),dt(e,this,g)})}function Pm(e,r,c){var f=!0,g=!0;if(typeof e!="function")throw new Tt(u);return Ne(c)&&(f="leading"in c?!!c.leading:f,g="trailing"in c?!!c.trailing:g),Hu(e,r,{leading:f,maxWait:r,trailing:g})}function Fm(e){return Du(e,1)}function Dm(e,r){return Co(go(r),e)}function Nm(){if(!arguments.length)return[];var e=arguments[0];return ie(e)?e:[e]}function Bm(e){return xt(e,v)}function km(e,r){return r=typeof r=="function"?r:n,xt(e,v,r)}function Um(e){return xt(e,p|v)}function Hm(e,r){return r=typeof r=="function"?r:n,xt(e,p|v,r)}function Gm(e,r){return r==null||Lc(e,r,qe(r))}function Ht(e,r){return e===r||e!==e&&r!==r}var jm=es(no),zm=es(function(e,r){return e>=r}),qn=Fc(function(){return arguments}())?Fc:function(e){return Be(e)&&Re.call(e,"callee")&&!vc.call(e,"callee")},ie=I.isArray,Wm=tc?gt(tc):Jp;function ut(e){return e!=null&&us(e.length)&&!un(e)}function ke(e){return Be(e)&&ut(e)}function Km(e){return e===!0||e===!1||Be(e)&&nt(e)==ht}var bn=sp||jo,Vm=nc?gt(nc):Qp;function Xm(e){return Be(e)&&e.nodeType===1&&!Qr(e)}function qm(e){if(e==null)return!0;if(ut(e)&&(ie(e)||typeof e=="string"||typeof e.splice=="function"||bn(e)||_r(e)||qn(e)))return!e.length;var r=tt(e);if(r==ot||r==$e)return!e.size;if(Zr(e))return!so(e).length;for(var c in e)if(Re.call(e,c))return!1;return!0}function Ym(e,r){return qr(e,r)}function $m(e,r,c){c=typeof c=="function"?c:n;var f=c?c(e,r):n;return f===n?qr(e,r,n,c):!!f}function Mo(e){if(!Be(e))return!1;var r=nt(e);return r==Dn||r==Qn||typeof e.message=="string"&&typeof e.name=="string"&&!Qr(e)}function Zm(e){return typeof e=="number"&&Tc(e)}function un(e){if(!Ne(e))return!1;var r=nt(e);return r==er||r==mi||r==en||r==wi}function ju(e){return typeof e=="number"&&e==ae(e)}function us(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=J}function Ne(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function Be(e){return e!=null&&typeof e=="object"}var zu=rc?gt(rc):td;function Jm(e,r){return e===r||io(e,r,To(r))}function Qm(e,r,c){return c=typeof c=="function"?c:n,io(e,r,To(r),c)}function e0(e){return Wu(e)&&e!=+e}function t0(e){if(kd(e))throw new re(o);return Dc(e)}function n0(e){return e===null}function r0(e){return e==null}function Wu(e){return typeof e=="number"||Be(e)&&nt(e)==dn}function Qr(e){if(!Be(e)||nt(e)!=Dt)return!1;var r=Ni(e);if(r===null)return!0;var c=Re.call(r,"constructor")&&r.constructor;return typeof c=="function"&&c instanceof c&&Mi.call(c)==Qh}var Po=ic?gt(ic):nd;function i0(e){return ju(e)&&e>=-J&&e<=J}var Ku=sc?gt(sc):rd;function ls(e){return typeof e=="string"||!ie(e)&&Be(e)&&nt(e)==Nn}function _t(e){return typeof e=="symbol"||Be(e)&&nt(e)==tr}var _r=oc?gt(oc):id;function s0(e){return e===n}function o0(e){return Be(e)&&tt(e)==Bn}function a0(e){return Be(e)&&nt(e)==Ai}var c0=es(oo),u0=es(function(e,r){return e<=r});function Vu(e){if(!e)return[];if(ut(e))return ls(e)?kt(e):ct(e);if(Hr&&e[Hr])return Gh(e[Hr]());var r=tt(e),c=r==ot?Xs:r==$e?Ii:yr;return c(e)}function ln(e){if(!e)return e===0?e:0;if(e=St(e),e===De||e===-De){var r=e<0?-1:1;return r*K}return e===e?e:0}function ae(e){var r=ln(e),c=r%1;return r===r?c?r-c:r:0}function Xu(e){return e?Wn(ae(e),0,fe):0}function St(e){if(typeof e=="number")return e;if(_t(e))return Y;if(Ne(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Ne(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=hc(e);var c=Wf.test(e);return c||Vf.test(e)?xh(e.slice(2),c?2:8):zf.test(e)?Y:+e}function qu(e){return qt(e,lt(e))}function l0(e){return e?Wn(ae(e),-J,J):e===0?e:0}function Ee(e){return e==null?"":mt(e)}var f0=dr(function(e,r){if(Zr(r)||ut(r)){qt(r,qe(r),e);return}for(var c in r)Re.call(r,c)&&Kr(e,c,r[c])}),Yu=dr(function(e,r){qt(r,lt(r),e)}),fs=dr(function(e,r,c,f){qt(r,lt(r),e,f)}),h0=dr(function(e,r,c,f){qt(r,qe(r),e,f)}),p0=an(Qs);function d0(e,r){var c=pr(e);return r==null?c:Sc(c,r)}var g0=he(function(e,r){e=Le(e);var c=-1,f=r.length,g=f>2?r[2]:n;for(g&&rt(r[0],r[1],g)&&(f=1);++c<f;)for(var y=r[c],A=lt(y),E=-1,L=A.length;++E<L;){var M=A[E],P=e[M];(P===n||Ht(P,lr[M])&&!Re.call(e,M))&&(e[M]=y[M])}return e}),m0=he(function(e){return e.push(n,hu),dt($u,n,e)});function _0(e,r){return cc(e,Z(r,3),Xt)}function y0(e,r){return cc(e,Z(r,3),to)}function w0(e,r){return e==null?e:eo(e,Z(r,3),lt)}function v0(e,r){return e==null?e:Mc(e,Z(r,3),lt)}function A0(e,r){return e&&Xt(e,Z(r,3))}function T0(e,r){return e&&to(e,Z(r,3))}function E0(e){return e==null?[]:Vi(e,qe(e))}function x0(e){return e==null?[]:Vi(e,lt(e))}function Fo(e,r,c){var f=e==null?n:Kn(e,r);return f===n?c:f}function b0(e,r){return e!=null&&gu(e,r,qp)}function Do(e,r){return e!=null&&gu(e,r,Yp)}var R0=au(function(e,r,c){r!=null&&typeof r.toString!="function"&&(r=Pi.call(r)),e[r]=c},Bo(ft)),S0=au(function(e,r,c){r!=null&&typeof r.toString!="function"&&(r=Pi.call(r)),Re.call(e,r)?e[r].push(c):e[r]=[c]},Z),L0=he(Xr);function qe(e){return ut(e)?bc(e):so(e)}function lt(e){return ut(e)?bc(e,!0):sd(e)}function I0(e,r){var c={};return r=Z(r,3),Xt(e,function(f,g,y){sn(c,r(f,g,y),f)}),c}function O0(e,r){var c={};return r=Z(r,3),Xt(e,function(f,g,y){sn(c,g,r(f,g,y))}),c}var C0=dr(function(e,r,c){Xi(e,r,c)}),$u=dr(function(e,r,c,f){Xi(e,r,c,f)}),M0=an(function(e,r){var c={};if(e==null)return c;var f=!1;r=Fe(r,function(y){return y=En(y,e),f||(f=y.length>1),y}),qt(e,vo(e),c),f&&(c=xt(c,p|w|v,Rd));for(var g=r.length;g--;)fo(c,r[g]);return c});function P0(e,r){return Zu(e,cs(Z(r)))}var F0=an(function(e,r){return e==null?{}:ad(e,r)});function Zu(e,r){if(e==null)return{};var c=Fe(vo(e),function(f){return[f]});return r=Z(r),jc(e,c,function(f,g){return r(f,g[0])})}function D0(e,r,c){r=En(r,e);var f=-1,g=r.length;for(g||(g=1,e=n);++f<g;){var y=e==null?n:e[Yt(r[f])];y===n&&(f=g,y=c),e=un(y)?y.call(e):y}return e}function N0(e,r,c){return e==null?e:Yr(e,r,c)}function B0(e,r,c,f){return f=typeof f=="function"?f:n,e==null?e:Yr(e,r,c,f)}var Ju=lu(qe),Qu=lu(lt);function k0(e,r,c){var f=ie(e),g=f||bn(e)||_r(e);if(r=Z(r,4),c==null){var y=e&&e.constructor;g?c=f?new y:[]:Ne(e)?c=un(y)?pr(Ni(e)):{}:c={}}return(g?At:Xt)(e,function(A,E,L){return r(c,A,E,L)}),c}function U0(e,r){return e==null?!0:fo(e,r)}function H0(e,r,c){return e==null?e:Xc(e,r,go(c))}function G0(e,r,c,f){return f=typeof f=="function"?f:n,e==null?e:Xc(e,r,go(c),f)}function yr(e){return e==null?[]:Vs(e,qe(e))}function j0(e){return e==null?[]:Vs(e,lt(e))}function z0(e,r,c){return c===n&&(c=r,r=n),c!==n&&(c=St(c),c=c===c?c:0),r!==n&&(r=St(r),r=r===r?r:0),Wn(St(e),r,c)}function W0(e,r,c){return r=ln(r),c===n?(c=r,r=0):c=ln(c),e=St(e),$p(e,r,c)}function K0(e,r,c){if(c&&typeof c!="boolean"&&rt(e,r,c)&&(r=c=n),c===n&&(typeof r=="boolean"?(c=r,r=n):typeof e=="boolean"&&(c=e,e=n)),e===n&&r===n?(e=0,r=1):(e=ln(e),r===n?(r=e,e=0):r=ln(r)),e>r){var f=e;e=r,r=f}if(c||e%1||r%1){var g=Ec();return et(e+g*(r-e+Eh("1e-"+((g+"").length-1))),r)}return co(e,r)}var V0=gr(function(e,r,c){return r=r.toLowerCase(),e+(c?el(r):r)});function el(e){return No(Ee(e).toLowerCase())}function tl(e){return e=Ee(e),e&&e.replace(qf,Nh).replace(ph,"")}function X0(e,r,c){e=Ee(e),r=mt(r);var f=e.length;c=c===n?f:Wn(ae(c),0,f);var g=c;return c-=r.length,c>=0&&e.slice(c,g)==r}function q0(e){return e=Ee(e),e&&at.test(e)?e.replace(Xe,Bh):e}function Y0(e){return e=Ee(e),e&&Un.test(e)?e.replace(pt,"\\$&"):e}var $0=gr(function(e,r,c){return e+(c?"-":"")+r.toLowerCase()}),Z0=gr(function(e,r,c){return e+(c?" ":"")+r.toLowerCase()}),J0=iu("toLowerCase");function Q0(e,r,c){e=Ee(e),r=ae(r);var f=r?cr(e):0;if(!r||f>=r)return e;var g=(r-f)/2;return Qi(Hi(g),c)+e+Qi(Ui(g),c)}function e_(e,r,c){e=Ee(e),r=ae(r);var f=r?cr(e):0;return r&&f<r?e+Qi(r-f,c):e}function t_(e,r,c){e=Ee(e),r=ae(r);var f=r?cr(e):0;return r&&f<r?Qi(r-f,c)+e:e}function n_(e,r,c){return c||r==null?r=0:r&&(r=+r),up(Ee(e).replace(mn,""),r||0)}function r_(e,r,c){return(c?rt(e,r,c):r===n)?r=1:r=ae(r),uo(Ee(e),r)}function i_(){var e=arguments,r=Ee(e[0]);return e.length<3?r:r.replace(e[1],e[2])}var s_=gr(function(e,r,c){return e+(c?"_":"")+r.toLowerCase()});function o_(e,r,c){return c&&typeof c!="number"&&rt(e,r,c)&&(r=c=n),c=c===n?fe:c>>>0,c?(e=Ee(e),e&&(typeof r=="string"||r!=null&&!Po(r))&&(r=mt(r),!r&&ar(e))?xn(kt(e),0,c):e.split(r,c)):[]}var a_=gr(function(e,r,c){return e+(c?" ":"")+No(r)});function c_(e,r,c){return e=Ee(e),c=c==null?0:Wn(ae(c),0,e.length),r=mt(r),e.slice(c,c+r.length)==r}function u_(e,r,c){var f=_.templateSettings;c&&rt(e,r,c)&&(r=n),e=Ee(e),r=fs({},r,f,fu);var g=fs({},r.imports,f.imports,fu),y=qe(g),A=Vs(g,y),E,L,M=0,P=r.interpolate||xi,N="__p += '",G=qs((r.escape||xi).source+"|"+P.source+"|"+(P===kr?jf:xi).source+"|"+(r.evaluate||xi).source+"|$","g"),q="//# sourceURL="+(Re.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yh+"]")+`
`;e.replace(G,function(ee,me,we,yt,it,wt){return we||(we=yt),N+=e.slice(M,wt).replace(Yf,kh),me&&(E=!0,N+=`' +
__e(`+me+`) +
'`),it&&(L=!0,N+=`';
`+it+`;
__p += '`),we&&(N+=`' +
((__t = (`+we+`)) == null ? '' : __t) +
'`),M=wt+ee.length,ee}),N+=`';
`;var Q=Re.call(r,"variable")&&r.variable;if(!Q)N=`with (obj) {
`+N+`
}
`;else if(Hf.test(Q))throw new re(l);N=(L?N.replace(x,""):N).replace(z,"$1").replace(ge,"$1;"),N="function("+(Q||"obj")+`) {
`+(Q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(E?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+N+`return __p
}`;var ce=rl(function(){return Te(y,q+"return "+N).apply(n,A)});if(ce.source=N,Mo(ce))throw ce;return ce}function l_(e){return Ee(e).toLowerCase()}function f_(e){return Ee(e).toUpperCase()}function h_(e,r,c){if(e=Ee(e),e&&(c||r===n))return hc(e);if(!e||!(r=mt(r)))return e;var f=kt(e),g=kt(r),y=pc(f,g),A=dc(f,g)+1;return xn(f,y,A).join("")}function p_(e,r,c){if(e=Ee(e),e&&(c||r===n))return e.slice(0,mc(e)+1);if(!e||!(r=mt(r)))return e;var f=kt(e),g=dc(f,kt(r))+1;return xn(f,0,g).join("")}function d_(e,r,c){if(e=Ee(e),e&&(c||r===n))return e.replace(mn,"");if(!e||!(r=mt(r)))return e;var f=kt(e),g=pc(f,kt(r));return xn(f,g).join("")}function g_(e,r){var c=V,f=de;if(Ne(r)){var g="separator"in r?r.separator:g;c="length"in r?ae(r.length):c,f="omission"in r?mt(r.omission):f}e=Ee(e);var y=e.length;if(ar(e)){var A=kt(e);y=A.length}if(c>=y)return e;var E=c-cr(f);if(E<1)return f;var L=A?xn(A,0,E).join(""):e.slice(0,E);if(g===n)return L+f;if(A&&(E+=L.length-E),Po(g)){if(e.slice(E).search(g)){var M,P=L;for(g.global||(g=qs(g.source,Ee(Fa.exec(g))+"g")),g.lastIndex=0;M=g.exec(P);)var N=M.index;L=L.slice(0,N===n?E:N)}}else if(e.indexOf(mt(g),E)!=E){var G=L.lastIndexOf(g);G>-1&&(L=L.slice(0,G))}return L+f}function m_(e){return e=Ee(e),e&&Vt.test(e)?e.replace(be,Kh):e}var __=gr(function(e,r,c){return e+(c?" ":"")+r.toUpperCase()}),No=iu("toUpperCase");function nl(e,r,c){return e=Ee(e),r=c?n:r,r===n?Hh(e)?qh(e):Ch(e):e.match(r)||[]}var rl=he(function(e,r){try{return dt(e,n,r)}catch(c){return Mo(c)?c:new re(c)}}),y_=an(function(e,r){return At(r,function(c){c=Yt(c),sn(e,c,Oo(e[c],e))}),e});function w_(e){var r=e==null?0:e.length,c=Z();return e=r?Fe(e,function(f){if(typeof f[1]!="function")throw new Tt(u);return[c(f[0]),f[1]]}):[],he(function(f){for(var g=-1;++g<r;){var y=e[g];if(dt(y[0],this,f))return dt(y[1],this,f)}})}function v_(e){return Kp(xt(e,p))}function Bo(e){return function(){return e}}function A_(e,r){return e==null||e!==e?r:e}var T_=ou(),E_=ou(!0);function ft(e){return e}function ko(e){return Nc(typeof e=="function"?e:xt(e,p))}function x_(e){return kc(xt(e,p))}function b_(e,r){return Uc(e,xt(r,p))}var R_=he(function(e,r){return function(c){return Xr(c,e,r)}}),S_=he(function(e,r){return function(c){return Xr(e,c,r)}});function Uo(e,r,c){var f=qe(r),g=Vi(r,f);c==null&&!(Ne(r)&&(g.length||!f.length))&&(c=r,r=e,e=this,g=Vi(r,qe(r)));var y=!(Ne(c)&&"chain"in c)||!!c.chain,A=un(e);return At(g,function(E){var L=r[E];e[E]=L,A&&(e.prototype[E]=function(){var M=this.__chain__;if(y||M){var P=e(this.__wrapped__),N=P.__actions__=ct(this.__actions__);return N.push({func:L,args:arguments,thisArg:e}),P.__chain__=M,P}return L.apply(e,yn([this.value()],arguments))})}),e}function L_(){return Ze._===this&&(Ze._=ep),this}function Ho(){}function I_(e){return e=ae(e),he(function(r){return Hc(r,e)})}var O_=_o(Fe),C_=_o(ac),M_=_o(Gs);function il(e){return xo(e)?js(Yt(e)):cd(e)}function P_(e){return function(r){return e==null?n:Kn(e,r)}}var F_=cu(),D_=cu(!0);function Go(){return[]}function jo(){return!1}function N_(){return{}}function B_(){return""}function k_(){return!0}function U_(e,r){if(e=ae(e),e<1||e>J)return[];var c=fe,f=et(e,fe);r=Z(r),e-=fe;for(var g=Ks(f,r);++c<e;)r(c);return g}function H_(e){return ie(e)?Fe(e,Yt):_t(e)?[e]:ct(xu(Ee(e)))}function G_(e){var r=++Jh;return Ee(e)+r}var j_=Ji(function(e,r){return e+r},0),z_=yo("ceil"),W_=Ji(function(e,r){return e/r},1),K_=yo("floor");function V_(e){return e&&e.length?Ki(e,ft,no):n}function X_(e,r){return e&&e.length?Ki(e,Z(r,2),no):n}function q_(e){return lc(e,ft)}function Y_(e,r){return lc(e,Z(r,2))}function $_(e){return e&&e.length?Ki(e,ft,oo):n}function Z_(e,r){return e&&e.length?Ki(e,Z(r,2),oo):n}var J_=Ji(function(e,r){return e*r},1),Q_=yo("round"),ey=Ji(function(e,r){return e-r},0);function ty(e){return e&&e.length?Ws(e,ft):0}function ny(e,r){return e&&e.length?Ws(e,Z(r,2)):0}return _.after=xm,_.ary=Du,_.assign=f0,_.assignIn=Yu,_.assignInWith=fs,_.assignWith=h0,_.at=p0,_.before=Nu,_.bind=Oo,_.bindAll=y_,_.bindKey=Bu,_.castArray=Nm,_.chain=Mu,_.chunk=Kd,_.compact=Vd,_.concat=Xd,_.cond=w_,_.conforms=v_,_.constant=Bo,_.countBy=tm,_.create=d0,_.curry=ku,_.curryRight=Uu,_.debounce=Hu,_.defaults=g0,_.defaultsDeep=m0,_.defer=bm,_.delay=Rm,_.difference=qd,_.differenceBy=Yd,_.differenceWith=$d,_.drop=Zd,_.dropRight=Jd,_.dropRightWhile=Qd,_.dropWhile=eg,_.fill=tg,_.filter=rm,_.flatMap=om,_.flatMapDeep=am,_.flatMapDepth=cm,_.flatten=Lu,_.flattenDeep=ng,_.flattenDepth=rg,_.flip=Sm,_.flow=T_,_.flowRight=E_,_.fromPairs=ig,_.functions=E0,_.functionsIn=x0,_.groupBy=um,_.initial=og,_.intersection=ag,_.intersectionBy=cg,_.intersectionWith=ug,_.invert=R0,_.invertBy=S0,_.invokeMap=fm,_.iteratee=ko,_.keyBy=hm,_.keys=qe,_.keysIn=lt,_.map=ss,_.mapKeys=I0,_.mapValues=O0,_.matches=x_,_.matchesProperty=b_,_.memoize=as,_.merge=C0,_.mergeWith=$u,_.method=R_,_.methodOf=S_,_.mixin=Uo,_.negate=cs,_.nthArg=I_,_.omit=M0,_.omitBy=P0,_.once=Lm,_.orderBy=pm,_.over=O_,_.overArgs=Im,_.overEvery=C_,_.overSome=M_,_.partial=Co,_.partialRight=Gu,_.partition=dm,_.pick=F0,_.pickBy=Zu,_.property=il,_.propertyOf=P_,_.pull=pg,_.pullAll=Ou,_.pullAllBy=dg,_.pullAllWith=gg,_.pullAt=mg,_.range=F_,_.rangeRight=D_,_.rearg=Om,_.reject=_m,_.remove=_g,_.rest=Cm,_.reverse=Lo,_.sampleSize=wm,_.set=N0,_.setWith=B0,_.shuffle=vm,_.slice=yg,_.sortBy=Em,_.sortedUniq=bg,_.sortedUniqBy=Rg,_.split=o_,_.spread=Mm,_.tail=Sg,_.take=Lg,_.takeRight=Ig,_.takeRightWhile=Og,_.takeWhile=Cg,_.tap=Vg,_.throttle=Pm,_.thru=is,_.toArray=Vu,_.toPairs=Ju,_.toPairsIn=Qu,_.toPath=H_,_.toPlainObject=qu,_.transform=k0,_.unary=Fm,_.union=Mg,_.unionBy=Pg,_.unionWith=Fg,_.uniq=Dg,_.uniqBy=Ng,_.uniqWith=Bg,_.unset=U0,_.unzip=Io,_.unzipWith=Cu,_.update=H0,_.updateWith=G0,_.values=yr,_.valuesIn=j0,_.without=kg,_.words=nl,_.wrap=Dm,_.xor=Ug,_.xorBy=Hg,_.xorWith=Gg,_.zip=jg,_.zipObject=zg,_.zipObjectDeep=Wg,_.zipWith=Kg,_.entries=Ju,_.entriesIn=Qu,_.extend=Yu,_.extendWith=fs,Uo(_,_),_.add=j_,_.attempt=rl,_.camelCase=V0,_.capitalize=el,_.ceil=z_,_.clamp=z0,_.clone=Bm,_.cloneDeep=Um,_.cloneDeepWith=Hm,_.cloneWith=km,_.conformsTo=Gm,_.deburr=tl,_.defaultTo=A_,_.divide=W_,_.endsWith=X0,_.eq=Ht,_.escape=q0,_.escapeRegExp=Y0,_.every=nm,_.find=im,_.findIndex=Ru,_.findKey=_0,_.findLast=sm,_.findLastIndex=Su,_.findLastKey=y0,_.floor=K_,_.forEach=Pu,_.forEachRight=Fu,_.forIn=w0,_.forInRight=v0,_.forOwn=A0,_.forOwnRight=T0,_.get=Fo,_.gt=jm,_.gte=zm,_.has=b0,_.hasIn=Do,_.head=Iu,_.identity=ft,_.includes=lm,_.indexOf=sg,_.inRange=W0,_.invoke=L0,_.isArguments=qn,_.isArray=ie,_.isArrayBuffer=Wm,_.isArrayLike=ut,_.isArrayLikeObject=ke,_.isBoolean=Km,_.isBuffer=bn,_.isDate=Vm,_.isElement=Xm,_.isEmpty=qm,_.isEqual=Ym,_.isEqualWith=$m,_.isError=Mo,_.isFinite=Zm,_.isFunction=un,_.isInteger=ju,_.isLength=us,_.isMap=zu,_.isMatch=Jm,_.isMatchWith=Qm,_.isNaN=e0,_.isNative=t0,_.isNil=r0,_.isNull=n0,_.isNumber=Wu,_.isObject=Ne,_.isObjectLike=Be,_.isPlainObject=Qr,_.isRegExp=Po,_.isSafeInteger=i0,_.isSet=Ku,_.isString=ls,_.isSymbol=_t,_.isTypedArray=_r,_.isUndefined=s0,_.isWeakMap=o0,_.isWeakSet=a0,_.join=lg,_.kebabCase=$0,_.last=Rt,_.lastIndexOf=fg,_.lowerCase=Z0,_.lowerFirst=J0,_.lt=c0,_.lte=u0,_.max=V_,_.maxBy=X_,_.mean=q_,_.meanBy=Y_,_.min=$_,_.minBy=Z_,_.stubArray=Go,_.stubFalse=jo,_.stubObject=N_,_.stubString=B_,_.stubTrue=k_,_.multiply=J_,_.nth=hg,_.noConflict=L_,_.noop=Ho,_.now=os,_.pad=Q0,_.padEnd=e_,_.padStart=t_,_.parseInt=n_,_.random=K0,_.reduce=gm,_.reduceRight=mm,_.repeat=r_,_.replace=i_,_.result=D0,_.round=Q_,_.runInContext=R,_.sample=ym,_.size=Am,_.snakeCase=s_,_.some=Tm,_.sortedIndex=wg,_.sortedIndexBy=vg,_.sortedIndexOf=Ag,_.sortedLastIndex=Tg,_.sortedLastIndexBy=Eg,_.sortedLastIndexOf=xg,_.startCase=a_,_.startsWith=c_,_.subtract=ey,_.sum=ty,_.sumBy=ny,_.template=u_,_.times=U_,_.toFinite=ln,_.toInteger=ae,_.toLength=Xu,_.toLower=l_,_.toNumber=St,_.toSafeInteger=l0,_.toString=Ee,_.toUpper=f_,_.trim=h_,_.trimEnd=p_,_.trimStart=d_,_.truncate=g_,_.unescape=m_,_.uniqueId=G_,_.upperCase=__,_.upperFirst=No,_.each=Pu,_.eachRight=Fu,_.first=Iu,Uo(_,function(){var e={};return Xt(_,function(r,c){Re.call(_.prototype,c)||(e[c]=r)}),e}(),{chain:!1}),_.VERSION=i,At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){_[e].placeholder=_}),At(["drop","take"],function(e,r){_e.prototype[e]=function(c){c=c===n?1:Ve(ae(c),0);var f=this.__filtered__&&!r?new _e(this):this.clone();return f.__filtered__?f.__takeCount__=et(c,f.__takeCount__):f.__views__.push({size:et(c,fe),type:e+(f.__dir__<0?"Right":"")}),f},_e.prototype[e+"Right"]=function(c){return this.reverse()[e](c).reverse()}}),At(["filter","map","takeWhile"],function(e,r){var c=r+1,f=c==te||c==ne;_e.prototype[e]=function(g){var y=this.clone();return y.__iteratees__.push({iteratee:Z(g,3),type:c}),y.__filtered__=y.__filtered__||f,y}}),At(["head","last"],function(e,r){var c="take"+(r?"Right":"");_e.prototype[e]=function(){return this[c](1).value()[0]}}),At(["initial","tail"],function(e,r){var c="drop"+(r?"":"Right");_e.prototype[e]=function(){return this.__filtered__?new _e(this):this[c](1)}}),_e.prototype.compact=function(){return this.filter(ft)},_e.prototype.find=function(e){return this.filter(e).head()},_e.prototype.findLast=function(e){return this.reverse().find(e)},_e.prototype.invokeMap=he(function(e,r){return typeof e=="function"?new _e(this):this.map(function(c){return Xr(c,e,r)})}),_e.prototype.reject=function(e){return this.filter(cs(Z(e)))},_e.prototype.slice=function(e,r){e=ae(e);var c=this;return c.__filtered__&&(e>0||r<0)?new _e(c):(e<0?c=c.takeRight(-e):e&&(c=c.drop(e)),r!==n&&(r=ae(r),c=r<0?c.dropRight(-r):c.take(r-e)),c)},_e.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},_e.prototype.toArray=function(){return this.take(fe)},Xt(_e.prototype,function(e,r){var c=/^(?:filter|find|map|reject)|While$/.test(r),f=/^(?:head|last)$/.test(r),g=_[f?"take"+(r=="last"?"Right":""):r],y=f||/^find/.test(r);g&&(_.prototype[r]=function(){var A=this.__wrapped__,E=f?[1]:arguments,L=A instanceof _e,M=E[0],P=L||ie(A),N=function(me){var we=g.apply(_,yn([me],E));return f&&G?we[0]:we};P&&c&&typeof M=="function"&&M.length!=1&&(L=P=!1);var G=this.__chain__,q=!!this.__actions__.length,Q=y&&!G,ce=L&&!q;if(!y&&P){A=ce?A:new _e(this);var ee=e.apply(A,E);return ee.__actions__.push({func:is,args:[N],thisArg:n}),new Et(ee,G)}return Q&&ce?e.apply(this,E):(ee=this.thru(N),Q?f?ee.value()[0]:ee.value():ee)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var r=Oi[e],c=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",f=/^(?:pop|shift)$/.test(e);_.prototype[e]=function(){var g=arguments;if(f&&!this.__chain__){var y=this.value();return r.apply(ie(y)?y:[],g)}return this[c](function(A){return r.apply(ie(A)?A:[],g)})}}),Xt(_e.prototype,function(e,r){var c=_[r];if(c){var f=c.name+"";Re.call(hr,f)||(hr[f]=[]),hr[f].push({name:r,func:c})}}),hr[Zi(n,O).name]=[{name:"wrapper",func:n}],_e.prototype.clone=mp,_e.prototype.reverse=_p,_e.prototype.value=yp,_.prototype.at=Xg,_.prototype.chain=qg,_.prototype.commit=Yg,_.prototype.next=$g,_.prototype.plant=Jg,_.prototype.reverse=Qg,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=em,_.prototype.first=_.prototype.head,Hr&&(_.prototype[Hr]=Zg),_},ur=Yh();Hn?((Hn.exports=ur)._=ur,Bs._=ur):Ze._=ur}).call(ei)})(Ts,Ts.exports);var la=Ts.exports,Lr=Object.freeze({Linear:Object.freeze({None:function(a){return a},In:function(a){return this.None(a)},Out:function(a){return this.None(a)},InOut:function(a){return this.None(a)}}),Quadratic:Object.freeze({In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}}),Cubic:Object.freeze({In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}}),Quartic:Object.freeze({In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}}),Quintic:Object.freeze({In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}}),Sinusoidal:Object.freeze({In:function(a){return 1-Math.sin((1-a)*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return .5*(1-Math.sin(Math.PI*(.5-a)))}}),Exponential:Object.freeze({In:function(a){return a===0?0:Math.pow(1024,a-1)},Out:function(a){return a===1?1:1-Math.pow(2,-10*a)},InOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}}),Circular:Object.freeze({In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}}),Elastic:Object.freeze({In:function(a){return a===0?0:a===1?1:-Math.pow(2,10*(a-1))*Math.sin((a-1.1)*5*Math.PI)},Out:function(a){return a===0?0:a===1?1:Math.pow(2,-10*a)*Math.sin((a-.1)*5*Math.PI)+1},InOut:function(a){return a===0?0:a===1?1:(a*=2,a<1?-.5*Math.pow(2,10*(a-1))*Math.sin((a-1.1)*5*Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin((a-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(a){var t=1.70158;return a===1?1:a*a*((t+1)*a-t)},Out:function(a){var t=1.70158;return a===0?0:--a*a*((t+1)*a+t)+1},InOut:function(a){var t=2.5949095;return(a*=2)<1?.5*(a*a*((t+1)*a-t)):.5*((a-=2)*a*((t+1)*a+t)+2)}}),Bounce:Object.freeze({In:function(a){return 1-Lr.Bounce.Out(1-a)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return a<.5?Lr.Bounce.In(a*2)*.5:Lr.Bounce.Out(a*2-1)*.5+.5}}),generatePow:function(a){return a===void 0&&(a=4),a=a<Number.EPSILON?Number.EPSILON:a,a=a>1e4?1e4:a,{In:function(t){return Math.pow(t,a)},Out:function(t){return 1-Math.pow(1-t,a)},InOut:function(t){return t<.5?Math.pow(t*2,a)/2:(1-Math.pow(2-t*2,a))/2+.5}}}}),br=function(){return performance.now()},Ql=function(){function a(){this._tweens={},this._tweensAddedDuringUpdate={}}return a.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(n){return t._tweens[n]})},a.prototype.removeAll=function(){this._tweens={}},a.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},a.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},a.prototype.update=function(t,n){t===void 0&&(t=br()),n===void 0&&(n=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],u=!n;o&&o.update(t,u)===!1&&!n&&delete this._tweens[i[s]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},a}(),$n={Linear:function(a,t){var n=a.length-1,i=n*t,s=Math.floor(i),o=$n.Utils.Linear;return t<0?o(a[0],a[1],i):t>1?o(a[n],a[n-1],n-i):o(a[s],a[s+1>n?n:s+1],i-s)},Bezier:function(a,t){for(var n=0,i=a.length-1,s=Math.pow,o=$n.Utils.Bernstein,u=0;u<=i;u++)n+=s(1-t,i-u)*s(t,u)*a[u]*o(i,u);return n},CatmullRom:function(a,t){var n=a.length-1,i=n*t,s=Math.floor(i),o=$n.Utils.CatmullRom;return a[0]===a[n]?(t<0&&(s=Math.floor(i=n*(1+t))),o(a[(s-1+n)%n],a[s],a[(s+1)%n],a[(s+2)%n],i-s)):t<0?a[0]-(o(a[0],a[0],a[1],a[1],-i)-a[0]):t>1?a[n]-(o(a[n],a[n],a[n-1],a[n-1],i-n)-a[n]):o(a[s?s-1:0],a[s],a[n<s+1?n:s+1],a[n<s+2?n:s+2],i-s)},Utils:{Linear:function(a,t,n){return(t-a)*n+a},Bernstein:function(a,t){var n=$n.Utils.Factorial;return n(a)/n(t)/n(a-t)},Factorial:function(){var a=[1];return function(t){var n=1;if(a[t])return a[t];for(var i=t;i>1;i--)n*=i;return a[t]=n,n}}(),CatmullRom:function(a,t,n,i,s){var o=(n-a)*.5,u=(i-t)*.5,l=s*s,h=s*l;return(2*t-2*n+o+u)*h+(-3*t+3*n-2*o-u)*l+o*s+t}}},Ra=function(){function a(){}return a.nextId=function(){return a._nextId++},a._nextId=0,a}(),fa=new Ql,tw=function(){function a(t,n){n===void 0&&(n=fa),this._object=t,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Lr.Linear.None,this._interpolationFunction=$n.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Ra.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return a.prototype.getId=function(){return this._id},a.prototype.isPlaying=function(){return this._isPlaying},a.prototype.isPaused=function(){return this._isPaused},a.prototype.getDuration=function(){return this._duration},a.prototype.to=function(t,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},a.prototype.duration=function(t){return t===void 0&&(t=1e3),this._duration=t<0?0:t,this},a.prototype.dynamic=function(t){return t===void 0&&(t=!1),this._isDynamic=t,this},a.prototype.start=function(t,n){if(t===void 0&&(t=br()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},a.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},a.prototype._setupProperties=function(t,n,i,s,o){for(var u in i){var l=t[u],h=Array.isArray(l),d=h?"array":typeof l,m=!h&&Array.isArray(i[u]);if(!(d==="undefined"||d==="function")){if(m){var p=i[u];if(p.length===0)continue;for(var w=[l],v=0,T=p.length;v<T;v+=1){var b=this._handleRelativeValue(l,p[v]);if(isNaN(b)){m=!1,console.warn("Found invalid interpolation list. Skipping.");break}w.push(b)}m&&(i[u]=w)}if((d==="object"||h)&&l&&!m){n[u]=h?[]:{};var S=l;for(var O in S)n[u][O]=S[O];s[u]=h?[]:{};var p=i[u];if(!this._isDynamic){var D={};for(var O in p)D[O]=p[O];i[u]=p=D}this._setupProperties(S,n[u],p,s[u],o)}else(typeof n[u]>"u"||o)&&(n[u]=l),h||(n[u]*=1),m?s[u]=i[u].slice().reverse():s[u]=n[u]||0}}},a.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},a.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},a.prototype.pause=function(t){return t===void 0&&(t=br()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},a.prototype.resume=function(t){return t===void 0&&(t=br()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},a.prototype.stopChainedTweens=function(){for(var t=0,n=this._chainedTweens.length;t<n;t++)this._chainedTweens[t].stop();return this},a.prototype.group=function(t){return t===void 0&&(t=fa),this._group=t,this},a.prototype.delay=function(t){return t===void 0&&(t=0),this._delayTime=t,this},a.prototype.repeat=function(t){return t===void 0&&(t=0),this._initialRepeat=t,this._repeat=t,this},a.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},a.prototype.yoyo=function(t){return t===void 0&&(t=!1),this._yoyo=t,this},a.prototype.easing=function(t){return t===void 0&&(t=Lr.Linear.None),this._easingFunction=t,this},a.prototype.interpolation=function(t){return t===void 0&&(t=$n.Linear),this._interpolationFunction=t,this},a.prototype.chain=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._chainedTweens=t,this},a.prototype.onStart=function(t){return this._onStartCallback=t,this},a.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},a.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},a.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},a.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},a.prototype.onStop=function(t){return this._onStopCallback=t,this},a.prototype.update=function(t,n){var i=this,s;if(t===void 0&&(t=br()),n===void 0&&(n=!0),this._isPaused)return!0;var o,u=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>u)return!1;n&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var l=t-this._startTime,h=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),d=this._duration+this._repeat*h,m=function(){if(i._duration===0||l>d)return 1;var S=Math.trunc(l/h),O=l-S*h,D=Math.min(O/i._duration,1);return D===0&&l===i._duration?1:D},p=m(),w=this._easingFunction(p);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,w),this._onUpdateCallback&&this._onUpdateCallback(this._object,p),this._duration===0||l>=this._duration)if(this._repeat>0){var v=Math.min(Math.trunc((l-this._duration)/h)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=v);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=h*v,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var T=0,b=this._chainedTweens.length;T<b;T++)this._chainedTweens[T].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},a.prototype._updateProperties=function(t,n,i,s){for(var o in i)if(n[o]!==void 0){var u=n[o]||0,l=i[o],h=Array.isArray(t[o]),d=Array.isArray(l),m=!h&&d;m?t[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(t[o],u,l,s):(l=this._handleRelativeValue(u,l),typeof l=="number"&&(t[o]=u+(l-u)*s))}},a.prototype._handleRelativeValue=function(t,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?t+parseFloat(n):parseFloat(n)},a.prototype._swapEndStartRepeatValues=function(t){var n=this._valuesStartRepeat[t],i=this._valuesEnd[t];typeof i=="string"?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(i):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=n},a}(),nw="23.1.1",rw=Ra.nextId,Jt=fa,iw=Jt.getAll.bind(Jt),sw=Jt.removeAll.bind(Jt),ow=Jt.add.bind(Jt),aw=Jt.remove.bind(Jt),cw=Jt.update.bind(Jt),ha={Easing:Lr,Group:Ql,Interpolation:$n,now:br,Sequence:Ra,nextId:rw,Tween:tw,VERSION:nw,getAll:iw,removeAll:sw,add:ow,remove:aw,update:cw};const uw=(a=!1)=>{const t=Ta(a);return{boolean:t,setTrue:()=>{t.value=!0},setFalse:()=>{t.value=!1},toggle:()=>{t.value=!t.value}}},lw=(a=!1,t=0)=>{const{boolean:n,setFalse:i,setTrue:s}=uw(a),o=Ta(0);return{loading:n,openLoading:()=>{s(),o.value=new Date().getTime()},closeLoading:()=>{const d=new Date().getTime()-o.value;return d<t?setTimeout(i,t-d):i()}}};function _l(a,t){if(t===cy)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),a;if(t===ra||t===Gl){let n=a.getIndex();if(n===null){const u=[],l=a.getAttribute("position");if(l!==void 0){for(let h=0;h<l.count;h++)u.push(h);a.setIndex(u),n=a.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a}const i=n.count-2,s=[];if(t===ra)for(let u=1;u<=i;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(let u=0;u<i;u++)u%2===0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=a.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),a}const yl=a=>{const{from:t,to:n,duration:i,easing:s=ha.Easing.Quadratic.Out,onUpdate:o,onComplete:u}=a;return new ha.Tween(t).to(n,i).easing(s).onUpdate(l=>la.isFunction(o)&&o(l)).onComplete(l=>la.isFunction(u)&&u(l)).start()},ef=a=>{let t=[];const n=JSON.parse(JSON.stringify(a)),i=n.children;return delete n.children,t.push(n),i&&i.map(s=>{s.children?t=t.concat(ef(s)):t.push(s)}),t},fw=a=>{let t="";return a.forEach(n=>{t+=`@keyframes ${n.name} {`;for(const[i,s]of Object.entries(n))if(i!=="name"){t+=`${i} {`;for(const[o,u]of Object.entries(s))t+=`${o}: ${u};`;t+="}"}t+="}"}),t},hw=()=>({createDom:t=>{const{tagName:n,cssProperties:i,eventHandlers:s,keyframes:o}=t,u=document.createElement(n);if((i==null?void 0:i.length)>0&&i.forEach(({name:l,value:h})=>{l==="src"?u.src=h:u.style[l]=h}),o&&Object.keys(o).length>0){const l=fw(o),h=document.styleSheets[0];h.insertRule(l,h.cssRules.length)}return(s==null?void 0:s.length)>0&&s.forEach(({eventName:l,handlerType:h,handlerValue:d})=>{u!=null&&u.userData?u.userData.push({eventName:l,type:h,value:d}):u.userData=[{eventName:l,type:h,value:d}]}),u}}),pw=/^[og]\s*(.+)?/,dw=/^mtllib /,gw=/^usemtl /,mw=/^usemap /,wl=/\s+/,vl=new ue,Ko=new ue,Al=new ue,Tl=new ue,Lt=new ue,ds=new ze;function _w(){const a={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=t,this.object.fromDeclaration=n!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,o){const u=this._finalize(!1);u&&(u.inherited||u.groupCount<=0)&&this.materials.splice(u.index,1);const l={index:this.materials.length,name:s||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:u!==void 0?u.smooth:this.smooth,groupStart:u!==void 0?u.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(h){const d={index:typeof h=="number"?h:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return d.clone=this.clone.bind(d),d}};return this.materials.push(l),l},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),s&&this.materials.length>1)for(let u=this.materials.length-1;u>=0;u--)this.materials[u].groupCount<=0&&this.materials.splice(u,1);return s&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},i&&i.name&&typeof i.clone=="function"){const s=i.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,n){const i=parseInt(t,10);return(i>=0?i-1:i+n/3)*3},parseNormalIndex:function(t,n){const i=parseInt(t,10);return(i>=0?i-1:i+n/3)*3},parseUVIndex:function(t,n){const i=parseInt(t,10);return(i>=0?i-1:i+n/2)*2},addVertex:function(t,n,i){const s=this.vertices,o=this.object.geometry.vertices;o.push(s[t+0],s[t+1],s[t+2]),o.push(s[n+0],s[n+1],s[n+2]),o.push(s[i+0],s[i+1],s[i+2])},addVertexPoint:function(t){const n=this.vertices;this.object.geometry.vertices.push(n[t+0],n[t+1],n[t+2])},addVertexLine:function(t){const n=this.vertices;this.object.geometry.vertices.push(n[t+0],n[t+1],n[t+2])},addNormal:function(t,n,i){const s=this.normals,o=this.object.geometry.normals;o.push(s[t+0],s[t+1],s[t+2]),o.push(s[n+0],s[n+1],s[n+2]),o.push(s[i+0],s[i+1],s[i+2])},addFaceNormal:function(t,n,i){const s=this.vertices,o=this.object.geometry.normals;vl.fromArray(s,t),Ko.fromArray(s,n),Al.fromArray(s,i),Lt.subVectors(Al,Ko),Tl.subVectors(vl,Ko),Lt.cross(Tl),Lt.normalize(),o.push(Lt.x,Lt.y,Lt.z),o.push(Lt.x,Lt.y,Lt.z),o.push(Lt.x,Lt.y,Lt.z)},addColor:function(t,n,i){const s=this.colors,o=this.object.geometry.colors;s[t]!==void 0&&o.push(s[t+0],s[t+1],s[t+2]),s[n]!==void 0&&o.push(s[n+0],s[n+1],s[n+2]),s[i]!==void 0&&o.push(s[i+0],s[i+1],s[i+2])},addUV:function(t,n,i){const s=this.uvs,o=this.object.geometry.uvs;o.push(s[t+0],s[t+1]),o.push(s[n+0],s[n+1]),o.push(s[i+0],s[i+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const n=this.uvs;this.object.geometry.uvs.push(n[t+0],n[t+1])},addFace:function(t,n,i,s,o,u,l,h,d){const m=this.vertices.length;let p=this.parseVertexIndex(t,m),w=this.parseVertexIndex(n,m),v=this.parseVertexIndex(i,m);if(this.addVertex(p,w,v),this.addColor(p,w,v),l!==void 0&&l!==""){const T=this.normals.length;p=this.parseNormalIndex(l,T),w=this.parseNormalIndex(h,T),v=this.parseNormalIndex(d,T),this.addNormal(p,w,v)}else this.addFaceNormal(p,w,v);if(s!==void 0&&s!==""){const T=this.uvs.length;p=this.parseUVIndex(s,T),w=this.parseUVIndex(o,T),v=this.parseUVIndex(u,T),this.addUV(p,w,v),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const n=this.vertices.length;for(let i=0,s=t.length;i<s;i++){const o=this.parseVertexIndex(t[i],n);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(t,n){this.object.geometry.type="Line";const i=this.vertices.length,s=this.uvs.length;for(let o=0,u=t.length;o<u;o++)this.addVertexLine(this.parseVertexIndex(t[o],i));for(let o=0,u=n.length;o<u;o++)this.addUVLine(this.parseUVIndex(n[o],s))}};return a.startObject("",!1),a}class yw extends Jn{constructor(t){super(t),this.materials=null}load(t,n,i,s){const o=this,u=new Mr(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(l){try{n(o.parse(l))}catch(h){s?s(h):console.error(h),o.manager.itemError(t)}},i,s)}setMaterials(t){return this.materials=t,this}parse(t){const n=new _w;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const i=t.split(`
`);let s=[];for(let l=0,h=i.length;l<h;l++){const d=i[l].trimStart();if(d.length===0)continue;const m=d.charAt(0);if(m!=="#")if(m==="v"){const p=d.split(wl);switch(p[0]){case"v":n.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),p.length>=7?(ds.setRGB(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6])).convertSRGBToLinear(),n.colors.push(ds.r,ds.g,ds.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":n.uvs.push(parseFloat(p[1]),parseFloat(p[2]));break}}else if(m==="f"){const w=d.slice(1).trim().split(wl),v=[];for(let b=0,S=w.length;b<S;b++){const O=w[b];if(O.length>0){const D=O.split("/");v.push(D)}}const T=v[0];for(let b=1,S=v.length-1;b<S;b++){const O=v[b],D=v[b+1];n.addFace(T[0],O[0],D[0],T[1],O[1],D[1],T[2],O[2],D[2])}}else if(m==="l"){const p=d.substring(1).trim().split(" ");let w=[];const v=[];if(d.indexOf("/")===-1)w=p;else for(let T=0,b=p.length;T<b;T++){const S=p[T].split("/");S[0]!==""&&w.push(S[0]),S[1]!==""&&v.push(S[1])}n.addLineGeometry(w,v)}else if(m==="p"){const w=d.slice(1).trim().split(" ");n.addPointGeometry(w)}else if((s=pw.exec(d))!==null){const p=(" "+s[0].slice(1).trim()).slice(1);n.startObject(p)}else if(gw.test(d))n.object.startMaterial(d.substring(7).trim(),n.materialLibraries);else if(dw.test(d))n.materialLibraries.push(d.substring(7).trim());else if(mw.test(d))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(m==="s"){if(s=d.split(" "),s.length>1){const w=s[1].trim().toLowerCase();n.object.smooth=w!=="0"&&w!=="off"}else n.object.smooth=!0;const p=n.object.currentMaterial();p&&(p.smooth=n.object.smooth)}else{if(d==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+d+'"')}}n.finalize();const o=new Fn;if(o.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0)===!0)for(let l=0,h=n.objects.length;l<h;l++){const d=n.objects[l],m=d.geometry,p=d.materials,w=m.type==="Line",v=m.type==="Points";let T=!1;if(m.vertices.length===0)continue;const b=new Sr;b.setAttribute("position",new Ct(m.vertices,3)),m.normals.length>0&&b.setAttribute("normal",new Ct(m.normals,3)),m.colors.length>0&&(T=!0,b.setAttribute("color",new Ct(m.colors,3))),m.hasUVIndices===!0&&b.setAttribute("uv",new Ct(m.uvs,2));const S=[];for(let D=0,B=p.length;D<B;D++){const k=p[D],$=k.name+"_"+k.smooth+"_"+T;let j=n.materials[$];if(this.materials!==null){if(j=this.materials.create(k.name),w&&j&&!(j instanceof si)){const H=new si;oi.prototype.copy.call(H,j),H.color.copy(j.color),j=H}else if(v&&j&&!(j instanceof ri)){const H=new ri({size:10,sizeAttenuation:!1});oi.prototype.copy.call(H,j),H.color.copy(j.color),H.map=j.map,j=H}}j===void 0&&(w?j=new si:v?j=new ri({size:1,sizeAttenuation:!1}):j=new ai,j.name=k.name,j.flatShading=!k.smooth,j.vertexColors=T,n.materials[$]=j),S.push(j)}let O;if(S.length>1){for(let D=0,B=p.length;D<B;D++){const k=p[D];b.addGroup(k.groupStart,k.groupCount,D)}w?O=new ia(b,S):v?O=new ms(b,S):O=new li(b,S)}else w?O=new ia(b,S[0]):v?O=new ms(b,S[0]):O=new li(b,S[0]);O.name=d.name,o.add(O)}else if(n.vertices.length>0){const l=new ri({size:1,sizeAttenuation:!1}),h=new Sr;h.setAttribute("position",new Ct(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(h.setAttribute("color",new Ct(n.colors,3)),l.vertexColors=!0);const d=new ms(h,l);o.add(d)}return o}}class ww extends Jn{constructor(t){super(t)}load(t,n,i,s){const o=this,u=this.path===""?Zn.extractUrlBase(t):this.path,l=new Mr(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(h){try{n(o.parse(h,u))}catch(d){s?s(d):console.error(d),o.manager.itemError(t)}},i,s)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,n){const i=t.split(`
`);let s={};const o=/\s+/,u={};for(let h=0;h<i.length;h++){let d=i[h];if(d=d.trim(),d.length===0||d.charAt(0)==="#")continue;const m=d.indexOf(" ");let p=m>=0?d.substring(0,m):d;p=p.toLowerCase();let w=m>=0?d.substring(m+1):"";if(w=w.trim(),p==="newmtl")s={name:w},u[w]=s;else if(p==="ka"||p==="kd"||p==="ks"||p==="ke"){const v=w.split(o,3);s[p]=[parseFloat(v[0]),parseFloat(v[1]),parseFloat(v[2])]}else s[p]=w}const l=new vw(this.resourcePath||n,this.materialOptions);return l.setCrossOrigin(this.crossOrigin),l.setManager(this.manager),l.setMaterials(u),l}}class vw{constructor(t="",n={}){this.baseUrl=t,this.options=n,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:jl,this.wrap=this.options.wrap!==void 0?this.options.wrap:Or}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const n={};for(const i in t){const s=t[i],o={};n[i]=o;for(const u in s){let l=!0,h=s[u];const d=u.toLowerCase();switch(d){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(h=[h[0]/255,h[1]/255,h[2]/255]),this.options&&this.options.ignoreZeroRGBs&&h[0]===0&&h[1]===0&&h[2]===0&&(l=!1);break}l&&(o[d]=h)}}return n}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const n in this.materialsInfo)this.materialsArray[t]=this.create(n),this.nameLookup[n]=t,t++;return this.materialsArray}create(t){return this.materials[t]===void 0&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const n=this,i=this.materialsInfo[t],s={name:t,side:this.side};function o(l,h){return typeof h!="string"||h===""?"":/^https?:\/\//i.test(h)?h:l+h}function u(l,h){if(s[l])return;const d=n.getTextureParams(h,s),m=n.loadTexture(o(n.baseUrl,d.url));m.repeat.copy(d.scale),m.offset.copy(d.offset),m.wrapS=n.wrap,m.wrapT=n.wrap,(l==="map"||l==="emissiveMap")&&(m.colorSpace=zt),s[l]=m}for(const l in i){const h=i[l];let d;if(h!=="")switch(l.toLowerCase()){case"kd":s.color=new ze().fromArray(h).convertSRGBToLinear();break;case"ks":s.specular=new ze().fromArray(h).convertSRGBToLinear();break;case"ke":s.emissive=new ze().fromArray(h).convertSRGBToLinear();break;case"map_kd":u("map",h);break;case"map_ks":u("specularMap",h);break;case"map_ke":u("emissiveMap",h);break;case"norm":u("normalMap",h);break;case"map_bump":case"bump":u("bumpMap",h);break;case"map_d":u("alphaMap",h),s.transparent=!0;break;case"ns":s.shininess=parseFloat(h);break;case"d":d=parseFloat(h),d<1&&(s.opacity=d,s.transparent=!0);break;case"tr":d=parseFloat(h),this.options&&this.options.invertTrProperty&&(d=1-d),d>0&&(s.opacity=1-d,s.transparent=!0);break}}return this.materials[t]=new ai(s),this.materials[t]}getTextureParams(t,n){const i={scale:new Ye(1,1),offset:new Ye(0,0)},s=t.split(/\s+/);let o;return o=s.indexOf("-bm"),o>=0&&(n.bumpScale=parseFloat(s[o+1]),s.splice(o,2)),o=s.indexOf("-s"),o>=0&&(i.scale.set(parseFloat(s[o+1]),parseFloat(s[o+2])),s.splice(o,4)),o=s.indexOf("-o"),o>=0&&(i.offset.set(parseFloat(s[o+1]),parseFloat(s[o+2])),s.splice(o,4)),i.url=s.join(" ").trim(),i}loadTexture(t,n,i,s,o){const u=this.manager!==void 0?this.manager:uy;let l=u.getHandler(t);l===null&&(l=new xs(u)),l.setCrossOrigin&&l.setCrossOrigin(this.crossOrigin);const h=l.load(t,i,s,o);return n!==void 0&&(h.mapping=n),h}}class Aw extends Jn{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new Rw(n)}),this.register(function(n){return new Dw(n)}),this.register(function(n){return new Nw(n)}),this.register(function(n){return new Bw(n)}),this.register(function(n){return new Lw(n)}),this.register(function(n){return new Iw(n)}),this.register(function(n){return new Ow(n)}),this.register(function(n){return new Cw(n)}),this.register(function(n){return new bw(n)}),this.register(function(n){return new Mw(n)}),this.register(function(n){return new Sw(n)}),this.register(function(n){return new Fw(n)}),this.register(function(n){return new Pw(n)}),this.register(function(n){return new Ew(n)}),this.register(function(n){return new kw(n)}),this.register(function(n){return new Uw(n)})}load(t,n,i,s){const o=this;let u;if(this.resourcePath!=="")u=this.resourcePath;else if(this.path!==""){const d=Zn.extractUrlBase(t);u=Zn.resolveURL(d,this.path)}else u=Zn.extractUrlBase(t);this.manager.itemStart(t);const l=function(d){s?s(d):console.error(d),o.manager.itemError(t),o.manager.itemEnd(t)},h=new Mr(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,function(d){try{o.parse(d,u,function(m){n(m),o.manager.itemEnd(t)},l)}catch(m){l(m)}},i,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,i,s){let o;const u={},l={},h=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(h.decode(new Uint8Array(t,0,4))===tf){try{u[ye.KHR_BINARY_GLTF]=new Hw(t)}catch(p){s&&s(p);return}o=JSON.parse(u[ye.KHR_BINARY_GLTF].content)}else o=JSON.parse(h.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new Qw(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const p=this.pluginCallbacks[m](d);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[p.name]=p,u[p.name]=!0}if(o.extensionsUsed)for(let m=0;m<o.extensionsUsed.length;++m){const p=o.extensionsUsed[m],w=o.extensionsRequired||[];switch(p){case ye.KHR_MATERIALS_UNLIT:u[p]=new xw;break;case ye.KHR_DRACO_MESH_COMPRESSION:u[p]=new Gw(o,this.dracoLoader);break;case ye.KHR_TEXTURE_TRANSFORM:u[p]=new jw;break;case ye.KHR_MESH_QUANTIZATION:u[p]=new zw;break;default:w.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}d.setExtensions(u),d.setPlugins(l),d.parse(i,s)}parseAsync(t,n){const i=this;return new Promise(function(s,o){i.parse(t,n,s,o)})}}function Tw(){let a={};return{get:function(t){return a[t]},add:function(t,n){a[t]=n},remove:function(t){delete a[t]},removeAll:function(){a={}}}}const ye={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ew{constructor(t){this.parser=t,this.name=ye.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const n=this.parser,i="light:"+t;let s=n.cache.get(i);if(s)return s;const o=n.json,h=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let d;const m=new ze(16777215);h.color!==void 0&&m.setRGB(h.color[0],h.color[1],h.color[2],Ft);const p=h.range!==void 0?h.range:0;switch(h.type){case"directional":d=new Wl(m),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new sa(m),d.distance=p;break;case"spot":d=new zl(m),d.distance=p,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,d.angle=h.spot.outerConeAngle,d.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return d.position.set(0,0,0),d.decay=2,Cn(d,h),h.intensity!==void 0&&(d.intensity=h.intensity),d.name=n.createUniqueName(h.name||"light_"+t),s=Promise.resolve(d),n.cache.add(i,s),s}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,i=this.parser,o=i.json.nodes[t],l=(o.extensions&&o.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(h){return i._getNodeRef(n.cache,l,h)})}}class xw{constructor(){this.name=ye.KHR_MATERIALS_UNLIT}getMaterialType(){return ii}extendParams(t,n,i){const s=[];t.color=new ze(1,1,1),t.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const u=o.baseColorFactor;t.color.setRGB(u[0],u[1],u[2],Ft),t.opacity=u[3]}o.baseColorTexture!==void 0&&s.push(i.assignTexture(t,"map",o.baseColorTexture,zt))}return Promise.all(s)}}class bw{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}}class Rw{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],u=s.extensions[this.name];if(u.clearcoatFactor!==void 0&&(n.clearcoat=u.clearcoatFactor),u.clearcoatTexture!==void 0&&o.push(i.assignTexture(n,"clearcoatMap",u.clearcoatTexture)),u.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=u.clearcoatRoughnessFactor),u.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(n,"clearcoatRoughnessMap",u.clearcoatRoughnessTexture)),u.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(n,"clearcoatNormalMap",u.clearcoatNormalTexture)),u.clearcoatNormalTexture.scale!==void 0)){const l=u.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Ye(l,l)}return Promise.all(o)}}class Sw{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],u=s.extensions[this.name];return u.iridescenceFactor!==void 0&&(n.iridescence=u.iridescenceFactor),u.iridescenceTexture!==void 0&&o.push(i.assignTexture(n,"iridescenceMap",u.iridescenceTexture)),u.iridescenceIor!==void 0&&(n.iridescenceIOR=u.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),u.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=u.iridescenceThicknessMinimum),u.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=u.iridescenceThicknessMaximum),u.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(n,"iridescenceThicknessMap",u.iridescenceThicknessTexture)),Promise.all(o)}}class Lw{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_SHEEN}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new ze(0,0,0),n.sheenRoughness=0,n.sheen=1;const u=s.extensions[this.name];if(u.sheenColorFactor!==void 0){const l=u.sheenColorFactor;n.sheenColor.setRGB(l[0],l[1],l[2],Ft)}return u.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=u.sheenRoughnessFactor),u.sheenColorTexture!==void 0&&o.push(i.assignTexture(n,"sheenColorMap",u.sheenColorTexture,zt)),u.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(n,"sheenRoughnessMap",u.sheenRoughnessTexture)),Promise.all(o)}}class Iw{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],u=s.extensions[this.name];return u.transmissionFactor!==void 0&&(n.transmission=u.transmissionFactor),u.transmissionTexture!==void 0&&o.push(i.assignTexture(n,"transmissionMap",u.transmissionTexture)),Promise.all(o)}}class Ow{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_VOLUME}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],u=s.extensions[this.name];n.thickness=u.thicknessFactor!==void 0?u.thicknessFactor:0,u.thicknessTexture!==void 0&&o.push(i.assignTexture(n,"thicknessMap",u.thicknessTexture)),n.attenuationDistance=u.attenuationDistance||1/0;const l=u.attenuationColor||[1,1,1];return n.attenuationColor=new ze().setRGB(l[0],l[1],l[2],Ft),Promise.all(o)}}class Cw{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_IOR}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Mw{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_SPECULAR}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],u=s.extensions[this.name];n.specularIntensity=u.specularFactor!==void 0?u.specularFactor:1,u.specularTexture!==void 0&&o.push(i.assignTexture(n,"specularIntensityMap",u.specularTexture));const l=u.specularColorFactor||[1,1,1];return n.specularColor=new ze().setRGB(l[0],l[1],l[2],Ft),u.specularColorTexture!==void 0&&o.push(i.assignTexture(n,"specularColorMap",u.specularColorTexture,zt)),Promise.all(o)}}class Pw{constructor(t){this.parser=t,this.name=ye.EXT_MATERIALS_BUMP}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],u=s.extensions[this.name];return n.bumpScale=u.bumpFactor!==void 0?u.bumpFactor:1,u.bumpTexture!==void 0&&o.push(i.assignTexture(n,"bumpMap",u.bumpTexture)),Promise.all(o)}}class Fw{constructor(t){this.parser=t,this.name=ye.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:pn}extendMaterialParams(t,n){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],u=s.extensions[this.name];return u.anisotropyStrength!==void 0&&(n.anisotropy=u.anisotropyStrength),u.anisotropyRotation!==void 0&&(n.anisotropyRotation=u.anisotropyRotation),u.anisotropyTexture!==void 0&&o.push(i.assignTexture(n,"anisotropyMap",u.anisotropyTexture)),Promise.all(o)}}class Dw{constructor(t){this.parser=t,this.name=ye.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,i=n.json,s=i.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],u=n.options.ktx2Loader;if(!u){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,o.source,u)}}class Nw{constructor(t){this.parser=t,this.name=ye.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,i=this.parser,s=i.json,o=s.textures[t];if(!o.extensions||!o.extensions[n])return null;const u=o.extensions[n],l=s.images[u.source];let h=i.textureLoader;if(l.uri){const d=i.options.manager.getHandler(l.uri);d!==null&&(h=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(t,u.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class Bw{constructor(t){this.parser=t,this.name=ye.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,i=this.parser,s=i.json,o=s.textures[t];if(!o.extensions||!o.extensions[n])return null;const u=o.extensions[n],l=s.images[u.source];let h=i.textureLoader;if(l.uri){const d=i.options.manager.getHandler(l.uri);d!==null&&(h=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(t,u.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class kw{constructor(t){this.name=ye.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,i=n.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),u=this.parser.options.meshoptDecoder;if(!u||!u.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(l){const h=s.byteOffset||0,d=s.byteLength||0,m=s.count,p=s.byteStride,w=new Uint8Array(l,h,d);return u.decodeGltfBufferAsync?u.decodeGltfBufferAsync(m,p,w,s.mode,s.filter).then(function(v){return v.buffer}):u.ready.then(function(){const v=new ArrayBuffer(m*p);return u.decodeGltfBuffer(new Uint8Array(v),m,p,w,s.mode,s.filter),v})})}else return null}}class Uw{constructor(t){this.name=ye.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,i=n.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=n.meshes[i.mesh];for(const d of s.primitives)if(d.mode!==It.TRIANGLES&&d.mode!==It.TRIANGLE_STRIP&&d.mode!==It.TRIANGLE_FAN&&d.mode!==void 0)return null;const u=i.extensions[this.name].attributes,l=[],h={};for(const d in u)l.push(this.parser.getDependency("accessor",u[d]).then(m=>(h[d]=m,h[d])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(d=>{const m=d.pop(),p=m.isGroup?m.children:[m],w=d[0].count,v=[];for(const T of p){const b=new Ie,S=new ue,O=new Ot,D=new ue(1,1,1),B=new ly(T.geometry,T.material,w);for(let k=0;k<w;k++)h.TRANSLATION&&S.fromBufferAttribute(h.TRANSLATION,k),h.ROTATION&&O.fromBufferAttribute(h.ROTATION,k),h.SCALE&&D.fromBufferAttribute(h.SCALE,k),B.setMatrixAt(k,b.compose(S,O,D));for(const k in h)if(k==="_COLOR_0"){const $=h[k];B.instanceColor=new fy($.array,$.itemSize,$.normalized)}else k!=="TRANSLATION"&&k!=="ROTATION"&&k!=="SCALE"&&T.geometry.setAttribute(k,h[k]);Rr.prototype.copy.call(B,T),this.parser.assignFinalMaterial(B),v.push(B)}return m.isGroup?(m.clear(),m.add(...v),m):v[0]}))}}const tf="glTF",ti=12,El={JSON:1313821514,BIN:5130562};class Hw{constructor(t){this.name=ye.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,ti),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==tf)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-ti,o=new DataView(t,ti);let u=0;for(;u<s;){const l=o.getUint32(u,!0);u+=4;const h=o.getUint32(u,!0);if(u+=4,h===El.JSON){const d=new Uint8Array(t,ti+u,l);this.content=i.decode(d)}else if(h===El.BIN){const d=ti+u;this.body=t.slice(d,d+l)}u+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Gw{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ye.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const i=this.json,s=this.dracoLoader,o=t.extensions[this.name].bufferView,u=t.extensions[this.name].attributes,l={},h={},d={};for(const m in u){const p=pa[m]||m.toLowerCase();l[p]=u[m]}for(const m in t.attributes){const p=pa[m]||m.toLowerCase();if(u[m]!==void 0){const w=i.accessors[t.attributes[m]],v=Ir[w.componentType];d[p]=v.name,h[p]=w.normalized===!0}}return n.getDependency("bufferView",o).then(function(m){return new Promise(function(p,w){s.decodeDracoFile(m,function(v){for(const T in v.attributes){const b=v.attributes[T],S=h[T];S!==void 0&&(b.normalized=S)}p(v)},l,d,Ft,w)})})}}class jw{constructor(){this.name=ye.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class zw{constructor(){this.name=ye.KHR_MESH_QUANTIZATION}}class nf extends xy{constructor(t,n,i,s){super(t,n,i,s)}copySampleValue_(t){const n=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=t*s*3+s;for(let u=0;u!==s;u++)n[u]=i[o+u];return n}interpolate_(t,n,i,s){const o=this.resultBuffer,u=this.sampleValues,l=this.valueSize,h=l*2,d=l*3,m=s-n,p=(i-n)/m,w=p*p,v=w*p,T=t*d,b=T-d,S=-2*v+3*w,O=v-w,D=1-S,B=O-w+p;for(let k=0;k!==l;k++){const $=u[b+k+l],j=u[b+k+h]*m,H=u[T+k+l],U=u[T+k]*m;o[k]=D*$+B*j+S*H+O*U}return o}}const Ww=new Ot;class Kw extends nf{interpolate_(t,n,i,s){const o=super.interpolate_(t,n,i,s);return Ww.fromArray(o).normalize().toArray(o),o}}const It={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ir={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},xl={9728:gy,9729:Mn,9984:my,9985:_y,9986:yy,9987:Kl},bl={33071:aa,33648:wy,10497:Or},Vo={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pa={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Sn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Vw={CUBICSPLINE:void 0,LINEAR:Jl,STEP:vy},Xo={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Xw(a){return a.DefaultMaterial===void 0&&(a.DefaultMaterial=new Vl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:jl})),a.DefaultMaterial}function Yn(a,t,n){for(const i in n.extensions)a[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function Cn(a,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(a.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function qw(a,t,n){let i=!1,s=!1,o=!1;for(let d=0,m=t.length;d<m;d++){const p=t[d];if(p.POSITION!==void 0&&(i=!0),p.NORMAL!==void 0&&(s=!0),p.COLOR_0!==void 0&&(o=!0),i&&s&&o)break}if(!i&&!s&&!o)return Promise.resolve(a);const u=[],l=[],h=[];for(let d=0,m=t.length;d<m;d++){const p=t[d];if(i){const w=p.POSITION!==void 0?n.getDependency("accessor",p.POSITION):a.attributes.position;u.push(w)}if(s){const w=p.NORMAL!==void 0?n.getDependency("accessor",p.NORMAL):a.attributes.normal;l.push(w)}if(o){const w=p.COLOR_0!==void 0?n.getDependency("accessor",p.COLOR_0):a.attributes.color;h.push(w)}}return Promise.all([Promise.all(u),Promise.all(l),Promise.all(h)]).then(function(d){const m=d[0],p=d[1],w=d[2];return i&&(a.morphAttributes.position=m),s&&(a.morphAttributes.normal=p),o&&(a.morphAttributes.color=w),a.morphTargetsRelative=!0,a})}function Yw(a,t){if(a.updateMorphTargets(),t.weights!==void 0)for(let n=0,i=t.weights.length;n<i;n++)a.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(a.morphTargetInfluences.length===n.length){a.morphTargetDictionary={};for(let i=0,s=n.length;i<s;i++)a.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $w(a){let t;const n=a.extensions&&a.extensions[ye.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+qo(n.attributes):t=a.indices+":"+qo(a.attributes)+":"+a.mode,a.targets!==void 0)for(let i=0,s=a.targets.length;i<s;i++)t+=":"+qo(a.targets[i]);return t}function qo(a){let t="";const n=Object.keys(a).sort();for(let i=0,s=n.length;i<s;i++)t+=n[i]+":"+a[n[i]]+";";return t}function da(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Zw(a){return a.search(/\.jpe?g($|\?)/i)>0||a.search(/^data\:image\/jpeg/)===0?"image/jpeg":a.search(/\.webp($|\?)/i)>0||a.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Jw=new Ie;class Qw{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new Tw,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,o=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&o<98?this.textureLoader=new xs(this.options.manager):this.textureLoader=new hy(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Mr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const i=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(u){return u._markDefs&&u._markDefs()}),Promise.all(this._invokeAll(function(u){return u.beforeRoot&&u.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(u){const l={scene:u[0][s.scene||0],scenes:u[0],animations:u[1],cameras:u[2],asset:s.asset,parser:i,userData:{}};return Yn(o,l,s),Cn(l,s),Promise.all(i._invokeAll(function(h){return h.afterRoot&&h.afterRoot(l)})).then(function(){t(l)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let s=0,o=n.length;s<o;s++){const u=n[s].joints;for(let l=0,h=u.length;l<h;l++)t[u[l]].isBone=!0}for(let s=0,o=t.length;s<o;s++){const u=t[s];u.mesh!==void 0&&(this._addNodeRef(this.meshCache,u.mesh),u.skin!==void 0&&(i[u.mesh].isSkinnedMesh=!0)),u.camera!==void 0&&this._addNodeRef(this.cameraCache,u.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,i){if(t.refs[n]<=1)return i;const s=i.clone(),o=(u,l)=>{const h=this.associations.get(u);h!=null&&this.associations.set(l,h);for(const[d,m]of u.children.entries())o(m,l.children[d])};return o(i,s),s.name+="_instance_"+t.uses[n]++,s}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const s=t(n[i]);if(s)return s}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let s=0;s<n.length;s++){const o=t(n[s]);o&&i.push(o)}return i}getDependency(t,n){const i=t+":"+n;let s=this.cache.get(i);if(!s){switch(t){case"scene":s=this.loadScene(n);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":s=this.loadAccessor(n);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":s=this.loadBuffer(n);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":s=this.loadSkin(n);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":s=this.loadCamera(n);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,n)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(i,s)}return s}getDependencies(t){let n=this.cache.get(t);if(!n){const i=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(s.map(function(o,u){return i.getDependency(t,u)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[ye.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,u){i.load(Zn.resolveURL(n.uri,s.path),o,void 0,function(){u(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(i){const s=n.byteLength||0,o=n.byteOffset||0;return i.slice(o,o+s)})}loadAccessor(t){const n=this,i=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const u=Vo[s.type],l=Ir[s.componentType],h=s.normalized===!0,d=new l(s.count*u);return Promise.resolve(new zo(d,u,h))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(u){const l=u[0],h=Vo[s.type],d=Ir[s.componentType],m=d.BYTES_PER_ELEMENT,p=m*h,w=s.byteOffset||0,v=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,T=s.normalized===!0;let b,S;if(v&&v!==p){const O=Math.floor(w/v),D="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+O+":"+s.count;let B=n.cache.get(D);B||(b=new d(l,O*v,s.count*v/m),B=new py(b,v/m),n.cache.add(D,B)),S=new Ay(B,h,w%v/m,T)}else l===null?b=new d(s.count*h):b=new d(l,w,s.count*h),S=new zo(b,h,T);if(s.sparse!==void 0){const O=Vo.SCALAR,D=Ir[s.sparse.indices.componentType],B=s.sparse.indices.byteOffset||0,k=s.sparse.values.byteOffset||0,$=new D(u[1],B,s.sparse.count*O),j=new d(u[2],k,s.sparse.count*h);l!==null&&(S=new zo(S.array.slice(),S.itemSize,S.normalized));for(let H=0,U=$.length;H<U;H++){const X=$[H];if(S.setX(X,j[H*h]),h>=2&&S.setY(X,j[H*h+1]),h>=3&&S.setZ(X,j[H*h+2]),h>=4&&S.setW(X,j[H*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return S})}loadTexture(t){const n=this.json,i=this.options,o=n.textures[t].source,u=n.images[o];let l=this.textureLoader;if(u.uri){const h=i.manager.getHandler(u.uri);h!==null&&(l=h)}return this.loadTextureImage(t,o,l)}loadTextureImage(t,n,i){const s=this,o=this.json,u=o.textures[t],l=o.images[n],h=(l.uri||l.bufferView)+":"+u.sampler;if(this.textureCache[h])return this.textureCache[h];const d=this.loadImageSource(n,i).then(function(m){m.flipY=!1,m.name=u.name||l.name||"",m.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(m.name=l.uri);const w=(o.samplers||{})[u.sampler]||{};return m.magFilter=xl[w.magFilter]||Mn,m.minFilter=xl[w.minFilter]||Kl,m.wrapS=bl[w.wrapS]||Or,m.wrapT=bl[w.wrapT]||Or,s.associations.set(m,{textures:t}),m}).catch(function(){return null});return this.textureCache[h]=d,d}loadImageSource(t,n){const i=this,s=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(p=>p.clone());const u=s.images[t],l=self.URL||self.webkitURL;let h=u.uri||"",d=!1;if(u.bufferView!==void 0)h=i.getDependency("bufferView",u.bufferView).then(function(p){d=!0;const w=new Blob([p],{type:u.mimeType});return h=l.createObjectURL(w),h});else if(u.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const m=Promise.resolve(h).then(function(p){return new Promise(function(w,v){let T=w;n.isImageBitmapLoader===!0&&(T=function(b){const S=new ci(b);S.needsUpdate=!0,w(S)}),n.load(Zn.resolveURL(p,o.path),T,void 0,v)})}).then(function(p){return d===!0&&l.revokeObjectURL(h),p.userData.mimeType=u.mimeType||Zw(u.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),p});return this.sourceCache[t]=m,m}assignTexture(t,n,i,s){const o=this;return this.getDependency("texture",i.index).then(function(u){if(!u)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(u=u.clone(),u.channel=i.texCoord),o.extensions[ye.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[ye.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const h=o.associations.get(u);u=o.extensions[ye.KHR_TEXTURE_TRANSFORM].extendTexture(u,l),o.associations.set(u,h)}}return s!==void 0&&(u.colorSpace=s),t[n]=u,u})}assignFinalMaterial(t){const n=t.geometry;let i=t.material;const s=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,u=n.attributes.normal===void 0;if(t.isPoints){const l="PointsMaterial:"+i.uuid;let h=this.cache.get(l);h||(h=new ri,oi.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,h.sizeAttenuation=!1,this.cache.add(l,h)),i=h}else if(t.isLine){const l="LineBasicMaterial:"+i.uuid;let h=this.cache.get(l);h||(h=new si,oi.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,this.cache.add(l,h)),i=h}if(s||o||u){let l="ClonedMaterial:"+i.uuid+":";s&&(l+="derivative-tangents:"),o&&(l+="vertex-colors:"),u&&(l+="flat-shading:");let h=this.cache.get(l);h||(h=i.clone(),o&&(h.vertexColors=!0),u&&(h.flatShading=!0),s&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(l,h),this.associations.set(h,this.associations.get(i))),i=h}t.material=i}getMaterialType(){return Vl}loadMaterial(t){const n=this,i=this.json,s=this.extensions,o=i.materials[t];let u;const l={},h=o.extensions||{},d=[];if(h[ye.KHR_MATERIALS_UNLIT]){const p=s[ye.KHR_MATERIALS_UNLIT];u=p.getMaterialType(),d.push(p.extendParams(l,o,n))}else{const p=o.pbrMetallicRoughness||{};if(l.color=new ze(1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){const w=p.baseColorFactor;l.color.setRGB(w[0],w[1],w[2],Ft),l.opacity=w[3]}p.baseColorTexture!==void 0&&d.push(n.assignTexture(l,"map",p.baseColorTexture,zt)),l.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,l.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(d.push(n.assignTexture(l,"metalnessMap",p.metallicRoughnessTexture)),d.push(n.assignTexture(l,"roughnessMap",p.metallicRoughnessTexture))),u=this._invokeOne(function(w){return w.getMaterialType&&w.getMaterialType(t)}),d.push(Promise.all(this._invokeAll(function(w){return w.extendMaterialParams&&w.extendMaterialParams(t,l)})))}o.doubleSided===!0&&(l.side=Xl);const m=o.alphaMode||Xo.OPAQUE;if(m===Xo.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===Xo.MASK&&(l.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&u!==ii&&(d.push(n.assignTexture(l,"normalMap",o.normalTexture)),l.normalScale=new Ye(1,1),o.normalTexture.scale!==void 0)){const p=o.normalTexture.scale;l.normalScale.set(p,p)}if(o.occlusionTexture!==void 0&&u!==ii&&(d.push(n.assignTexture(l,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&u!==ii){const p=o.emissiveFactor;l.emissive=new ze().setRGB(p[0],p[1],p[2],Ft)}return o.emissiveTexture!==void 0&&u!==ii&&d.push(n.assignTexture(l,"emissiveMap",o.emissiveTexture,zt)),Promise.all(d).then(function(){const p=new u(l);return o.name&&(p.name=o.name),Cn(p,o),n.associations.set(p,{materials:t}),o.extensions&&Yn(s,p,o),p})}createUniqueName(t){const n=fi.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,i=this.extensions,s=this.primitiveCache;function o(l){return i[ye.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,n).then(function(h){return Rl(h,l,n)})}const u=[];for(let l=0,h=t.length;l<h;l++){const d=t[l],m=$w(d),p=s[m];if(p)u.push(p.promise);else{let w;d.extensions&&d.extensions[ye.KHR_DRACO_MESH_COMPRESSION]?w=o(d):w=Rl(new Sr,d,n),s[m]={primitive:d,promise:w},u.push(w)}}return Promise.all(u)}loadMesh(t){const n=this,i=this.json,s=this.extensions,o=i.meshes[t],u=o.primitives,l=[];for(let h=0,d=u.length;h<d;h++){const m=u[h].material===void 0?Xw(this.cache):this.getDependency("material",u[h].material);l.push(m)}return l.push(n.loadGeometries(u)),Promise.all(l).then(function(h){const d=h.slice(0,h.length-1),m=h[h.length-1],p=[];for(let v=0,T=m.length;v<T;v++){const b=m[v],S=u[v];let O;const D=d[v];if(S.mode===It.TRIANGLES||S.mode===It.TRIANGLE_STRIP||S.mode===It.TRIANGLE_FAN||S.mode===void 0)O=o.isSkinnedMesh===!0?new ql(b,D):new li(b,D),O.isSkinnedMesh===!0&&O.normalizeSkinWeights(),S.mode===It.TRIANGLE_STRIP?O.geometry=_l(O.geometry,Gl):S.mode===It.TRIANGLE_FAN&&(O.geometry=_l(O.geometry,ra));else if(S.mode===It.LINES)O=new ia(b,D);else if(S.mode===It.LINE_STRIP)O=new Yl(b,D);else if(S.mode===It.LINE_LOOP)O=new dy(b,D);else if(S.mode===It.POINTS)O=new ms(b,D);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);Object.keys(O.geometry.morphAttributes).length>0&&Yw(O,o),O.name=n.createUniqueName(o.name||"mesh_"+t),Cn(O,o),S.extensions&&Yn(s,O,S),n.assignFinalMaterial(O),p.push(O)}for(let v=0,T=p.length;v<T;v++)n.associations.set(p[v],{meshes:t,primitives:v});if(p.length===1)return o.extensions&&Yn(s,p[0],o),p[0];const w=new Fn;o.extensions&&Yn(s,w,o),n.associations.set(w,{meshes:t});for(let v=0,T=p.length;v<T;v++)w.add(p[v]);return w})}loadCamera(t){let n;const i=this.json.cameras[t],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new Ea(Qe.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(n=new $l(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Cn(n,i),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],i=[];for(let s=0,o=n.joints.length;s<o;s++)i.push(this._loadNodeShallow(n.joints[s]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const o=s.pop(),u=s,l=[],h=[];for(let d=0,m=u.length;d<m;d++){const p=u[d];if(p){l.push(p);const w=new Ie;o!==null&&w.fromArray(o.array,d*16),h.push(w)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[d])}return new Zl(l,h)})}loadAnimation(t){const n=this.json,i=this,s=n.animations[t],o=s.name?s.name:"animation_"+t,u=[],l=[],h=[],d=[],m=[];for(let p=0,w=s.channels.length;p<w;p++){const v=s.channels[p],T=s.samplers[v.sampler],b=v.target,S=b.node,O=s.parameters!==void 0?s.parameters[T.input]:T.input,D=s.parameters!==void 0?s.parameters[T.output]:T.output;b.node!==void 0&&(u.push(this.getDependency("node",S)),l.push(this.getDependency("accessor",O)),h.push(this.getDependency("accessor",D)),d.push(T),m.push(b))}return Promise.all([Promise.all(u),Promise.all(l),Promise.all(h),Promise.all(d),Promise.all(m)]).then(function(p){const w=p[0],v=p[1],T=p[2],b=p[3],S=p[4],O=[];for(let D=0,B=w.length;D<B;D++){const k=w[D],$=v[D],j=T[D],H=b[D],U=S[D];if(k===void 0)continue;k.updateMatrix&&k.updateMatrix();const X=i._createAnimationTracks(k,$,j,H,U);if(X)for(let V=0;V<X.length;V++)O.push(X[V])}return new xa(o,void 0,O)})}createNodeMesh(t){const n=this.json,i=this,s=n.nodes[t];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(o){const u=i._getNodeRef(i.meshCache,s.mesh,o);return s.weights!==void 0&&u.traverse(function(l){if(l.isMesh)for(let h=0,d=s.weights.length;h<d;h++)l.morphTargetInfluences[h]=s.weights[h]}),u})}loadNode(t){const n=this.json,i=this,s=n.nodes[t],o=i._loadNodeShallow(t),u=[],l=s.children||[];for(let d=0,m=l.length;d<m;d++)u.push(i.getDependency("node",l[d]));const h=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([o,Promise.all(u),h]).then(function(d){const m=d[0],p=d[1],w=d[2];w!==null&&m.traverse(function(v){v.isSkinnedMesh&&v.bind(w,Jw)});for(let v=0,T=p.length;v<T;v++)m.add(p[v]);return m})}_loadNodeShallow(t){const n=this.json,i=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=n.nodes[t],u=o.name?s.createUniqueName(o.name):"",l=[],h=s._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(t)});return h&&l.push(h),o.camera!==void 0&&l.push(s.getDependency("camera",o.camera).then(function(d){return s._getNodeRef(s.cameraCache,o.camera,d)})),s._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(t)}).forEach(function(d){l.push(d)}),this.nodeCache[t]=Promise.all(l).then(function(d){let m;if(o.isBone===!0?m=new oa:d.length>1?m=new Fn:d.length===1?m=d[0]:m=new Rr,m!==d[0])for(let p=0,w=d.length;p<w;p++)m.add(d[p]);if(o.name&&(m.userData.name=o.name,m.name=u),Cn(m,o),o.extensions&&Yn(i,m,o),o.matrix!==void 0){const p=new Ie;p.fromArray(o.matrix),m.applyMatrix4(p)}else o.translation!==void 0&&m.position.fromArray(o.translation),o.rotation!==void 0&&m.quaternion.fromArray(o.rotation),o.scale!==void 0&&m.scale.fromArray(o.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=t,m}),this.nodeCache[t]}loadScene(t){const n=this.extensions,i=this.json.scenes[t],s=this,o=new Fn;i.name&&(o.name=s.createUniqueName(i.name)),Cn(o,i),i.extensions&&Yn(n,o,i);const u=i.nodes||[],l=[];for(let h=0,d=u.length;h<d;h++)l.push(s.getDependency("node",u[h]));return Promise.all(l).then(function(h){for(let m=0,p=h.length;m<p;m++)o.add(h[m]);const d=m=>{const p=new Map;for(const[w,v]of s.associations)(w instanceof oi||w instanceof ci)&&p.set(w,v);return m.traverse(w=>{const v=s.associations.get(w);v!=null&&p.set(w,v)}),p};return s.associations=d(o),o})}_createAnimationTracks(t,n,i,s,o){const u=[],l=t.name?t.name:t.uuid,h=[];Sn[o.path]===Sn.weights?t.traverse(function(w){w.morphTargetInfluences&&h.push(w.name?w.name:w.uuid)}):h.push(l);let d;switch(Sn[o.path]){case Sn.weights:d=ua;break;case Sn.rotation:d=As;break;case Sn.position:case Sn.scale:d=ca;break;default:switch(i.itemSize){case 1:d=ua;break;case 2:case 3:default:d=ca;break}break}const m=s.interpolation!==void 0?Vw[s.interpolation]:Jl,p=this._getArrayFromAccessor(i);for(let w=0,v=h.length;w<v;w++){const T=new d(h[w]+"."+Sn[o.path],n.array,p,m);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(T),u.push(T)}return u}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const i=da(n.constructor),s=new Float32Array(n.length);for(let o=0,u=n.length;o<u;o++)s[o]=n[o]*i;n=s}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){const s=this instanceof As?Kw:nf;return new s(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ev(a,t,n){const i=t.attributes,s=new Ty;if(i.POSITION!==void 0){const l=n.json.accessors[i.POSITION],h=l.min,d=l.max;if(h!==void 0&&d!==void 0){if(s.set(new ue(h[0],h[1],h[2]),new ue(d[0],d[1],d[2])),l.normalized){const m=da(Ir[l.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const l=new ue,h=new ue;for(let d=0,m=o.length;d<m;d++){const p=o[d];if(p.POSITION!==void 0){const w=n.json.accessors[p.POSITION],v=w.min,T=w.max;if(v!==void 0&&T!==void 0){if(h.setX(Math.max(Math.abs(v[0]),Math.abs(T[0]))),h.setY(Math.max(Math.abs(v[1]),Math.abs(T[1]))),h.setZ(Math.max(Math.abs(v[2]),Math.abs(T[2]))),w.normalized){const b=da(Ir[w.componentType]);h.multiplyScalar(b)}l.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}a.boundingBox=s;const u=new Ey;s.getCenter(u.center),u.radius=s.min.distanceTo(s.max)/2,a.boundingSphere=u}function Rl(a,t,n){const i=t.attributes,s=[];function o(u,l){return n.getDependency("accessor",u).then(function(h){a.setAttribute(l,h)})}for(const u in i){const l=pa[u]||u.toLowerCase();l in a.attributes||s.push(o(i[u],l))}if(t.indices!==void 0&&!a.index){const u=n.getDependency("accessor",t.indices).then(function(l){a.setIndex(l)});s.push(u)}return al.workingColorSpace!==Ft&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${al.workingColorSpace}" not supported.`),Cn(a,t),ev(a,t,n),Promise.all(s).then(function(){return t.targets!==void 0?qw(a,t.targets,n):a})}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var Sl=function(a){return URL.createObjectURL(new Blob([a],{type:"text/javascript"}))};try{URL.revokeObjectURL(Sl(""))}catch{Sl=function(t){return"data:application/javascript;charset=UTF-8,"+encodeURI(t)}}var Mt=Uint8Array,Pn=Uint16Array,ga=Uint32Array,rf=new Mt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sf=new Mt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tv=new Mt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),of=function(a,t){for(var n=new Pn(31),i=0;i<31;++i)n[i]=t+=1<<a[i-1];for(var s=new ga(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)s[o]=o-n[i]<<5|i;return[n,s]},af=of(rf,2),cf=af[0],nv=af[1];cf[28]=258,nv[258]=28;var rv=of(sf,0),iv=rv[0],ma=new Pn(32768);for(var Pe=0;Pe<32768;++Pe){var Ln=(Pe&43690)>>>1|(Pe&21845)<<1;Ln=(Ln&52428)>>>2|(Ln&13107)<<2,Ln=(Ln&61680)>>>4|(Ln&3855)<<4,ma[Pe]=((Ln&65280)>>>8|(Ln&255)<<8)>>>1}var ui=function(a,t,n){for(var i=a.length,s=0,o=new Pn(t);s<i;++s)++o[a[s]-1];var u=new Pn(t);for(s=0;s<t;++s)u[s]=u[s-1]+o[s-1]<<1;var l;if(n){l=new Pn(1<<t);var h=15-t;for(s=0;s<i;++s)if(a[s])for(var d=s<<4|a[s],m=t-a[s],p=u[a[s]-1]++<<m,w=p|(1<<m)-1;p<=w;++p)l[ma[p]>>>h]=d}else for(l=new Pn(i),s=0;s<i;++s)a[s]&&(l[s]=ma[u[a[s]-1]++]>>>15-a[s]);return l},pi=new Mt(288);for(var Pe=0;Pe<144;++Pe)pi[Pe]=8;for(var Pe=144;Pe<256;++Pe)pi[Pe]=9;for(var Pe=256;Pe<280;++Pe)pi[Pe]=7;for(var Pe=280;Pe<288;++Pe)pi[Pe]=8;var uf=new Mt(32);for(var Pe=0;Pe<32;++Pe)uf[Pe]=5;var sv=ui(pi,9,1),ov=ui(uf,5,1),Yo=function(a){for(var t=a[0],n=1;n<a.length;++n)a[n]>t&&(t=a[n]);return t},jt=function(a,t,n){var i=t/8|0;return(a[i]|a[i+1]<<8)>>(t&7)&n},$o=function(a,t){var n=t/8|0;return(a[n]|a[n+1]<<8|a[n+2]<<16)>>(t&7)},av=function(a){return(a/8|0)+(a&7&&1)},cv=function(a,t,n){(t==null||t<0)&&(t=0),(n==null||n>a.length)&&(n=a.length);var i=new(a instanceof Pn?Pn:a instanceof ga?ga:Mt)(n-t);return i.set(a.subarray(t,n)),i},uv=function(a,t,n){var i=a.length;if(!i||n&&!n.l&&i<5)return t||new Mt(0);var s=!t||n,o=!n||n.i;n||(n={}),t||(t=new Mt(i*3));var u=function(je){var en=t.length;if(je>en){var ht=new Mt(Math.max(en*2,je));ht.set(t),t=ht}},l=n.f||0,h=n.p||0,d=n.b||0,m=n.l,p=n.d,w=n.m,v=n.n,T=i*8;do{if(!m){n.f=l=jt(a,h,1);var b=jt(a,h+1,3);if(h+=3,b)if(b==1)m=sv,p=ov,w=9,v=5;else if(b==2){var B=jt(a,h,31)+257,k=jt(a,h+10,15)+4,$=B+jt(a,h+5,31)+1;h+=14;for(var j=new Mt($),H=new Mt(19),U=0;U<k;++U)H[tv[U]]=jt(a,h+U*3,7);h+=k*3;for(var X=Yo(H),V=(1<<X)-1,de=ui(H,X,1),U=0;U<$;){var le=de[jt(a,h,V)];h+=le&15;var S=le>>>4;if(S<16)j[U++]=S;else{var se=0,te=0;for(S==16?(te=3+jt(a,h,3),h+=2,se=j[U-1]):S==17?(te=3+jt(a,h,7),h+=3):S==18&&(te=11+jt(a,h,127),h+=7);te--;)j[U++]=se}}var xe=j.subarray(0,B),ne=j.subarray(B);w=Yo(xe),v=Yo(ne),m=ui(xe,w,1),p=ui(ne,v,1)}else throw"invalid block type";else{var S=av(h)+4,O=a[S-4]|a[S-3]<<8,D=S+O;if(D>i){if(o)throw"unexpected EOF";break}s&&u(d+O),t.set(a.subarray(S,D),d),n.b=d+=O,n.p=h=D*8;continue}if(h>T){if(o)throw"unexpected EOF";break}}s&&u(d+131072);for(var De=(1<<w)-1,J=(1<<v)-1,K=h;;K=h){var se=m[$o(a,h)&De],Y=se>>>4;if(h+=se&15,h>T){if(o)throw"unexpected EOF";break}if(!se)throw"invalid length/literal";if(Y<256)t[d++]=Y;else if(Y==256){K=h,m=null;break}else{var fe=Y-254;if(Y>264){var U=Y-257,ve=rf[U];fe=jt(a,h,(1<<ve)-1)+cf[U],h+=ve}var oe=p[$o(a,h)&J],Se=oe>>>4;if(!oe)throw"invalid distance";h+=oe&15;var ne=iv[Se];if(Se>3){var ve=sf[Se];ne+=$o(a,h)&(1<<ve)-1,h+=ve}if(h>T){if(o)throw"unexpected EOF";break}s&&u(d+131072);for(var Ge=d+fe;d<Ge;d+=4)t[d]=t[d-ne],t[d+1]=t[d+1-ne],t[d+2]=t[d+2-ne],t[d+3]=t[d+3-ne];d=Ge}}n.l=m,n.p=K,n.b=d,m&&(l=1,n.m=w,n.d=p,n.n=v)}while(!l);return d==t.length?t:cv(t,0,d)},lv=new Mt(0),fv=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function hv(a,t){return uv((fv(a),a.subarray(2,-4)),t)}var pv=typeof TextDecoder<"u"&&new TextDecoder,dv=0;try{pv.decode(lv,{stream:!0}),dv=1}catch{}function lf(a,t,n){const i=n.length-a-1;if(t>=n[i])return i-1;if(t<=n[a])return a;let s=a,o=i,u=Math.floor((s+o)/2);for(;t<n[u]||t>=n[u+1];)t<n[u]?o=u:s=u,u=Math.floor((s+o)/2);return u}function gv(a,t,n,i){const s=[],o=[],u=[];s[0]=1;for(let l=1;l<=n;++l){o[l]=t-i[a+1-l],u[l]=i[a+l]-t;let h=0;for(let d=0;d<l;++d){const m=u[d+1],p=o[l-d],w=s[d]/(m+p);s[d]=h+m*w,h=p*w}s[l]=h}return s}function mv(a,t,n,i){const s=lf(a,i,t),o=gv(s,i,a,t),u=new bs(0,0,0,0);for(let l=0;l<=a;++l){const h=n[s-a+l],d=o[l],m=h.w*d;u.x+=h.x*m,u.y+=h.y*m,u.z+=h.z*m,u.w+=h.w*d}return u}function _v(a,t,n,i,s){const o=[];for(let p=0;p<=n;++p)o[p]=0;const u=[];for(let p=0;p<=i;++p)u[p]=o.slice(0);const l=[];for(let p=0;p<=n;++p)l[p]=o.slice(0);l[0][0]=1;const h=o.slice(0),d=o.slice(0);for(let p=1;p<=n;++p){h[p]=t-s[a+1-p],d[p]=s[a+p]-t;let w=0;for(let v=0;v<p;++v){const T=d[v+1],b=h[p-v];l[p][v]=T+b;const S=l[v][p-1]/l[p][v];l[v][p]=w+T*S,w=b*S}l[p][p]=w}for(let p=0;p<=n;++p)u[0][p]=l[p][n];for(let p=0;p<=n;++p){let w=0,v=1;const T=[];for(let b=0;b<=n;++b)T[b]=o.slice(0);T[0][0]=1;for(let b=1;b<=i;++b){let S=0;const O=p-b,D=n-b;p>=b&&(T[v][0]=T[w][0]/l[D+1][O],S=T[v][0]*l[O][D]);const B=O>=-1?1:-O,k=p-1<=D?b-1:n-p;for(let j=B;j<=k;++j)T[v][j]=(T[w][j]-T[w][j-1])/l[D+1][O+j],S+=T[v][j]*l[O+j][D];p<=D&&(T[v][b]=-T[w][b-1]/l[D+1][p],S+=T[v][b]*l[p][D]),u[b][p]=S;const $=w;w=v,v=$}}let m=n;for(let p=1;p<=i;++p){for(let w=0;w<=n;++w)u[p][w]*=m;m*=n-p}return u}function yv(a,t,n,i,s){const o=s<a?s:a,u=[],l=lf(a,i,t),h=_v(l,i,a,o,t),d=[];for(let m=0;m<n.length;++m){const p=n[m].clone(),w=p.w;p.x*=w,p.y*=w,p.z*=w,d[m]=p}for(let m=0;m<=o;++m){const p=d[l-a].clone().multiplyScalar(h[m][0]);for(let w=1;w<=a;++w)p.add(d[l-a+w].clone().multiplyScalar(h[m][w]));u[m]=p}for(let m=o+1;m<=s+1;++m)u[m]=new bs(0,0,0);return u}function wv(a,t){let n=1;for(let s=2;s<=a;++s)n*=s;let i=1;for(let s=2;s<=t;++s)i*=s;for(let s=2;s<=a-t;++s)i*=s;return n/i}function vv(a){const t=a.length,n=[],i=[];for(let o=0;o<t;++o){const u=a[o];n[o]=new ue(u.x,u.y,u.z),i[o]=u.w}const s=[];for(let o=0;o<t;++o){const u=n[o].clone();for(let l=1;l<=o;++l)u.sub(s[o-l].clone().multiplyScalar(wv(o,l)*i[l]));s[o]=u.divideScalar(i[0])}return s}function Av(a,t,n,i,s){const o=yv(a,t,n,i,s);return vv(o)}class Tv extends by{constructor(t,n,i,s,o){super(),this.degree=t,this.knots=n,this.controlPoints=[],this.startKnot=s||0,this.endKnot=o||this.knots.length-1;for(let u=0;u<i.length;++u){const l=i[u];this.controlPoints[u]=new bs(l.x,l.y,l.z,l.w)}}getPoint(t,n=new ue){const i=n,s=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=mv(this.degree,this.knots,this.controlPoints,s);return o.w!==1&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(t,n=new ue){const i=n,s=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),o=Av(this.degree,this.knots,this.controlPoints,s,1);return i.copy(o[1]).normalize(),i}}let pe,He,st;class Ev extends Jn{constructor(t){super(t)}load(t,n,i,s){const o=this,u=o.path===""?Zn.extractUrlBase(t):o.path,l=new Mr(this.manager);l.setPath(o.path),l.setResponseType("arraybuffer"),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(t,function(h){try{n(o.parse(h,u))}catch(d){s?s(d):console.error(d),o.manager.itemError(t)}},i,s)}parse(t,n){if(Iv(t))pe=new Lv().parse(t);else{const s=df(t);if(!Ov(s))throw new Error("THREE.FBXLoader: Unknown format.");if(Il(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Il(s));pe=new Sv().parse(s)}const i=new xs(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new xv(i,this.manager).parse(pe)}}class xv{constructor(t,n){this.textureLoader=t,this.manager=n}parse(){He=this.parseConnections();const t=this.parseImages(),n=this.parseTextures(t),i=this.parseMaterials(n),s=this.parseDeformers(),o=new bv().parse(s);return this.parseScene(s,o,i),st}parseConnections(){const t=new Map;return"Connections"in pe&&pe.Connections.connections.forEach(function(i){const s=i[0],o=i[1],u=i[2];t.has(s)||t.set(s,{parents:[],children:[]});const l={ID:o,relationship:u};t.get(s).parents.push(l),t.has(o)||t.set(o,{parents:[],children:[]});const h={ID:s,relationship:u};t.get(o).children.push(h)}),t}parseImages(){const t={},n={};if("Video"in pe.Objects){const i=pe.Objects.Video;for(const s in i){const o=i[s],u=parseInt(s);if(t[u]=o.RelativeFilename||o.Filename,"Content"in o){const l=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,h=typeof o.Content=="string"&&o.Content!=="";if(l||h){const d=this.parseImage(i[s]);n[o.RelativeFilename||o.Filename]=d}}}}for(const i in t){const s=t[i];n[s]!==void 0?t[i]=n[s]:t[i]=t[i].split("\\").pop()}return t}parseImage(t){const n=t.Content,i=t.RelativeFilename||t.Filename,s=i.slice(i.lastIndexOf(".")+1).toLowerCase();let o;switch(s){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof n=="string")return"data:"+o+";base64,"+n;{const u=new Uint8Array(n);return window.URL.createObjectURL(new Blob([u],{type:o}))}}parseTextures(t){const n=new Map;if("Texture"in pe.Objects){const i=pe.Objects.Texture;for(const s in i){const o=this.parseTexture(i[s],t);n.set(parseInt(s),o)}}return n}parseTexture(t,n){const i=this.loadTexture(t,n);i.ID=t.id,i.name=t.attrName;const s=t.WrapModeU,o=t.WrapModeV,u=s!==void 0?s.value:0,l=o!==void 0?o.value:0;if(i.wrapS=u===0?Or:aa,i.wrapT=l===0?Or:aa,"Scaling"in t){const h=t.Scaling.value;i.repeat.x=h[0],i.repeat.y=h[1]}if("Translation"in t){const h=t.Translation.value;i.offset.x=h[0],i.offset.y=h[1]}return i}loadTexture(t,n){let i;const s=this.textureLoader.path,o=He.get(t.id).children;o!==void 0&&o.length>0&&n[o[0].ID]!==void 0&&(i=n[o[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let u;const l=t.FileName.slice(-3).toLowerCase();if(l==="tga"){const h=this.manager.getHandler(".tga");h===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),u=new ci):(h.setPath(this.textureLoader.path),u=h.load(i))}else if(l==="dds"){const h=this.manager.getHandler(".dds");h===null?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",t.RelativeFilename),u=new ci):(h.setPath(this.textureLoader.path),u=h.load(i))}else l==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),u=new ci):u=this.textureLoader.load(i);return this.textureLoader.setPath(s),u}parseMaterials(t){const n=new Map;if("Material"in pe.Objects){const i=pe.Objects.Material;for(const s in i){const o=this.parseMaterial(i[s],t);o!==null&&n.set(parseInt(s),o)}}return n}parseMaterial(t,n){const i=t.id,s=t.attrName;let o=t.ShadingModel;if(typeof o=="object"&&(o=o.value),!He.has(i))return null;const u=this.parseParameters(t,n,i);let l;switch(o.toLowerCase()){case"phong":l=new ai;break;case"lambert":l=new Ry;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),l=new ai;break}return l.setValues(u),l.name=s,l}parseParameters(t,n,i){const s={};t.BumpFactor&&(s.bumpScale=t.BumpFactor.value),t.Diffuse?s.color=new ze().fromArray(t.Diffuse.value).convertSRGBToLinear():t.DiffuseColor&&(t.DiffuseColor.type==="Color"||t.DiffuseColor.type==="ColorRGB")&&(s.color=new ze().fromArray(t.DiffuseColor.value).convertSRGBToLinear()),t.DisplacementFactor&&(s.displacementScale=t.DisplacementFactor.value),t.Emissive?s.emissive=new ze().fromArray(t.Emissive.value).convertSRGBToLinear():t.EmissiveColor&&(t.EmissiveColor.type==="Color"||t.EmissiveColor.type==="ColorRGB")&&(s.emissive=new ze().fromArray(t.EmissiveColor.value).convertSRGBToLinear()),t.EmissiveFactor&&(s.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(s.opacity=parseFloat(t.Opacity.value)),s.opacity<1&&(s.transparent=!0),t.ReflectionFactor&&(s.reflectivity=t.ReflectionFactor.value),t.Shininess&&(s.shininess=t.Shininess.value),t.Specular?s.specular=new ze().fromArray(t.Specular.value).convertSRGBToLinear():t.SpecularColor&&t.SpecularColor.type==="Color"&&(s.specular=new ze().fromArray(t.SpecularColor.value).convertSRGBToLinear());const o=this;return He.get(i).children.forEach(function(u){const l=u.relationship;switch(l){case"Bump":s.bumpMap=o.getTexture(n,u.ID);break;case"Maya|TEX_ao_map":s.aoMap=o.getTexture(n,u.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=o.getTexture(n,u.ID),s.map!==void 0&&(s.map.colorSpace=zt);break;case"DisplacementColor":s.displacementMap=o.getTexture(n,u.ID);break;case"EmissiveColor":s.emissiveMap=o.getTexture(n,u.ID),s.emissiveMap!==void 0&&(s.emissiveMap.colorSpace=zt);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=o.getTexture(n,u.ID);break;case"ReflectionColor":s.envMap=o.getTexture(n,u.ID),s.envMap!==void 0&&(s.envMap.mapping=Sy,s.envMap.colorSpace=zt);break;case"SpecularColor":s.specularMap=o.getTexture(n,u.ID),s.specularMap!==void 0&&(s.specularMap.colorSpace=zt);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=o.getTexture(n,u.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",l);break}}),s}getTexture(t,n){return"LayeredTexture"in pe.Objects&&n in pe.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=He.get(n).children[0].ID),t.get(n)}parseDeformers(){const t={},n={};if("Deformer"in pe.Objects){const i=pe.Objects.Deformer;for(const s in i){const o=i[s],u=He.get(parseInt(s));if(o.attrType==="Skin"){const l=this.parseSkeleton(u,i);l.ID=s,u.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=u.parents[0].ID,t[s]=l}else if(o.attrType==="BlendShape"){const l={id:s};l.rawTargets=this.parseMorphTargets(u,i),l.id=s,u.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[s]=l}}}return{skeletons:t,morphTargets:n}}parseSkeleton(t,n){const i=[];return t.children.forEach(function(s){const o=n[s.ID];if(o.attrType!=="Cluster")return;const u={ID:s.ID,indices:[],weights:[],transformLink:new Ie().fromArray(o.TransformLink.a)};"Indexes"in o&&(u.indices=o.Indexes.a,u.weights=o.Weights.a),i.push(u)}),{rawBones:i,bones:[]}}parseMorphTargets(t,n){const i=[];for(let s=0;s<t.children.length;s++){const o=t.children[s],u=n[o.ID],l={name:u.attrName,initialWeight:u.DeformPercent,id:u.id,fullWeights:u.FullWeights.a};if(u.attrType!=="BlendShapeChannel")return;l.geoID=He.get(parseInt(o.ID)).children.filter(function(h){return h.relationship===void 0})[0].ID,i.push(l)}return i}parseScene(t,n,i){st=new Fn;const s=this.parseModels(t.skeletons,n,i),o=pe.Objects.Model,u=this;s.forEach(function(h){const d=o[h.ID];u.setLookAtProperties(h,d),He.get(h.ID).parents.forEach(function(p){const w=s.get(p.ID);w!==void 0&&w.add(h)}),h.parent===null&&st.add(h)}),this.bindSkeleton(t.skeletons,n,s),this.addGlobalSceneSettings(),st.traverse(function(h){if(h.userData.transformData){h.parent&&(h.userData.transformData.parentMatrix=h.parent.matrix,h.userData.transformData.parentMatrixWorld=h.parent.matrixWorld);const d=hf(h.userData.transformData);h.applyMatrix4(d),h.updateWorldMatrix()}});const l=new Rv().parse();st.children.length===1&&st.children[0].isGroup&&(st.children[0].animations=l,st=st.children[0]),st.animations=l}parseModels(t,n,i){const s=new Map,o=pe.Objects.Model;for(const u in o){const l=parseInt(u),h=o[u],d=He.get(l);let m=this.buildSkeleton(d,t,l,h.attrName);if(!m){switch(h.attrType){case"Camera":m=this.createCamera(d);break;case"Light":m=this.createLight(d);break;case"Mesh":m=this.createMesh(d,n,i);break;case"NurbsCurve":m=this.createCurve(d,n);break;case"LimbNode":case"Root":m=new oa;break;case"Null":default:m=new Fn;break}m.name=h.attrName?fi.sanitizeNodeName(h.attrName):"",m.userData.originalName=h.attrName,m.ID=l}this.getTransformData(m,h),s.set(l,m)}return s}buildSkeleton(t,n,i,s){let o=null;return t.parents.forEach(function(u){for(const l in n){const h=n[l];h.rawBones.forEach(function(d,m){if(d.ID===u.ID){const p=o;o=new oa,o.matrixWorld.copy(d.transformLink),o.name=s?fi.sanitizeNodeName(s):"",o.userData.originalName=s,o.ID=i,h.bones[m]=o,p!==null&&o.add(p)}})}}),o}createCamera(t){let n,i;if(t.children.forEach(function(s){const o=pe.Objects.NodeAttribute[s.ID];o!==void 0&&(i=o)}),i===void 0)n=new Rr;else{let s=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(s=1);let o=1;i.NearPlane!==void 0&&(o=i.NearPlane.value/1e3);let u=1e3;i.FarPlane!==void 0&&(u=i.FarPlane.value/1e3);let l=window.innerWidth,h=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(l=i.AspectWidth.value,h=i.AspectHeight.value);const d=l/h;let m=45;i.FieldOfView!==void 0&&(m=i.FieldOfView.value);const p=i.FocalLength?i.FocalLength.value:null;switch(s){case 0:n=new Ea(m,d,o,u),p!==null&&n.setFocalLength(p);break;case 1:n=new $l(-l/2,l/2,h/2,-h/2,o,u);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),n=new Rr;break}}return n}createLight(t){let n,i;if(t.children.forEach(function(s){const o=pe.Objects.NodeAttribute[s.ID];o!==void 0&&(i=o)}),i===void 0)n=new Rr;else{let s;i.LightType===void 0?s=0:s=i.LightType.value;let o=16777215;i.Color!==void 0&&(o=new ze().fromArray(i.Color.value).convertSRGBToLinear());let u=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(u=0);let l=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?l=0:l=i.FarAttenuationEnd.value);const h=1;switch(s){case 0:n=new sa(o,u,l,h);break;case 1:n=new Wl(o,u);break;case 2:let d=Math.PI/3;i.InnerAngle!==void 0&&(d=Qe.degToRad(i.InnerAngle.value));let m=0;i.OuterAngle!==void 0&&(m=Qe.degToRad(i.OuterAngle.value),m=Math.max(m,1)),n=new zl(o,u,l,d,m,h);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new sa(o,u);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(t,n,i){let s,o=null,u=null;const l=[];return t.children.forEach(function(h){n.has(h.ID)&&(o=n.get(h.ID)),i.has(h.ID)&&l.push(i.get(h.ID))}),l.length>1?u=l:l.length>0?u=l[0]:(u=new ai({name:Jn.DEFAULT_MATERIAL_NAME,color:13421772}),l.push(u)),"color"in o.attributes&&l.forEach(function(h){h.vertexColors=!0}),o.FBX_Deformer?(s=new ql(o,u),s.normalizeSkinWeights()):s=new li(o,u),s}createCurve(t,n){const i=t.children.reduce(function(o,u){return n.has(u.ID)&&(o=n.get(u.ID)),o},null),s=new si({name:Jn.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Yl(i,s)}getTransformData(t,n){const i={};"InheritType"in n&&(i.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?i.eulerOrder=pf(n.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in n&&(i.translation=n.Lcl_Translation.value),"PreRotation"in n&&(i.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(i.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(i.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(i.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(i.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(i.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(i.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(i.rotationPivot=n.RotationPivot.value),t.userData.transformData=i}setLookAtProperties(t,n){"LookAtProperty"in n&&He.get(t.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const o=pe.Objects.Model[s.ID];if("Lcl_Translation"in o){const u=o.Lcl_Translation.value;t.target!==void 0?(t.target.position.fromArray(u),st.add(t.target)):t.lookAt(new ue().fromArray(u))}}})}bindSkeleton(t,n,i){const s=this.parsePoseNodes();for(const o in t){const u=t[o];He.get(parseInt(u.ID)).parents.forEach(function(h){if(n.has(h.ID)){const d=h.ID;He.get(d).parents.forEach(function(p){i.has(p.ID)&&i.get(p.ID).bind(new Zl(u.bones),s[p.ID])})}})}}parsePoseNodes(){const t={};if("Pose"in pe.Objects){const n=pe.Objects.Pose;for(const i in n)if(n[i].attrType==="BindPose"&&n[i].NbPoseNodes>0){const s=n[i].PoseNode;Array.isArray(s)?s.forEach(function(o){t[o.Node]=new Ie().fromArray(o.Matrix.a)}):t[s.Node]=new Ie().fromArray(s.Matrix.a)}}return t}addGlobalSceneSettings(){if("GlobalSettings"in pe){if("AmbientColor"in pe.GlobalSettings){const t=pe.GlobalSettings.AmbientColor.value,n=t[0],i=t[1],s=t[2];if(n!==0||i!==0||s!==0){const o=new ze(n,i,s).convertSRGBToLinear();st.add(new Ly(o,1))}}"UnitScaleFactor"in pe.GlobalSettings&&(st.userData.unitScaleFactor=pe.GlobalSettings.UnitScaleFactor.value)}}}class bv{constructor(){this.negativeMaterialIndices=!1}parse(t){const n=new Map;if("Geometry"in pe.Objects){const i=pe.Objects.Geometry;for(const s in i){const o=He.get(parseInt(s)),u=this.parseGeometry(o,i[s],t);n.set(parseInt(s),u)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(t,n,i){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(t,n,i);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(t,n,i){const s=i.skeletons,o=[],u=t.parents.map(function(p){return pe.Objects.Model[p.ID]});if(u.length===0)return;const l=t.children.reduce(function(p,w){return s[w.ID]!==void 0&&(p=s[w.ID]),p},null);t.children.forEach(function(p){i.morphTargets[p.ID]!==void 0&&o.push(i.morphTargets[p.ID])});const h=u[0],d={};"RotationOrder"in h&&(d.eulerOrder=pf(h.RotationOrder.value)),"InheritType"in h&&(d.inheritType=parseInt(h.InheritType.value)),"GeometricTranslation"in h&&(d.translation=h.GeometricTranslation.value),"GeometricRotation"in h&&(d.rotation=h.GeometricRotation.value),"GeometricScaling"in h&&(d.scale=h.GeometricScaling.value);const m=hf(d);return this.genGeometry(n,l,o,m)}genGeometry(t,n,i,s){const o=new Sr;t.attrName&&(o.name=t.attrName);const u=this.parseGeoNode(t,n),l=this.genBuffers(u),h=new Ct(l.vertex,3);if(h.applyMatrix4(s),o.setAttribute("position",h),l.colors.length>0&&o.setAttribute("color",new Ct(l.colors,3)),n&&(o.setAttribute("skinIndex",new Iy(l.weightsIndices,4)),o.setAttribute("skinWeight",new Ct(l.vertexWeights,4)),o.FBX_Deformer=n),l.normal.length>0){const d=new Oy().getNormalMatrix(s),m=new Ct(l.normal,3);m.applyNormalMatrix(d),o.setAttribute("normal",m)}if(l.uvs.forEach(function(d,m){const p=m===0?"uv":`uv${m}`;o.setAttribute(p,new Ct(l.uvs[m],2))}),u.material&&u.material.mappingType!=="AllSame"){let d=l.materialIndex[0],m=0;if(l.materialIndex.forEach(function(p,w){p!==d&&(o.addGroup(m,w-m,d),d=p,m=w)}),o.groups.length>0){const p=o.groups[o.groups.length-1],w=p.start+p.count;w!==l.materialIndex.length&&o.addGroup(w,l.materialIndex.length-w,d)}o.groups.length===0&&o.addGroup(0,l.materialIndex.length,l.materialIndex[0])}return this.addMorphTargets(o,t,i,s),o}parseGeoNode(t,n){const i={};if(i.vertexPositions=t.Vertices!==void 0?t.Vertices.a:[],i.vertexIndices=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(i.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(i.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(i.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){i.uv=[];let s=0;for(;t.LayerElementUV[s];)t.LayerElementUV[s].UV&&i.uv.push(this.parseUVs(t.LayerElementUV[s])),s++}return i.weightTable={},n!==null&&(i.skeleton=n,n.rawBones.forEach(function(s,o){s.indices.forEach(function(u,l){i.weightTable[u]===void 0&&(i.weightTable[u]=[]),i.weightTable[u].push({id:o,weight:s.weights[l]})})})),i}genBuffers(t){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,s=0,o=!1,u=[],l=[],h=[],d=[],m=[],p=[];const w=this;return t.vertexIndices.forEach(function(v,T){let b,S=!1;v<0&&(v=v^-1,S=!0);let O=[],D=[];if(u.push(v*3,v*3+1,v*3+2),t.color){const B=gs(T,i,v,t.color);h.push(B[0],B[1],B[2])}if(t.skeleton){if(t.weightTable[v]!==void 0&&t.weightTable[v].forEach(function(B){D.push(B.weight),O.push(B.id)}),D.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const B=[0,0,0,0],k=[0,0,0,0];D.forEach(function($,j){let H=$,U=O[j];k.forEach(function(X,V,de){if(H>X){de[V]=H,H=X;const le=B[V];B[V]=U,U=le}})}),O=B,D=k}for(;D.length<4;)D.push(0),O.push(0);for(let B=0;B<4;++B)m.push(D[B]),p.push(O[B])}if(t.normal){const B=gs(T,i,v,t.normal);l.push(B[0],B[1],B[2])}t.material&&t.material.mappingType!=="AllSame"&&(b=gs(T,i,v,t.material)[0],b<0&&(w.negativeMaterialIndices=!0,b=0)),t.uv&&t.uv.forEach(function(B,k){const $=gs(T,i,v,B);d[k]===void 0&&(d[k]=[]),d[k].push($[0]),d[k].push($[1])}),s++,S&&(w.genFace(n,t,u,b,l,h,d,m,p,s),i++,s=0,u=[],l=[],h=[],d=[],m=[],p=[])}),n}getNormalNewell(t){const n=new ue(0,0,0);for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];n.x+=(s.y-o.y)*(s.z+o.z),n.y+=(s.z-o.z)*(s.x+o.x),n.z+=(s.x-o.x)*(s.y+o.y)}return n.normalize(),n}getNormalTangentAndBitangent(t){const n=this.getNormalNewell(t),s=(Math.abs(n.z)>.5?new ue(0,1,0):new ue(0,0,1)).cross(n).normalize(),o=n.clone().cross(s).normalize();return{normal:n,tangent:s,bitangent:o}}flattenVertex(t,n,i){return new Ye(t.dot(n),t.dot(i))}genFace(t,n,i,s,o,u,l,h,d,m){let p;if(m>3){const w=[];for(let S=0;S<i.length;S+=3)w.push(new ue(n.vertexPositions[i[S]],n.vertexPositions[i[S+1]],n.vertexPositions[i[S+2]]));const{tangent:v,bitangent:T}=this.getNormalTangentAndBitangent(w),b=[];for(const S of w)b.push(this.flattenVertex(S,v,T));p=Cy.triangulateShape(b,[])}else p=[[0,1,2]];for(const[w,v,T]of p)t.vertex.push(n.vertexPositions[i[w*3]]),t.vertex.push(n.vertexPositions[i[w*3+1]]),t.vertex.push(n.vertexPositions[i[w*3+2]]),t.vertex.push(n.vertexPositions[i[v*3]]),t.vertex.push(n.vertexPositions[i[v*3+1]]),t.vertex.push(n.vertexPositions[i[v*3+2]]),t.vertex.push(n.vertexPositions[i[T*3]]),t.vertex.push(n.vertexPositions[i[T*3+1]]),t.vertex.push(n.vertexPositions[i[T*3+2]]),n.skeleton&&(t.vertexWeights.push(h[w*4]),t.vertexWeights.push(h[w*4+1]),t.vertexWeights.push(h[w*4+2]),t.vertexWeights.push(h[w*4+3]),t.vertexWeights.push(h[v*4]),t.vertexWeights.push(h[v*4+1]),t.vertexWeights.push(h[v*4+2]),t.vertexWeights.push(h[v*4+3]),t.vertexWeights.push(h[T*4]),t.vertexWeights.push(h[T*4+1]),t.vertexWeights.push(h[T*4+2]),t.vertexWeights.push(h[T*4+3]),t.weightsIndices.push(d[w*4]),t.weightsIndices.push(d[w*4+1]),t.weightsIndices.push(d[w*4+2]),t.weightsIndices.push(d[w*4+3]),t.weightsIndices.push(d[v*4]),t.weightsIndices.push(d[v*4+1]),t.weightsIndices.push(d[v*4+2]),t.weightsIndices.push(d[v*4+3]),t.weightsIndices.push(d[T*4]),t.weightsIndices.push(d[T*4+1]),t.weightsIndices.push(d[T*4+2]),t.weightsIndices.push(d[T*4+3])),n.color&&(t.colors.push(u[w*3]),t.colors.push(u[w*3+1]),t.colors.push(u[w*3+2]),t.colors.push(u[v*3]),t.colors.push(u[v*3+1]),t.colors.push(u[v*3+2]),t.colors.push(u[T*3]),t.colors.push(u[T*3+1]),t.colors.push(u[T*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(t.materialIndex.push(s),t.materialIndex.push(s),t.materialIndex.push(s)),n.normal&&(t.normal.push(o[w*3]),t.normal.push(o[w*3+1]),t.normal.push(o[w*3+2]),t.normal.push(o[v*3]),t.normal.push(o[v*3+1]),t.normal.push(o[v*3+2]),t.normal.push(o[T*3]),t.normal.push(o[T*3+1]),t.normal.push(o[T*3+2])),n.uv&&n.uv.forEach(function(b,S){t.uvs[S]===void 0&&(t.uvs[S]=[]),t.uvs[S].push(l[S][w*2]),t.uvs[S].push(l[S][w*2+1]),t.uvs[S].push(l[S][v*2]),t.uvs[S].push(l[S][v*2+1]),t.uvs[S].push(l[S][T*2]),t.uvs[S].push(l[S][T*2+1])})}addMorphTargets(t,n,i,s){if(i.length===0)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const o=this;i.forEach(function(u){u.rawTargets.forEach(function(l){const h=pe.Objects.Geometry[l.geoID];h!==void 0&&o.genMorphGeometry(t,n,h,s,l.name)})})}genMorphGeometry(t,n,i,s,o){const u=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],h=i.Indexes!==void 0?i.Indexes.a:[],d=t.attributes.position.count*3,m=new Float32Array(d);for(let T=0;T<h.length;T++){const b=h[T]*3;m[b]=l[T*3],m[b+1]=l[T*3+1],m[b+2]=l[T*3+2]}const p={vertexIndices:u,vertexPositions:m},w=this.genBuffers(p),v=new Ct(w.vertex,3);v.name=o||i.attrName,v.applyMatrix4(s),t.morphAttributes.position.push(v)}parseNormals(t){const n=t.MappingInformationType,i=t.ReferenceInformationType,s=t.Normals.a;let o=[];return i==="IndexToDirect"&&("NormalIndex"in t?o=t.NormalIndex.a:"NormalsIndex"in t&&(o=t.NormalsIndex.a)),{dataSize:3,buffer:s,indices:o,mappingType:n,referenceType:i}}parseUVs(t){const n=t.MappingInformationType,i=t.ReferenceInformationType,s=t.UV.a;let o=[];return i==="IndexToDirect"&&(o=t.UVIndex.a),{dataSize:2,buffer:s,indices:o,mappingType:n,referenceType:i}}parseVertexColors(t){const n=t.MappingInformationType,i=t.ReferenceInformationType,s=t.Colors.a;let o=[];i==="IndexToDirect"&&(o=t.ColorIndex.a);for(let u=0,l=new ze;u<s.length;u+=4)l.fromArray(s,u).convertSRGBToLinear().toArray(s,u);return{dataSize:4,buffer:s,indices:o,mappingType:n,referenceType:i}}parseMaterialIndices(t){const n=t.MappingInformationType,i=t.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const s=t.Materials.a,o=[];for(let u=0;u<s.length;++u)o.push(u);return{dataSize:1,buffer:s,indices:o,mappingType:n,referenceType:i}}parseNurbsGeometry(t){const n=parseInt(t.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new Sr;const i=n-1,s=t.KnotVector.a,o=[],u=t.Points.a;for(let p=0,w=u.length;p<w;p+=4)o.push(new bs().fromArray(u,p));let l,h;if(t.Form==="Closed")o.push(o[0]);else if(t.Form==="Periodic"){l=i,h=s.length-1-l;for(let p=0;p<i;++p)o.push(o[p])}const m=new Tv(i,s,o,l,h).getPoints(o.length*12);return new Sr().setFromPoints(m)}}class Rv{parse(){const t=[],n=this.parseClips();if(n!==void 0)for(const i in n){const s=n[i],o=this.addClip(s);t.push(o)}return t}parseClips(){if(pe.Objects.AnimationCurve===void 0)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const t=pe.Objects.AnimationCurveNode,n=new Map;for(const i in t){const s=t[i];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:s.id,attr:s.attrName,curves:{}};n.set(o.id,o)}}return n}parseAnimationCurves(t){const n=pe.Objects.AnimationCurve;for(const i in n){const s={id:n[i].id,times:n[i].KeyTime.a.map(Cv),values:n[i].KeyValueFloat.a},o=He.get(s.id);if(o!==void 0){const u=o.parents[0].ID,l=o.parents[0].relationship;l.match(/X/)?t.get(u).curves.x=s:l.match(/Y/)?t.get(u).curves.y=s:l.match(/Z/)?t.get(u).curves.z=s:l.match(/DeformPercent/)&&t.has(u)&&(t.get(u).curves.morph=s)}}}parseAnimationLayers(t){const n=pe.Objects.AnimationLayer,i=new Map;for(const s in n){const o=[],u=He.get(parseInt(s));u!==void 0&&(u.children.forEach(function(h,d){if(t.has(h.ID)){const m=t.get(h.ID);if(m.curves.x!==void 0||m.curves.y!==void 0||m.curves.z!==void 0){if(o[d]===void 0){const p=He.get(h.ID).parents.filter(function(w){return w.relationship!==void 0})[0].ID;if(p!==void 0){const w=pe.Objects.Model[p.toString()];if(w===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",h);return}const v={modelName:w.attrName?fi.sanitizeNodeName(w.attrName):"",ID:w.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};st.traverse(function(T){T.ID===w.id&&(v.transform=T.matrix,T.userData.transformData&&(v.eulerOrder=T.userData.transformData.eulerOrder))}),v.transform||(v.transform=new Ie),"PreRotation"in w&&(v.preRotation=w.PreRotation.value),"PostRotation"in w&&(v.postRotation=w.PostRotation.value),o[d]=v}}o[d]&&(o[d][m.attr]=m)}else if(m.curves.morph!==void 0){if(o[d]===void 0){const p=He.get(h.ID).parents.filter(function(O){return O.relationship!==void 0})[0].ID,w=He.get(p).parents[0].ID,v=He.get(w).parents[0].ID,T=He.get(v).parents[0].ID,b=pe.Objects.Model[T],S={modelName:b.attrName?fi.sanitizeNodeName(b.attrName):"",morphName:pe.Objects.Deformer[p].attrName};o[d]=S}o[d][m.attr]=m}}}),i.set(parseInt(s),o))}return i}parseAnimStacks(t){const n=pe.Objects.AnimationStack,i={};for(const s in n){const o=He.get(parseInt(s)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const u=t.get(o[0].ID);i[s]={name:n[s].attrName,layer:u}}return i}addClip(t){let n=[];const i=this;return t.layer.forEach(function(s){n=n.concat(i.generateTracks(s))}),new xa(t.name,-1,n)}generateTracks(t){const n=[];let i=new ue,s=new ue;if(t.transform&&t.transform.decompose(i,new Ot,s),i=i.toArray(),s=s.toArray(),t.T!==void 0&&Object.keys(t.T.curves).length>0){const o=this.generateVectorTrack(t.modelName,t.T.curves,i,"position");o!==void 0&&n.push(o)}if(t.R!==void 0&&Object.keys(t.R.curves).length>0){const o=this.generateRotationTrack(t.modelName,t.R.curves,t.preRotation,t.postRotation,t.eulerOrder);o!==void 0&&n.push(o)}if(t.S!==void 0&&Object.keys(t.S.curves).length>0){const o=this.generateVectorTrack(t.modelName,t.S.curves,s,"scale");o!==void 0&&n.push(o)}if(t.DeformPercent!==void 0){const o=this.generateMorphTrack(t);o!==void 0&&n.push(o)}return n}generateVectorTrack(t,n,i,s){const o=this.getTimesForAllAxes(n),u=this.getKeyframeTrackValues(o,n,i);return new ca(t+"."+s,o,u)}generateRotationTrack(t,n,i,s,o){let u,l;if(n.x!==void 0&&n.y!==void 0&&n.z!==void 0){const p=this.interpolateRotations(n.x,n.y,n.z,o);u=p[0],l=p[1]}i!==void 0&&(i=i.map(Qe.degToRad),i.push(o),i=new $t().fromArray(i),i=new Ot().setFromEuler(i)),s!==void 0&&(s=s.map(Qe.degToRad),s.push(o),s=new $t().fromArray(s),s=new Ot().setFromEuler(s).invert());const h=new Ot,d=new $t,m=[];if(!l||!u)return new As(t+".quaternion",[],[]);for(let p=0;p<l.length;p+=3)d.set(l[p],l[p+1],l[p+2],o),h.setFromEuler(d),i!==void 0&&h.premultiply(i),s!==void 0&&h.multiply(s),p>2&&new Ot().fromArray(m,(p-3)/3*4).dot(h)<0&&h.set(-h.x,-h.y,-h.z,-h.w),h.toArray(m,p/3*4);return new As(t+".quaternion",u,m)}generateMorphTrack(t){const n=t.DeformPercent.curves.morph,i=n.values.map(function(o){return o/100}),s=st.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new ua(t.modelName+".morphTargetInfluences["+s+"]",n.times,i)}getTimesForAllAxes(t){let n=[];if(t.x!==void 0&&(n=n.concat(t.x.times)),t.y!==void 0&&(n=n.concat(t.y.times)),t.z!==void 0&&(n=n.concat(t.z.times)),n=n.sort(function(i,s){return i-s}),n.length>1){let i=1,s=n[0];for(let o=1;o<n.length;o++){const u=n[o];u!==s&&(n[i]=u,s=u,i++)}n=n.slice(0,i)}return n}getKeyframeTrackValues(t,n,i){const s=i,o=[];let u=-1,l=-1,h=-1;return t.forEach(function(d){if(n.x&&(u=n.x.times.indexOf(d)),n.y&&(l=n.y.times.indexOf(d)),n.z&&(h=n.z.times.indexOf(d)),u!==-1){const m=n.x.values[u];o.push(m),s[0]=m}else o.push(s[0]);if(l!==-1){const m=n.y.values[l];o.push(m),s[1]=m}else o.push(s[1]);if(h!==-1){const m=n.z.values[h];o.push(m),s[2]=m}else o.push(s[2])}),o}interpolateRotations(t,n,i,s){const o=[],u=[];o.push(t.times[0]),u.push(Qe.degToRad(t.values[0])),u.push(Qe.degToRad(n.values[0])),u.push(Qe.degToRad(i.values[0]));for(let l=1;l<t.values.length;l++){const h=[t.values[l-1],n.values[l-1],i.values[l-1]];if(isNaN(h[0])||isNaN(h[1])||isNaN(h[2]))continue;const d=h.map(Qe.degToRad),m=[t.values[l],n.values[l],i.values[l]];if(isNaN(m[0])||isNaN(m[1])||isNaN(m[2]))continue;const p=m.map(Qe.degToRad),w=[m[0]-h[0],m[1]-h[1],m[2]-h[2]],v=[Math.abs(w[0]),Math.abs(w[1]),Math.abs(w[2])];if(v[0]>=180||v[1]>=180||v[2]>=180){const b=Math.max(...v)/180,S=new $t(...d,s),O=new $t(...p,s),D=new Ot().setFromEuler(S),B=new Ot().setFromEuler(O);D.dot(B)&&B.set(-B.x,-B.y,-B.z,-B.w);const k=t.times[l-1],$=t.times[l]-k,j=new Ot,H=new $t;for(let U=0;U<1;U+=1/b)j.copy(D.clone().slerp(B.clone(),U)),o.push(k+U*$),H.setFromQuaternion(j,s),u.push(H.x),u.push(H.y),u.push(H.z)}else o.push(t.times[l]),u.push(Qe.degToRad(t.values[l])),u.push(Qe.degToRad(n.values[l])),u.push(Qe.degToRad(i.values[l]))}return[o,u]}}class Sv{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,n){this.currentProp=t,this.currentPropName=n}parse(t){this.currentIndent=0,this.allNodes=new ff,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,i=t.split(/[\r\n]+/);return i.forEach(function(s,o){const u=s.match(/^[\s\t]*;/),l=s.match(/^[\s\t]*$/);if(u||l)return;const h=s.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),d=s.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),m=s.match("^\\t{"+(n.currentIndent-1)+"}}");h?n.parseNodeBegin(s,h):d?n.parseNodeProperty(s,d,i[++o]):m?n.popStack():s.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(t,n){const i=n[1].trim().replace(/^"/,"").replace(/"$/,""),s=n[2].split(",").map(function(h){return h.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},u=this.parseNodeAttr(s),l=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,o):i in l?(i==="PoseNode"?l.PoseNode.push(o):l[i].id!==void 0&&(l[i]={},l[i][l[i].id]=l[i]),u.id!==""&&(l[i][u.id]=o)):typeof u.id=="number"?(l[i]={},l[i][u.id]=o):i!=="Properties70"&&(i==="PoseNode"?l[i]=[o]:l[i]=o),typeof u.id=="number"&&(o.id=u.id),u.name!==""&&(o.attrName=u.name),u.type!==""&&(o.attrType=u.type),this.pushStack(o)}parseNodeAttr(t){let n=t[0];t[0]!==""&&(n=parseInt(t[0]),isNaN(n)&&(n=t[0]));let i="",s="";return t.length>1&&(i=t[1].replace(/^(\w+)::/,""),s=t[2]),{id:n,name:i,type:s}}parseNodeProperty(t,n,i){let s=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&o===","&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());const u=this.getCurrentNode();if(u.name==="Properties70"){this.parseNodeSpecialProperty(t,s,o);return}if(s==="C"){const h=o.split(",").slice(1),d=parseInt(h[0]),m=parseInt(h[1]);let p=o.split(",").slice(3);p=p.map(function(w){return w.trim().replace(/^"/,"")}),s="connections",o=[d,m],Pv(o,p),u[s]===void 0&&(u[s]=[])}s==="Node"&&(u.id=o),s in u&&Array.isArray(u[s])?u[s].push(o):s!=="a"?u[s]=o:u.a=o,this.setCurrentProp(u,s),s==="a"&&o.slice(-1)!==","&&(u.a=Jo(o))}parseNodePropertyContinued(t){const n=this.getCurrentNode();n.a+=t,t.slice(-1)!==","&&(n.a=Jo(n.a))}parseNodeSpecialProperty(t,n,i){const s=i.split('",').map(function(m){return m.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=s[0],u=s[1],l=s[2],h=s[3];let d=s[4];switch(u){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":d=parseFloat(d);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":d=Jo(d);break}this.getPrevNode()[o]={type:u,type2:l,flag:h,value:d},this.setCurrentProp(this.getPrevNode(),o)}}class Lv{parse(t){const n=new Ll(t);n.skip(23);const i=n.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const s=new ff;for(;!this.endOfContent(n);){const o=this.parseNode(n,i);o!==null&&s.add(o.name,o)}return s}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,n){const i={},s=n>=7500?t.getUint64():t.getUint32(),o=n>=7500?t.getUint64():t.getUint32();n>=7500?t.getUint64():t.getUint32();const u=t.getUint8(),l=t.getString(u);if(s===0)return null;const h=[];for(let w=0;w<o;w++)h.push(this.parseProperty(t));const d=h.length>0?h[0]:"",m=h.length>1?h[1]:"",p=h.length>2?h[2]:"";for(i.singleProperty=o===1&&t.getOffset()===s;s>t.getOffset();){const w=this.parseNode(t,n);w!==null&&this.parseSubNode(l,i,w)}return i.propertyList=h,typeof d=="number"&&(i.id=d),m!==""&&(i.attrName=m),p!==""&&(i.attrType=p),l!==""&&(i.name=l),i}parseSubNode(t,n,i){if(i.singleProperty===!0){const s=i.propertyList[0];Array.isArray(s)?(n[i.name]=i,i.a=s):n[i.name]=s}else if(t==="Connections"&&i.name==="C"){const s=[];i.propertyList.forEach(function(o,u){u!==0&&s.push(o)}),n.connections===void 0&&(n.connections=[]),n.connections.push(s)}else if(i.name==="Properties70")Object.keys(i).forEach(function(o){n[o]=i[o]});else if(t==="Properties70"&&i.name==="P"){let s=i.propertyList[0],o=i.propertyList[1];const u=i.propertyList[2],l=i.propertyList[3];let h;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?h=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:h=i.propertyList[4],n[s]={type:o,type2:u,flag:l,value:h}}else n[i.name]===void 0?typeof i.id=="number"?(n[i.name]={},n[i.name][i.id]=i):n[i.name]=i:i.name==="PoseNode"?(Array.isArray(n[i.name])||(n[i.name]=[n[i.name]]),n[i.name].push(i)):n[i.name][i.id]===void 0&&(n[i.name][i.id]=i)}parseProperty(t){const n=t.getString(1);let i;switch(n){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return i=t.getUint32(),t.getArrayBuffer(i);case"S":return i=t.getUint32(),t.getString(i);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=t.getUint32(),o=t.getUint32(),u=t.getUint32();if(o===0)switch(n){case"b":case"c":return t.getBooleanArray(s);case"d":return t.getFloat64Array(s);case"f":return t.getFloat32Array(s);case"i":return t.getInt32Array(s);case"l":return t.getInt64Array(s)}const l=hv(new Uint8Array(t.getArrayBuffer(u))),h=new Ll(l.buffer);switch(n){case"b":case"c":return h.getBooleanArray(s);case"d":return h.getFloat64Array(s);case"f":return h.getFloat32Array(s);case"i":return h.getInt32Array(s);case"l":return h.getInt64Array(s)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class Ll{constructor(t,n){this.dv=new DataView(t),this.offset=0,this.littleEndian=n!==void 0?n:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(t){const n=[];for(let i=0;i<t;i++)n.push(this.getBoolean());return n}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const n=[];for(let i=0;i<t;i++)n.push(this.getInt32());return n}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,n;return this.littleEndian?(t=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),t=this.getUint32()),n&2147483648?(n=~n&4294967295,t=~t&4294967295,t===4294967295&&(n=n+1&4294967295),t=t+1&4294967295,-(n*4294967296+t)):n*4294967296+t}getInt64Array(t){const n=[];for(let i=0;i<t;i++)n.push(this.getInt64());return n}getUint64(){let t,n;return this.littleEndian?(t=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),t=this.getUint32()),n*4294967296+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const n=[];for(let i=0;i<t;i++)n.push(this.getFloat32());return n}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const n=[];for(let i=0;i<t;i++)n.push(this.getFloat64());return n}getArrayBuffer(t){const n=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,n}getString(t){const n=this.offset;let i=new Uint8Array(this.dv.buffer,n,t);this.skip(t);const s=i.indexOf(0);return s>=0&&(i=new Uint8Array(this.dv.buffer,n,s)),this._textDecoder.decode(i)}}class ff{add(t,n){this[t]=n}}function Iv(a){const t="Kaydara FBX Binary  \0";return a.byteLength>=t.length&&t===df(a,0,t.length)}function Ov(a){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(s){const o=a[s-1];return a=a.slice(n+s),n++,o}for(let s=0;s<t.length;++s)if(i(1)===t[s])return!1;return!0}function Il(a){const t=/FBXVersion: (\d+)/,n=a.match(t);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Cv(a){return a/46186158e3}const Mv=[];function gs(a,t,n,i){let s;switch(i.mappingType){case"ByPolygonVertex":s=a;break;case"ByPolygon":s=t;break;case"ByVertice":s=n;break;case"AllSame":s=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(s=i.indices[s]);const o=s*i.dataSize,u=o+i.dataSize;return Fv(Mv,i.buffer,o,u)}const Zo=new $t,Er=new ue;function hf(a){const t=new Ie,n=new Ie,i=new Ie,s=new Ie,o=new Ie,u=new Ie,l=new Ie,h=new Ie,d=new Ie,m=new Ie,p=new Ie,w=new Ie,v=a.inheritType?a.inheritType:0;if(a.translation&&t.setPosition(Er.fromArray(a.translation)),a.preRotation){const V=a.preRotation.map(Qe.degToRad);V.push(a.eulerOrder||$t.DEFAULT_ORDER),n.makeRotationFromEuler(Zo.fromArray(V))}if(a.rotation){const V=a.rotation.map(Qe.degToRad);V.push(a.eulerOrder||$t.DEFAULT_ORDER),i.makeRotationFromEuler(Zo.fromArray(V))}if(a.postRotation){const V=a.postRotation.map(Qe.degToRad);V.push(a.eulerOrder||$t.DEFAULT_ORDER),s.makeRotationFromEuler(Zo.fromArray(V)),s.invert()}a.scale&&o.scale(Er.fromArray(a.scale)),a.scalingOffset&&l.setPosition(Er.fromArray(a.scalingOffset)),a.scalingPivot&&u.setPosition(Er.fromArray(a.scalingPivot)),a.rotationOffset&&h.setPosition(Er.fromArray(a.rotationOffset)),a.rotationPivot&&d.setPosition(Er.fromArray(a.rotationPivot)),a.parentMatrixWorld&&(p.copy(a.parentMatrix),m.copy(a.parentMatrixWorld));const T=n.clone().multiply(i).multiply(s),b=new Ie;b.extractRotation(m);const S=new Ie;S.copyPosition(m);const O=S.clone().invert().multiply(m),D=b.clone().invert().multiply(O),B=o,k=new Ie;if(v===0)k.copy(b).multiply(T).multiply(D).multiply(B);else if(v===1)k.copy(b).multiply(D).multiply(T).multiply(B);else{const de=new Ie().scale(new ue().setFromMatrixScale(p)).clone().invert(),le=D.clone().multiply(de);k.copy(b).multiply(T).multiply(le).multiply(B)}const $=d.clone().invert(),j=u.clone().invert();let H=t.clone().multiply(h).multiply(d).multiply(n).multiply(i).multiply(s).multiply($).multiply(l).multiply(u).multiply(o).multiply(j);const U=new Ie().copyPosition(H),X=m.clone().multiply(U);return w.copyPosition(X),H=w.clone().multiply(k),H.premultiply(m.invert()),H}function pf(a){a=a||0;const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return a===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[a]}function Jo(a){return a.split(",").map(function(n){return parseFloat(n)})}function df(a,t,n){return t===void 0&&(t=0),n===void 0&&(n=a.byteLength),new TextDecoder().decode(new Uint8Array(a,t,n))}function Pv(a,t){for(let n=0,i=a.length,s=t.length;n<s;n++,i++)a[i]=t[n]}function Fv(a,t,n,i){for(let s=n,o=0;s<i;s++,o++)a[o]=t[s];return a}class Dv extends My{constructor(t){super(t),this.type=xr}parse(t){const u=function(U,X){switch(U){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(X||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(X||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(X||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(X||""))}},m=`
`,p=function(U,X,V){X=X||1024;let le=U.pos,se=-1,te=0,xe="",ne=String.fromCharCode.apply(null,new Uint16Array(U.subarray(le,le+128)));for(;0>(se=ne.indexOf(m))&&te<X&&le<U.byteLength;)xe+=ne,te+=ne.length,le+=128,ne+=String.fromCharCode.apply(null,new Uint16Array(U.subarray(le,le+128)));return-1<se?(V!==!1&&(U.pos+=te+se+1),xe+ne.slice(0,se)):!1},w=function(U){const X=/^#\?(\S+)/,V=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,de=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,le=/^\s*FORMAT=(\S+)\s*$/,se=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,te={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let xe,ne;for((U.pos>=U.byteLength||!(xe=p(U)))&&u(1,"no header found"),(ne=xe.match(X))||u(3,"bad initial token"),te.valid|=1,te.programtype=ne[1],te.string+=xe+`
`;xe=p(U),xe!==!1;){if(te.string+=xe+`
`,xe.charAt(0)==="#"){te.comments+=xe+`
`;continue}if((ne=xe.match(V))&&(te.gamma=parseFloat(ne[1])),(ne=xe.match(de))&&(te.exposure=parseFloat(ne[1])),(ne=xe.match(le))&&(te.valid|=2,te.format=ne[1]),(ne=xe.match(se))&&(te.valid|=4,te.height=parseInt(ne[1],10),te.width=parseInt(ne[2],10)),te.valid&2&&te.valid&4)break}return te.valid&2||u(3,"missing format specifier"),te.valid&4||u(3,"missing image size specifier"),te},v=function(U,X,V){const de=X;if(de<8||de>32767||U[0]!==2||U[1]!==2||U[2]&128)return new Uint8Array(U);de!==(U[2]<<8|U[3])&&u(3,"wrong scanline width");const le=new Uint8Array(4*X*V);le.length||u(4,"unable to allocate buffer space");let se=0,te=0;const xe=4*de,ne=new Uint8Array(4),De=new Uint8Array(xe);let J=V;for(;J>0&&te<U.byteLength;){te+4>U.byteLength&&u(1),ne[0]=U[te++],ne[1]=U[te++],ne[2]=U[te++],ne[3]=U[te++],(ne[0]!=2||ne[1]!=2||(ne[2]<<8|ne[3])!=de)&&u(3,"bad rgbe scanline format");let K=0,Y;for(;K<xe&&te<U.byteLength;){Y=U[te++];const ve=Y>128;if(ve&&(Y-=128),(Y===0||K+Y>xe)&&u(3,"bad scanline data"),ve){const oe=U[te++];for(let Se=0;Se<Y;Se++)De[K++]=oe}else De.set(U.subarray(te,te+Y),K),K+=Y,te+=Y}const fe=de;for(let ve=0;ve<fe;ve++){let oe=0;le[se]=De[ve+oe],oe+=de,le[se+1]=De[ve+oe],oe+=de,le[se+2]=De[ve+oe],oe+=de,le[se+3]=De[ve+oe],se+=4}J--}return le},T=function(U,X,V,de){const le=U[X+3],se=Math.pow(2,le-128)/255;V[de+0]=U[X+0]*se,V[de+1]=U[X+1]*se,V[de+2]=U[X+2]*se,V[de+3]=1},b=function(U,X,V,de){const le=U[X+3],se=Math.pow(2,le-128)/255;V[de+0]=hs.toHalfFloat(Math.min(U[X+0]*se,65504)),V[de+1]=hs.toHalfFloat(Math.min(U[X+1]*se,65504)),V[de+2]=hs.toHalfFloat(Math.min(U[X+2]*se,65504)),V[de+3]=hs.toHalfFloat(1)},S=new Uint8Array(t);S.pos=0;const O=w(S),D=O.width,B=O.height,k=v(S.subarray(S.pos),D,B);let $,j,H;switch(this.type){case _s:H=k.length/4;const U=new Float32Array(H*4);for(let V=0;V<H;V++)T(k,V*4,U,V*4);$=U,j=_s;break;case xr:H=k.length/4;const X=new Uint16Array(H*4);for(let V=0;V<H;V++)b(k,V*4,X,V*4);$=X,j=xr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:D,height:B,data:$,header:O.string,gamma:O.gamma,exposure:O.exposure,type:j}}setDataType(t){return this.type=t,this}load(t,n,i,s){function o(u,l){switch(u.type){case _s:case xr:u.colorSpace=Ft,u.minFilter=Mn,u.magFilter=Mn,u.generateMipmaps=!1,u.flipY=!0;break}n&&n(u,l)}return super.load(t,o,i,s)}}class Nv extends Jn{constructor(t){super(t),this.hdrLoader=new Dv,this.type=xr}load(t,n,i,s){const o=new Py;switch(o.type=this.type,o.type){case _s:o.colorSpace=Ft,o.minFilter=Mn,o.magFilter=Mn,o.generateMipmaps=!1;break;case xr:o.colorSpace=Ft,o.minFilter=Mn,o.magFilter=Mn,o.generateMipmaps=!1;break}const u=this;let l=0;function h(d,m,p,w){new Mr(u.manager).setPath(u.path).setResponseType("arraybuffer").setWithCredentials(u.withCredentials).load(t[d],function(v){l++;const T=u.hdrLoader.parse(v);if(T){if(T.data!==void 0){const b=new Fy(T.data,T.width,T.height);b.type=o.type,b.colorSpace=o.colorSpace,b.format=o.format,b.minFilter=o.minFilter,b.magFilter=o.magFilter,b.generateMipmaps=o.generateMipmaps,o.images[d]=b}l===6&&(o.needsUpdate=!0,m&&m(o))}},p,w)}for(let d=0;d<t.length;d++)h(d,n,i,s);return o}setDataType(t){return this.type=t,this.hdrLoader.setDataType(t),this}}class On{constructor(){this.cube_texture_loader=new Dy,this.gltf_loader=new Aw,this.texture_loader=new xs,this.obj_loader=new yw,this.mtl_loader=new ww,this.fbx_loader=new Ev,this.hdr_loader=new Nv}}Rn(On,"cube_texture_loader"),Rn(On,"texture_loader"),Rn(On,"obj_loader"),Rn(On,"mtl_loader"),Rn(On,"gltf_loader"),Rn(On,"fbx_loader"),Rn(On,"hdr_loader");const Bv=a=>{let t=!1;const{createDom:n}=hw(),i=Ta(null);let s=Ar(null),o=Ar(null),u=Ar(null),l=Ar(null);Ar(null);let h=Ar(null);const d=new Wy,m=new Map,p=[],w=new On,v=new Fn;v.name="场景容器";const T=new Fn;T.name="精灵容器";const b=null,{loading:S,openLoading:O,closeLoading:D}=lw(!0,500),B=()=>new Ny,k=J=>{const ve=J.offsetWidth/J.offsetHeight,oe=new Ea(20,ve,.1,2e3);return oe.position.set(0,0,0),oe},$=J=>{const K=new ew;return K.setSize(J.offsetWidth,J.offsetHeight),K.domElement.style.position="absolute",K.domElement.style.left="0px",K.domElement.style.top="0px",J.appendChild(K.domElement),K},j=J=>{const K=new By({antialias:!0,alpha:!0});return K.setPixelRatio(window.devicePixelRatio),K.domElement.id="mainCanvas",K.domElement.style.position="absolute",K.domElement.style.top="0px",K.domElement.style.zIndex="1",K.outputColorSpace=zt,K.shadowMap.enabled=!0,K.setSize(J.offsetWidth,J.offsetHeight),K.localClippingEnabled=!0,K.toneMapping=ky,J.appendChild(K.domElement),K},H=(J,K)=>{const Y=new Jy(J,K);return Y.rotateSpeed*=-.25,Y.enableDamping=!0,Y.domElement.addEventListener("mousedown",fe=>{fe.target.style.cursor="move"}),Y.domElement.addEventListener("mouseup",fe=>{fe.target.style.cursor="auto"}),Y.enableZoom=!1,Y.target=new ue(0,0,0),Y.update(),Y},U=()=>{window.addEventListener("resize",()=>{o.value.aspect=i.value.offsetWidth/i.value.offsetHeight,o.value.updateProjectionMatrix(),u.value.setSize(i.value.offsetWidth,i.value.offsetHeight),l.value.setSize(i.value.offsetWidth,i.value.offsetHeight)})},X=()=>{if(!u.value)return;u.value.render(s.value,o.value);const J=d.getDelta();p.forEach(K=>K.update(J)),m.forEach(K=>la.isFunction(K)&&K()),l.value.render(s.value,o.value),h.value.update(),ha.update(),requestAnimationFrame(()=>X())},V=J=>{const{mesh:K,animations:Y,animationName:fe,repetitions:ve,frameNumber:oe}=J,Se=new Uy(K),Ge=xa.findByName(Y,fe);if(!Ge)return;const je=Se.clipAction(Ge);return je.setLoop(Hy,ve),_animationMixins.push(Se),je.setEffectiveTimeScale(2),je},de=()=>{_animationMixins.splice(0,_animationMixins.length)},le=J=>{const K=(Y,fe)=>fe(Y);return new Promise(Y=>{w.cube_texture_loader.load(J,fe=>K(fe,Y))})},se=J=>{const{side:K,cubeTexture:Y}=J,fe=(ve,oe)=>oe(ve);return new Promise(ve=>{le(Y).then(oe=>{const Se=`
                varying vec3 vWorldPosition;
                void main() {
                    vec4 worldPosition = modelMatrix * vec4(position, 1.0);
                    vWorldPosition = worldPosition.xyz;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
                `,Ge=`
                uniform samplerCube tCube;
                uniform float blurAmount;
                varying vec3 vWorldPosition;
                void main() {
                    vec3 blurredColor = vec3(0.0); 
                    for (float i = -1.0; i <= 1.0; i += 1.0) {
                        for (float j = -1.0; j <= 1.0; j += 1.0) {
                            for (float k = -1.0; k <= 1.0; k += 1.0) {
                                vec3 offset = vec3(i * blurAmount, j * blurAmount, k * blurAmount);
                                vec3 sampleDirection = normalize(vWorldPosition + offset);
                                blurredColor += textureCube(tCube, sampleDirection).rgb;
                            }
                        }
                    }
                    blurredColor /= 27.0;
                    gl_FragColor = vec4(blurredColor, 1.0);
                }
                `,je=new li(new Gy(1,32,32),new jy({uniforms:{tCube:{value:oe},blurAmount:{value:0}},side:K,vertexShader:Se,fragmentShader:Ge}));je.name="全景容器",fe(je,ve)})})},te=J=>{const{cubeTexture:K,value:Y}=J,fe=s.value.getObjectByName("全景容器");h.value.enabled=!1,yl({from:fe.material.uniforms.blurAmount,to:{value:.02},duration:2e3,onComplete:()=>{le(K).then(ve=>{fe.material.uniforms.tCube.value=ve,yl({from:fe.material.uniforms.blurAmount,to:{value:0},duration:2e3,onComplete:()=>{h.value.enabled=!0;const oe=sceneConfig.scenes.filter(Se=>Se.name===Y)[0];De(oe)}})})}})},xe=J=>new Qy(J),ne=({type:J,value:K},Y)=>{switch(J){case"changeScene":T.clear();const fe=[`scenes/${K}/px.png`,`scenes/${K}/nx.png`,`scenes/${K}/py.png`,`scenes/${K}/ny.png`,`scenes/${K}/pz.png`,`scenes/${K}/nz.png`];te({cubeTexture:fe,value:K});break;case"editMove":if(t){const ve=s.value.getObjectByName(K),oe=new Ye;oe.x=Y.clientX/i.value.offsetWidth*2-1,oe.y=-(Y.clientY/i.value.offsetHeight)*2+1;const Se=new zy;Se.setFromCamera(oe,o.value);const Ge=Se.intersectObject(v);Ge.length>0&&(ve.position.copy(Ge[0].point),a(ve))}break;case"editDown":t=!0,Y.srcElement.parentElement.classList.add("active");break;case"editUp":t=!1,Y.srcElement.parentElement.classList.remove("active");break;case"editLeave":t&&(t=!1,Y.fromElement.classList.remove("active"))}},De=J=>{const K=J;let Y=null;K==null||K.spirits.map((fe,ve)=>{var en,ht;Y=[],ef(fe).map(Ce=>{Y.push({dom:n({tagName:Ce.name,cssProperties:Ce==null?void 0:Ce.cssProperties,eventHandlers:Ce.handler,keyframes:Ce==null?void 0:Ce.keyframes}),canvasStyle:Ce==null?void 0:Ce.canvasStyle})});const oe=(en=Y[0])==null?void 0:en.dom;oe==null||oe.userData.forEach(Ce=>{oe==null||oe.addEventListener(Ce.eventName,Qn=>{ne(Ce,Qn)})});const Se=(ht=Y[0])==null?void 0:ht.canvasStyle;Y.slice(1).forEach(Ce=>{oe.appendChild(Ce.dom)});const je=xe(oe);je.name=`${K.name}&spirit${ve}`,Se.position&&je.position.set(Se==null?void 0:Se.position.x,Se==null?void 0:Se.position.y,1),T.add(je)})};return ba(()=>{const J=i.value=document.querySelector("#baseScene");s.value=B(),s.value.add(T,v),o.value=k(J),u.value=j(J),l.value=$(J),h.value=H(o.value,u.value.domElement),U()}),{baseScene:i,loading:S,scene:s,camera:o,renderer:u,cssRenderer:l,orbitControls:h,renderMixins:m,gui:b,loader:w,sceneContainer:v,spriteContainer:T,render:X,loadAnimate:V,clearAllAnimation:de,createSphere:se,createToSpirit:De,eventHandler:ne}};function gf(a,t){return function(){return a.apply(t,arguments)}}const{toString:kv}=Object.prototype,{getPrototypeOf:Sa}=Object,Rs=(a=>t=>{const n=kv.call(t);return a[n]||(a[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qt=a=>(a=a.toLowerCase(),t=>Rs(t)===a),Ss=a=>t=>typeof t===a,{isArray:Pr}=Array,hi=Ss("undefined");function Uv(a){return a!==null&&!hi(a)&&a.constructor!==null&&!hi(a.constructor)&&Pt(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const mf=Qt("ArrayBuffer");function Hv(a){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(a):t=a&&a.buffer&&mf(a.buffer),t}const Gv=Ss("string"),Pt=Ss("function"),_f=Ss("number"),Ls=a=>a!==null&&typeof a=="object",jv=a=>a===!0||a===!1,ys=a=>{if(Rs(a)!=="object")return!1;const t=Sa(a);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},zv=Qt("Date"),Wv=Qt("File"),Kv=Qt("Blob"),Vv=Qt("FileList"),Xv=a=>Ls(a)&&Pt(a.pipe),qv=a=>{let t;return a&&(typeof FormData=="function"&&a instanceof FormData||Pt(a.append)&&((t=Rs(a))==="formdata"||t==="object"&&Pt(a.toString)&&a.toString()==="[object FormData]"))},Yv=Qt("URLSearchParams"),$v=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function di(a,t,{allOwnKeys:n=!1}={}){if(a===null||typeof a>"u")return;let i,s;if(typeof a!="object"&&(a=[a]),Pr(a))for(i=0,s=a.length;i<s;i++)t.call(null,a[i],i,a);else{const o=n?Object.getOwnPropertyNames(a):Object.keys(a),u=o.length;let l;for(i=0;i<u;i++)l=o[i],t.call(null,a[l],l,a)}}function yf(a,t){t=t.toLowerCase();const n=Object.keys(a);let i=n.length,s;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const wf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vf=a=>!hi(a)&&a!==wf;function _a(){const{caseless:a}=vf(this)&&this||{},t={},n=(i,s)=>{const o=a&&yf(t,s)||s;ys(t[o])&&ys(i)?t[o]=_a(t[o],i):ys(i)?t[o]=_a({},i):Pr(i)?t[o]=i.slice():t[o]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&di(arguments[i],n);return t}const Zv=(a,t,n,{allOwnKeys:i}={})=>(di(t,(s,o)=>{n&&Pt(s)?a[o]=gf(s,n):a[o]=s},{allOwnKeys:i}),a),Jv=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),Qv=(a,t,n,i)=>{a.prototype=Object.create(t.prototype,i),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:t.prototype}),n&&Object.assign(a.prototype,n)},e1=(a,t,n,i)=>{let s,o,u;const l={};if(t=t||{},a==null)return t;do{for(s=Object.getOwnPropertyNames(a),o=s.length;o-- >0;)u=s[o],(!i||i(u,a,t))&&!l[u]&&(t[u]=a[u],l[u]=!0);a=n!==!1&&Sa(a)}while(a&&(!n||n(a,t))&&a!==Object.prototype);return t},t1=(a,t,n)=>{a=String(a),(n===void 0||n>a.length)&&(n=a.length),n-=t.length;const i=a.indexOf(t,n);return i!==-1&&i===n},n1=a=>{if(!a)return null;if(Pr(a))return a;let t=a.length;if(!_f(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=a[t];return n},r1=(a=>t=>a&&t instanceof a)(typeof Uint8Array<"u"&&Sa(Uint8Array)),i1=(a,t)=>{const i=(a&&a[Symbol.iterator]).call(a);let s;for(;(s=i.next())&&!s.done;){const o=s.value;t.call(a,o[0],o[1])}},s1=(a,t)=>{let n;const i=[];for(;(n=a.exec(t))!==null;)i.push(n);return i},o1=Qt("HTMLFormElement"),a1=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),Ol=(({hasOwnProperty:a})=>(t,n)=>a.call(t,n))(Object.prototype),c1=Qt("RegExp"),Af=(a,t)=>{const n=Object.getOwnPropertyDescriptors(a),i={};di(n,(s,o)=>{let u;(u=t(s,o,a))!==!1&&(i[o]=u||s)}),Object.defineProperties(a,i)},u1=a=>{Af(a,(t,n)=>{if(Pt(a)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=a[n];if(Pt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},l1=(a,t)=>{const n={},i=s=>{s.forEach(o=>{n[o]=!0})};return Pr(a)?i(a):i(String(a).split(t)),n},f1=()=>{},h1=(a,t)=>(a=+a,Number.isFinite(a)?a:t),Qo="abcdefghijklmnopqrstuvwxyz",Cl="0123456789",Tf={DIGIT:Cl,ALPHA:Qo,ALPHA_DIGIT:Qo+Qo.toUpperCase()+Cl},p1=(a=16,t=Tf.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;a--;)n+=t[Math.random()*i|0];return n};function d1(a){return!!(a&&Pt(a.append)&&a[Symbol.toStringTag]==="FormData"&&a[Symbol.iterator])}const g1=a=>{const t=new Array(10),n=(i,s)=>{if(Ls(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const o=Pr(i)?[]:{};return di(i,(u,l)=>{const h=n(u,s+1);!hi(h)&&(o[l]=h)}),t[s]=void 0,o}}return i};return n(a,0)},m1=Qt("AsyncFunction"),_1=a=>a&&(Ls(a)||Pt(a))&&Pt(a.then)&&Pt(a.catch),F={isArray:Pr,isArrayBuffer:mf,isBuffer:Uv,isFormData:qv,isArrayBufferView:Hv,isString:Gv,isNumber:_f,isBoolean:jv,isObject:Ls,isPlainObject:ys,isUndefined:hi,isDate:zv,isFile:Wv,isBlob:Kv,isRegExp:c1,isFunction:Pt,isStream:Xv,isURLSearchParams:Yv,isTypedArray:r1,isFileList:Vv,forEach:di,merge:_a,extend:Zv,trim:$v,stripBOM:Jv,inherits:Qv,toFlatObject:e1,kindOf:Rs,kindOfTest:Qt,endsWith:t1,toArray:n1,forEachEntry:i1,matchAll:s1,isHTMLForm:o1,hasOwnProperty:Ol,hasOwnProp:Ol,reduceDescriptors:Af,freezeMethods:u1,toObjectSet:l1,toCamelCase:a1,noop:f1,toFiniteNumber:h1,findKey:yf,global:wf,isContextDefined:vf,ALPHABET:Tf,generateString:p1,isSpecCompliantForm:d1,toJSONObject:g1,isAsyncFn:m1,isThenable:_1};function Ae(a,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}F.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ef=Ae.prototype,xf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{xf[a]={value:a}});Object.defineProperties(Ae,xf);Object.defineProperty(Ef,"isAxiosError",{value:!0});Ae.from=(a,t,n,i,s,o)=>{const u=Object.create(Ef);return F.toFlatObject(a,u,function(h){return h!==Error.prototype},l=>l!=="isAxiosError"),Ae.call(u,a.message,t,n,i,s),u.cause=a,u.name=a.name,o&&Object.assign(u,o),u};const y1=null;function ya(a){return F.isPlainObject(a)||F.isArray(a)}function bf(a){return F.endsWith(a,"[]")?a.slice(0,-2):a}function Ml(a,t,n){return a?a.concat(t).map(function(s,o){return s=bf(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function w1(a){return F.isArray(a)&&!a.some(ya)}const v1=F.toFlatObject(F,{},null,function(t){return/^is[A-Z]/.test(t)});function Is(a,t,n){if(!F.isObject(a))throw new TypeError("target must be an object");t=t||new FormData,n=F.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,S){return!F.isUndefined(S[b])});const i=n.metaTokens,s=n.visitor||m,o=n.dots,u=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(t);if(!F.isFunction(s))throw new TypeError("visitor must be a function");function d(T){if(T===null)return"";if(F.isDate(T))return T.toISOString();if(!h&&F.isBlob(T))throw new Ae("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(T)||F.isTypedArray(T)?h&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function m(T,b,S){let O=T;if(T&&!S&&typeof T=="object"){if(F.endsWith(b,"{}"))b=i?b:b.slice(0,-2),T=JSON.stringify(T);else if(F.isArray(T)&&w1(T)||(F.isFileList(T)||F.endsWith(b,"[]"))&&(O=F.toArray(T)))return b=bf(b),O.forEach(function(B,k){!(F.isUndefined(B)||B===null)&&t.append(u===!0?Ml([b],k,o):u===null?b:b+"[]",d(B))}),!1}return ya(T)?!0:(t.append(Ml(S,b,o),d(T)),!1)}const p=[],w=Object.assign(v1,{defaultVisitor:m,convertValue:d,isVisitable:ya});function v(T,b){if(!F.isUndefined(T)){if(p.indexOf(T)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(T),F.forEach(T,function(O,D){(!(F.isUndefined(O)||O===null)&&s.call(t,O,F.isString(D)?D.trim():D,b,w))===!0&&v(O,b?b.concat(D):[D])}),p.pop()}}if(!F.isObject(a))throw new TypeError("data must be an object");return v(a),t}function Pl(a){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function La(a,t){this._pairs=[],a&&Is(a,this,t)}const Rf=La.prototype;Rf.append=function(t,n){this._pairs.push([t,n])};Rf.toString=function(t){const n=t?function(i){return t.call(this,i,Pl)}:Pl;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function A1(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Sf(a,t,n){if(!t)return a;const i=n&&n.encode||A1,s=n&&n.serialize;let o;if(s?o=s(t,n):o=F.isURLSearchParams(t)?t.toString():new La(t,n).toString(i),o){const u=a.indexOf("#");u!==-1&&(a=a.slice(0,u)),a+=(a.indexOf("?")===-1?"?":"&")+o}return a}class T1{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){F.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Fl=T1,Lf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},E1=typeof URLSearchParams<"u"?URLSearchParams:La,x1=typeof FormData<"u"?FormData:null,b1=typeof Blob<"u"?Blob:null,R1={isBrowser:!0,classes:{URLSearchParams:E1,FormData:x1,Blob:b1},protocols:["http","https","file","blob","url","data"]},If=typeof window<"u"&&typeof document<"u",S1=(a=>If&&["ReactNative","NativeScript","NS"].indexOf(a)<0)(typeof navigator<"u"&&navigator.product),L1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",I1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:If,hasStandardBrowserEnv:S1,hasStandardBrowserWebWorkerEnv:L1},Symbol.toStringTag,{value:"Module"})),Zt={...I1,...R1};function O1(a,t){return Is(a,new Zt.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,o){return Zt.isNode&&F.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function C1(a){return F.matchAll(/\w+|\[(\w*)]/g,a).map(t=>t[0]==="[]"?"":t[1]||t[0])}function M1(a){const t={},n=Object.keys(a);let i;const s=n.length;let o;for(i=0;i<s;i++)o=n[i],t[o]=a[o];return t}function Of(a){function t(n,i,s,o){let u=n[o++];if(u==="__proto__")return!0;const l=Number.isFinite(+u),h=o>=n.length;return u=!u&&F.isArray(s)?s.length:u,h?(F.hasOwnProp(s,u)?s[u]=[s[u],i]:s[u]=i,!l):((!s[u]||!F.isObject(s[u]))&&(s[u]=[]),t(n,i,s[u],o)&&F.isArray(s[u])&&(s[u]=M1(s[u])),!l)}if(F.isFormData(a)&&F.isFunction(a.entries)){const n={};return F.forEachEntry(a,(i,s)=>{t(C1(i),s,n,0)}),n}return null}function P1(a,t,n){if(F.isString(a))try{return(t||JSON.parse)(a),F.trim(a)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(a)}const Ia={transitional:Lf,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,o=F.isObject(t);if(o&&F.isHTMLForm(t)&&(t=new FormData(t)),F.isFormData(t))return s?JSON.stringify(Of(t)):t;if(F.isArrayBuffer(t)||F.isBuffer(t)||F.isStream(t)||F.isFile(t)||F.isBlob(t))return t;if(F.isArrayBufferView(t))return t.buffer;if(F.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return O1(t,this.formSerializer).toString();if((l=F.isFileList(t))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Is(l?{"files[]":t}:t,h&&new h,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),P1(t)):t}],transformResponse:[function(t){const n=this.transitional||Ia.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&F.isString(t)&&(i&&!this.responseType||s)){const u=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(u)throw l.name==="SyntaxError"?Ae.from(l,Ae.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zt.classes.FormData,Blob:Zt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],a=>{Ia.headers[a]={}});const Oa=Ia,F1=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),D1=a=>{const t={};let n,i,s;return a&&a.split(`
`).forEach(function(u){s=u.indexOf(":"),n=u.substring(0,s).trim().toLowerCase(),i=u.substring(s+1).trim(),!(!n||t[n]&&F1[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Dl=Symbol("internals");function ni(a){return a&&String(a).trim().toLowerCase()}function ws(a){return a===!1||a==null?a:F.isArray(a)?a.map(ws):String(a)}function N1(a){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(a);)t[i[1]]=i[2];return t}const B1=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function ea(a,t,n,i,s){if(F.isFunction(i))return i.call(this,t,n);if(s&&(t=n),!!F.isString(t)){if(F.isString(i))return t.indexOf(i)!==-1;if(F.isRegExp(i))return i.test(t)}}function k1(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function U1(a,t){const n=F.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(a,i+n,{value:function(s,o,u){return this[i].call(this,t,s,o,u)},configurable:!0})})}class Os{constructor(t){t&&this.set(t)}set(t,n,i){const s=this;function o(l,h,d){const m=ni(h);if(!m)throw new Error("header name must be a non-empty string");const p=F.findKey(s,m);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||h]=ws(l))}const u=(l,h)=>F.forEach(l,(d,m)=>o(d,m,h));return F.isPlainObject(t)||t instanceof this.constructor?u(t,n):F.isString(t)&&(t=t.trim())&&!B1(t)?u(D1(t),n):t!=null&&o(n,t,i),this}get(t,n){if(t=ni(t),t){const i=F.findKey(this,t);if(i){const s=this[i];if(!n)return s;if(n===!0)return N1(s);if(F.isFunction(n))return n.call(this,s,i);if(F.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ni(t),t){const i=F.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||ea(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let s=!1;function o(u){if(u=ni(u),u){const l=F.findKey(i,u);l&&(!n||ea(i,i[l],l,n))&&(delete i[l],s=!0)}}return F.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const o=n[i];(!t||ea(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,i={};return F.forEach(this,(s,o)=>{const u=F.findKey(i,o);if(u){n[u]=ws(s),delete n[o];return}const l=t?k1(o):String(o).trim();l!==o&&delete n[o],n[l]=ws(s),i[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return F.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=t&&F.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[Dl]=this[Dl]={accessors:{}}).accessors,s=this.prototype;function o(u){const l=ni(u);i[l]||(U1(s,u),i[l]=!0)}return F.isArray(t)?t.forEach(o):o(t),this}}Os.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(Os.prototype,({value:a},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>a,set(i){this[n]=i}}});F.freezeMethods(Os);const hn=Os;function ta(a,t){const n=this||Oa,i=t||n,s=hn.from(i.headers);let o=i.data;return F.forEach(a,function(l){o=l.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Cf(a){return!!(a&&a.__CANCEL__)}function gi(a,t,n){Ae.call(this,a??"canceled",Ae.ERR_CANCELED,t,n),this.name="CanceledError"}F.inherits(gi,Ae,{__CANCEL__:!0});function H1(a,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?a(n):t(new Ae("Request failed with status code "+n.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const G1=Zt.hasStandardBrowserEnv?{write(a,t,n,i,s,o){const u=[a+"="+encodeURIComponent(t)];F.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),F.isString(i)&&u.push("path="+i),F.isString(s)&&u.push("domain="+s),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(a){const t=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function j1(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function z1(a,t){return t?a.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):a}function Mf(a,t){return a&&!j1(t)?z1(a,t):t}const W1=Zt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function s(o){let u=o;return t&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(u){const l=F.isString(u)?s(u):u;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}();function K1(a){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return t&&t[1]||""}function V1(a,t){a=a||10;const n=new Array(a),i=new Array(a);let s=0,o=0,u;return t=t!==void 0?t:1e3,function(h){const d=Date.now(),m=i[o];u||(u=d),n[s]=h,i[s]=d;let p=o,w=0;for(;p!==s;)w+=n[p++],p=p%a;if(s=(s+1)%a,s===o&&(o=(o+1)%a),d-u<t)return;const v=m&&d-m;return v?Math.round(w*1e3/v):void 0}}function Nl(a,t){let n=0;const i=V1(50,250);return s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,l=o-n,h=i(l),d=o<=u;n=o;const m={loaded:o,total:u,progress:u?o/u:void 0,bytes:l,rate:h||void 0,estimated:h&&u&&d?(u-o)/h:void 0,event:s};m[t?"download":"upload"]=!0,a(m)}}const X1=typeof XMLHttpRequest<"u",q1=X1&&function(a){return new Promise(function(n,i){let s=a.data;const o=hn.from(a.headers).normalize();let{responseType:u,withXSRFToken:l}=a,h;function d(){a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let m;if(F.isFormData(s)){if(Zt.hasStandardBrowserEnv||Zt.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((m=o.getContentType())!==!1){const[b,...S]=m?m.split(";").map(O=>O.trim()).filter(Boolean):[];o.setContentType([b||"multipart/form-data",...S].join("; "))}}let p=new XMLHttpRequest;if(a.auth){const b=a.auth.username||"",S=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"";o.set("Authorization","Basic "+btoa(b+":"+S))}const w=Mf(a.baseURL,a.url);p.open(a.method.toUpperCase(),Sf(w,a.params,a.paramsSerializer),!0),p.timeout=a.timeout;function v(){if(!p)return;const b=hn.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),O={data:!u||u==="text"||u==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:b,config:a,request:p};H1(function(B){n(B),d()},function(B){i(B),d()},O),p=null}if("onloadend"in p?p.onloadend=v:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(v)},p.onabort=function(){p&&(i(new Ae("Request aborted",Ae.ECONNABORTED,a,p)),p=null)},p.onerror=function(){i(new Ae("Network Error",Ae.ERR_NETWORK,a,p)),p=null},p.ontimeout=function(){let S=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const O=a.transitional||Lf;a.timeoutErrorMessage&&(S=a.timeoutErrorMessage),i(new Ae(S,O.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,a,p)),p=null},Zt.hasStandardBrowserEnv&&(l&&F.isFunction(l)&&(l=l(a)),l||l!==!1&&W1(w))){const b=a.xsrfHeaderName&&a.xsrfCookieName&&G1.read(a.xsrfCookieName);b&&o.set(a.xsrfHeaderName,b)}s===void 0&&o.setContentType(null),"setRequestHeader"in p&&F.forEach(o.toJSON(),function(S,O){p.setRequestHeader(O,S)}),F.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),u&&u!=="json"&&(p.responseType=a.responseType),typeof a.onDownloadProgress=="function"&&p.addEventListener("progress",Nl(a.onDownloadProgress,!0)),typeof a.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",Nl(a.onUploadProgress)),(a.cancelToken||a.signal)&&(h=b=>{p&&(i(!b||b.type?new gi(null,a,p):b),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const T=K1(w);if(T&&Zt.protocols.indexOf(T)===-1){i(new Ae("Unsupported protocol "+T+":",Ae.ERR_BAD_REQUEST,a));return}p.send(s||null)})},wa={http:y1,xhr:q1};F.forEach(wa,(a,t)=>{if(a){try{Object.defineProperty(a,"name",{value:t})}catch{}Object.defineProperty(a,"adapterName",{value:t})}});const Bl=a=>`- ${a}`,Y1=a=>F.isFunction(a)||a===null||a===!1,Pf={getAdapter:a=>{a=F.isArray(a)?a:[a];const{length:t}=a;let n,i;const s={};for(let o=0;o<t;o++){n=a[o];let u;if(i=n,!Y1(n)&&(i=wa[(u=String(n)).toLowerCase()],i===void 0))throw new Ae(`Unknown adapter '${u}'`);if(i)break;s[u||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,h])=>`adapter ${l} `+(h===!1?"is not supported by the environment":"is not available in the build"));let u=t?o.length>1?`since :
`+o.map(Bl).join(`
`):" "+Bl(o[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:wa};function na(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new gi(null,a)}function kl(a){return na(a),a.headers=hn.from(a.headers),a.data=ta.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),Pf.getAdapter(a.adapter||Oa.adapter)(a).then(function(i){return na(a),i.data=ta.call(a,a.transformResponse,i),i.headers=hn.from(i.headers),i},function(i){return Cf(i)||(na(a),i&&i.response&&(i.response.data=ta.call(a,a.transformResponse,i.response),i.response.headers=hn.from(i.response.headers))),Promise.reject(i)})}const Ul=a=>a instanceof hn?a.toJSON():a;function Cr(a,t){t=t||{};const n={};function i(d,m,p){return F.isPlainObject(d)&&F.isPlainObject(m)?F.merge.call({caseless:p},d,m):F.isPlainObject(m)?F.merge({},m):F.isArray(m)?m.slice():m}function s(d,m,p){if(F.isUndefined(m)){if(!F.isUndefined(d))return i(void 0,d,p)}else return i(d,m,p)}function o(d,m){if(!F.isUndefined(m))return i(void 0,m)}function u(d,m){if(F.isUndefined(m)){if(!F.isUndefined(d))return i(void 0,d)}else return i(void 0,m)}function l(d,m,p){if(p in t)return i(d,m);if(p in a)return i(void 0,d)}const h={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:l,headers:(d,m)=>s(Ul(d),Ul(m),!0)};return F.forEach(Object.keys(Object.assign({},a,t)),function(m){const p=h[m]||s,w=p(a[m],t[m],m);F.isUndefined(w)&&p!==l||(n[m]=w)}),n}const Ff="1.6.7",Ca={};["object","boolean","number","function","string","symbol"].forEach((a,t)=>{Ca[a]=function(i){return typeof i===a||"a"+(t<1?"n ":" ")+a}});const Hl={};Ca.transitional=function(t,n,i){function s(o,u){return"[Axios v"+Ff+"] Transitional option '"+o+"'"+u+(i?". "+i:"")}return(o,u,l)=>{if(t===!1)throw new Ae(s(u," has been removed"+(n?" in "+n:"")),Ae.ERR_DEPRECATED);return n&&!Hl[u]&&(Hl[u]=!0,console.warn(s(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,u,l):!0}};function $1(a,t,n){if(typeof a!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const i=Object.keys(a);let s=i.length;for(;s-- >0;){const o=i[s],u=t[o];if(u){const l=a[o],h=l===void 0||u(l,o,a);if(h!==!0)throw new Ae("option "+o+" must be "+h,Ae.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ae("Unknown option "+o,Ae.ERR_BAD_OPTION)}}const va={assertOptions:$1,validators:Ca},In=va.validators;class Es{constructor(t){this.defaults=t,this.interceptors={request:new Fl,response:new Fl}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Cr(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:o}=n;i!==void 0&&va.assertOptions(i,{silentJSONParsing:In.transitional(In.boolean),forcedJSONParsing:In.transitional(In.boolean),clarifyTimeoutError:In.transitional(In.boolean)},!1),s!=null&&(F.isFunction(s)?n.paramsSerializer={serialize:s}:va.assertOptions(s,{encode:In.function,serialize:In.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=o&&F.merge(o.common,o[n.method]);o&&F.forEach(["delete","get","head","post","put","patch","common"],T=>{delete o[T]}),n.headers=hn.concat(u,o);const l=[];let h=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(h=h&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let m,p=0,w;if(!h){const T=[kl.bind(this),void 0];for(T.unshift.apply(T,l),T.push.apply(T,d),w=T.length,m=Promise.resolve(n);p<w;)m=m.then(T[p++],T[p++]);return m}w=l.length;let v=n;for(p=0;p<w;){const T=l[p++],b=l[p++];try{v=T(v)}catch(S){b.call(this,S);break}}try{m=kl.call(this,v)}catch(T){return Promise.reject(T)}for(p=0,w=d.length;p<w;)m=m.then(d[p++],d[p++]);return m}getUri(t){t=Cr(this.defaults,t);const n=Mf(t.baseURL,t.url);return Sf(n,t.params,t.paramsSerializer)}}F.forEach(["delete","get","head","options"],function(t){Es.prototype[t]=function(n,i){return this.request(Cr(i||{},{method:t,url:n,data:(i||{}).data}))}});F.forEach(["post","put","patch"],function(t){function n(i){return function(o,u,l){return this.request(Cr(l||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Es.prototype[t]=n(),Es.prototype[t+"Form"]=n(!0)});const vs=Es;class Ma{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(s=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](s);i._listeners=null}),this.promise.then=s=>{let o;const u=new Promise(l=>{i.subscribe(l),o=l}).then(s);return u.cancel=function(){i.unsubscribe(o)},u},t(function(o,u,l){i.reason||(i.reason=new gi(o,u,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Ma(function(s){t=s}),cancel:t}}}const Z1=Ma;function J1(a){return function(n){return a.apply(null,n)}}function Q1(a){return F.isObject(a)&&a.isAxiosError===!0}const Aa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Aa).forEach(([a,t])=>{Aa[t]=a});const eA=Aa;function Df(a){const t=new vs(a),n=gf(vs.prototype.request,t);return F.extend(n,vs.prototype,t,{allOwnKeys:!0}),F.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Df(Cr(a,s))},n}const We=Df(Oa);We.Axios=vs;We.CanceledError=gi;We.CancelToken=Z1;We.isCancel=Cf;We.VERSION=Ff;We.toFormData=Is;We.AxiosError=Ae;We.Cancel=We.CanceledError;We.all=function(t){return Promise.all(t)};We.spread=J1;We.isAxiosError=Q1;We.mergeConfig=Cr;We.AxiosHeaders=hn;We.formToJSON=a=>Of(F.isHTMLForm(a)?new FormData(a):a);We.getAdapter=Pf.getAdapter;We.HttpStatusCode=eA;We.default=We;const tA=We,nA=(a="default",t)=>{const{baseScene:n,loading:i,scene:s,camera:o,cssRenderer:u,orbitControls:l,gui:h,renderMixins:d,loader:m,sceneContainer:p,spriteContainer:w,render:v,createSphere:T,createToSpirit:b,eventHandler:S}=Bv(t),O=async()=>new Promise((k,$)=>{tA.get("/config.json").then(j=>{const{data:H}=j;let U=null;a==="edit"?(H.scenes.forEach((V,de)=>{V.spirits.forEach((le,se)=>{le.handler=[{eventName:"mousemove",handlerType:"editMove",handlerValue:`${V.name}&spirit${se}`},{eventName:"mouseup",handlerType:"editUp",handlerValue:`${V.name}&spirit${se}`},{eventName:"mousedown",handlerType:"editDown",handlerValue:`${V.name}&spirit${se}`},{eventName:"mouseleave",handlerType:"editLeave",handlerValue:`${V.name}&spirit${se}`}]})}),U=H.scenes):U=j.data.scenes.filter(V=>V.show),H.scenes=U,window.sceneConfig=H;let X=null;H!=null&&H.firstScene?X=H.scenes.filter(V=>V.name===H.firstScene)[0]:X=H.scenes[0],b(X),k(X.name)})}),D=k=>new Promise(async($,j)=>{const H=[`scenes/${k}/px.png`,`scenes/${k}/nx.png`,`scenes/${k}/py.png`,`scenes/${k}/ny.png`,`scenes/${k}/pz.png`,`scenes/${k}/nz.png`];await T({cubeTexture:H,side:Xl}).then(U=>{p.add(U),$()})}),B=()=>{const k={change:()=>{}};h==null||h.add(k,"change").name("切换材质")};return ba(async()=>{i.value=!0,await O().then(async k=>{console.debug("精灵加载完成"),await D(k).then(()=>{console.debug("球体容器完成")})}),B(),o.value.position.set(0,0,-.5),l.value.update(),i.value=!1,v()}),{baseScene:n,loading:i,sceneContainer:p,spriteContainer:w,createToSpirit:b,eventHandler:S,camera:o,orbitControls:l}},rA=a=>(qy("data-v-5586cc8a"),a=a(),Yy(),a),iA={id:"baseScene",ref:"baseScene",class:"base-scene"},sA={key:0,class:"loading"},oA=rA(()=>$y("span",null,"请耐心等待...",-1)),aA=[oA],cA={__name:"index",props:{type:{type:String,default:"default"},fn:{type:Function}},emits:["getSpiritData"],setup(a,{emit:t}){const n=a,{loading:i,spriteContainer:s,createToSpirit:o,eventHandler:u,camera:l,orbitControls:h}=nA(n.type,n.fn),d=t;return ba(()=>{d("getSpiritData",{spriteContainer:s,createToSpirit:o,eventHandler:u,camera:l,orbitControls:h})}),(m,p)=>(cl(),ul("div",iA,[Vy(i)?(cl(),ul("div",sA,aA)):Xy("",!0)],512))}},fA=Ky(cA,[["__scopeId","data-v-5586cc8a"]]);export{fA as B,tA as a};
